import{r as t,_ as y,u as O,b as C,g as P,B as D,j as s,A as G,h as v,F as j,i as z,P as V,H,E as I,S as p,C as E,G as m,J as M,K as _,n as N,V as X,M as B,N as J,T as K,l as Q,O as U,Q as q,z as W}from"./index-a17d5818.js";t.lazy(()=>y(()=>import("./index-a17d5818.js").then(i=>i.cS),["assets/index-a17d5818.js","assets/index-ed5220eb.css"]));const Y=t.lazy(()=>y(()=>import("./index-d261404d.js"),["assets/index-d261404d.js","assets/index-a17d5818.js","assets/index-ed5220eb.css"])),as=({categoryName:i,category_id:b,HeaderShown:R=!0,rest:F,loaded:$,selectedBrandId:c,selectedSortId:r})=>{let u=O();C();const{nameStyles:h,button:Z,loadMore:k}=W(),[x,L]=t.useState(1),[o,T]=t.useState([]);t.useState(!1);const[w,f]=t.useState(!1);t.useState(1);const[d,g]=t.useState(!1);t.useEffect(()=>{A()},[x,c,r]);async function A(){var a,l,n;g(!0),f(!1),console.log(r);try{const{data:e}=await P.get(`${D}/store/offer?page=${x}&limit=8&category=${b}${c?`&brandId=${c}`:""}${r?`&sort=${r}`:""}`);((a=e==null?void 0:e.data)==null?void 0:a.offers.length)<1&&f(!0),T(c||r?[...(l=e==null?void 0:e.data)==null?void 0:l.offers]:[...o,...(n=e==null?void 0:e.data)==null?void 0:n.offers])}catch(e){console.log(e,"GET_CATEGORIES_OFFERS_ERR")}finally{g(!1)}}return(o==null?void 0:o.length)<=0,s.jsx(G,{borderRadius:"20px",isLoaded:$,children:s.jsxs(v,{children:[R&&s.jsxs(j,{w:"100%",pt:"20px",children:[s.jsxs(z,{children:[s.jsx(V,{}),s.jsx(H,{...h,children:i})]}),s.jsx(I,{}),s.jsx(t.Suspense,{fallback:s.jsx(p,{size:"sm"}),children:s.jsx(E,{bg:"dark",color:"white",px:"15px",py:"5px",as:"button",onClick:()=>u(`${m}/dashboard/category/${i}`,{state:F}),...h,children:"SEE ALL OFFERS"})})]}),s.jsx(M,{columns:[2,2,3,4,4],spacingX:["35px","35px","35px","15px","35px"],w:"100%",children:s.jsx(t.Suspense,{fallback:s.jsx(p,{size:"sm"}),children:o==null?void 0:o.map((a,l)=>{var n,e,S;return s.jsx(Y,{isLoaded:!d,productTitle:a.name,points:`${a==null?void 0:a.tokens}${(n=a.reward)==null?void 0:n.rewardSymbol}`,productSubtitle:(S=(e=a.product)==null?void 0:e.category)==null?void 0:S.name,price:a.originalPrice,isNew:_(_()).diff(a==null?void 0:a.createdAt,"days")<1,rest:{...a},i:l,bgImage:a==null?void 0:a.offerImages,onClick:()=>u(`${m}/productDetails/${a.offerCode}`)},N())})})}),o.length<1&&s.jsxs(X,{children:[s.jsx(j,{w:"500px",h:"300px",children:s.jsx(B,{animationData:J,loop:!0,autoplay:!0,width:50,height:70})}),s.jsx(K,{children:"There are no offers founds."})]}),!w&&s.jsx(E,{as:Q,...k,onClick:()=>{L(x+1)},children:d?s.jsx(p,{size:"sm"}):s.jsxs(s.Fragment,{children:["Load more ",s.jsx(U,{as:q,ml:"5%"})]})})]})})};export{as as O};
