import{bG as E,bF as H,cA as os,j as e,bH as K,bI as ns,bD as rs,r as t,F as i,T as r,C as I,S as m,_ as as,u as is,b as ls,a as cs,N as je,d as we,ar as ds,cB as ps,cC as xs,cD as us,cE as hs,U as j,av as q,n as z,aj as R,h as Re,a0 as fs,a1 as Ce,a2 as ve,a3 as Pe,cF as gs,i as P,H as ms,X as ke,ag as bs,ah as J,L as ys,l as Ie,c2 as Ss,g as js,bs as ws,br as Cs,W as vs,m as Ps}from"./index-805c2800.js";import{M as ks}from"./MyProfile-a29477b2.js";import{I as Is}from"./index.esm-27b1caef.js";import{u as Fs}from"./chunk-7D6N5TE5-be0901eb.js";import{c as Os}from"./countries-020c4914.js";import{C as k}from"./index-48807620.js";import{C as _s}from"./index-01b4a99a.js";import{P as Fe,a as Oe}from"./chunk-I5V4ORUK-efc71036.js";var Rs={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},Es=E("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),Z=H(function(a,p){var l;const{placement:u="left",...x}=a,h=(l=Rs[u])!=null?l:{},d=os();return e.jsx(Es,{ref:p,...x,__css:{...d.addon,...h}})});Z.displayName="InputAddon";var ee=H(function(a,p){return e.jsx(Z,{ref:p,placement:"left",...a,className:K("chakra-input__left-addon",a.className)})});ee.displayName="InputLeftAddon";ee.id="InputLeftAddon";var Ee=H(function(a,p){return e.jsx(Z,{ref:p,placement:"right",...a,className:K("chakra-input__right-addon",a.className)})});Ee.displayName="InputRightAddon";Ee.id="InputRightAddon";var ze=H(function(a,p){const l=ns("Switch",a),{spacing:u="0.5rem",children:x,...h}=rs(a),{getIndicatorProps:d,getInputProps:f,getCheckboxProps:g,getRootProps:M,getLabelProps:b}=Fs(h),D=t.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...l.container}),[l.container]),y=t.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...l.track}),[l.track]),F=t.useMemo(()=>({userSelect:"none",marginStart:u,...l.label}),[u,l.label]);return e.jsxs(E.label,{...M(),className:K("chakra-switch",a.className),__css:D,children:[e.jsx("input",{className:"chakra-switch__input",...f({},p)}),e.jsx(E.span,{...g(),className:"chakra-switch__track",__css:y,children:e.jsx(E.span,{__css:l.thumb,className:"chakra-switch__thumb",...d()})}),x&&e.jsx(E.span,{className:"chakra-switch__label",...b(),__css:F,children:x})]})});ze.displayName="Switch";const _e=({head:o,body:a,isButton:p,onClick:l,loading:u,onChange:x,value:h,isChecked:d,switchLoading:f})=>{const{root:g,lowerSec:M,subHeadStyle:b,headingStyle:D,bodyStyle:y,button:F}=zs();return e.jsxs(i,{...g,flexDir:"column",children:[e.jsx(r,{...b,children:o}),e.jsxs(i,{...M,flexDir:"row",justify:"space-between",children:[e.jsx(r,{...y,w:"65%",children:a}),p?e.jsx(I,{as:"button",...F,onClick:l,children:u?e.jsx(m,{mx:"18px",my:"2px",size:"sm"}):e.jsx(r,{fontSize:["14px","12px","12px","12px","14px"],children:"Change"})}):e.jsxs(i,{align:"center",children:[f&&e.jsx(m,{size:"xs",color:"dark"}),e.jsx(ze,{sx:{"span.chakra-switch__track:not([data-checked])":{backgroundColor:"gray"},"span.chakra-switch__track":{backgroundColor:"gray.900"}},size:"sm",value:h,onChange:x,pl:"5px",isChecked:d})]})]})]})},zs=()=>({root:{w:"100%",mb:"2%"},lowerSec:{w:"100%",align:"center"},headingStyle:{fontSize:["14px","12px","14px","16px","18px"]},subHeadStyle:{fontSize:["14px","12px","12px","12px","14px"]},bodyStyle:{fontSize:["14px","14px","12px","12px","12px"],color:"#999999"},button:{borderWidth:1,borderColor:"#000000",px:"2%",py:"0.5%",borderRadius:"100px"}}),Ms=o=>o?o.slice(0,6)+"..."+o.slice(-4):"",Ds=t.lazy(()=>as(()=>import("./index-11490bdc.js"),["assets/index-11490bdc.js","assets/index-805c2800.js","assets/index-00bfa456.css","assets/countries-020c4914.js","assets/chunk-3RSXBRAN-ac8942a7.js"])),Ns=()=>{var be,ye,Se;is();let o=ls();const a=cs(),{root:p,headingStyle:l,bodyStyle:u,subHeadStyle:x,manageButton:h,countrySelect:d,root2:f,desc:g,basedText:M}=As(),{isOpen:b,onOpen:D,onClose:y}=je(),{isOpen:F,onOpen:Me,onClose:U}=je(),{user_data:c}=we(s=>s.userReducer),{token:w}=we(s=>s.authReducer);ds();const[se,{isLoading:De,isSuccess:C,error:N,isError:Ne,reset:Ae}]=ps(),[Te,{isLoading:Le,isSuccess:te,error:$,isError:oe,reset:Be}]=xs(),[ne]=us(),[We,He]=t.useState("Switzerland"),[v,G]=t.useState("566"),[S,A]=t.useState(c.phone?`+${c.phone}`:""),[Ue,re]=t.useState(""),[ae,$e]=t.useState(""),[Ge,V]=t.useState(!1),[ie,Bs]=t.useState(c==null?void 0:c.email),[Ve,Ye]=t.useState("");t.useState(!1);const[Qe,T]=t.useState(!1),[Ws,L]=t.useState(!1),[Hs,B]=t.useState(!1),[W,Xe]=t.useState(!1),[le,ce]=t.useState(!1),[de,pe]=t.useState(!1),[xe,qe]=t.useState(60),[ue,he]=t.useState(""),[O,fe]=t.useState(""),[_,ge]=t.useState(""),[Y,me]=t.useState(""),Je=()=>Xe(!W),{data:Q}=hs(void 0,{refetchOnFocus:!0,skip:!w}),Ke=()=>{js.get("https://ipapi.co/json/").then(s=>{let n=s.data;He(n.country_name),G(n.country_calling_code),A(n.country_calling_code)}).catch(s=>{console.log(s)})};t.useEffect(()=>()=>{},[c]),t.useEffect(()=>{var s;N&&j(o,((s=N==null?void 0:N.data)==null?void 0:s.message)||"Could not send OTP. Please try again later."),C&&j(o,`OTP has been sent to phone number ending in ${S.slice(-4)}`)},[Ne,C]),t.useEffect(()=>{var s;oe&&j(o,((s=$==null?void 0:$.data)==null?void 0:s.message)||"Could not send OTP. Please try again later."),te&&(j(o,"Your phone number has been updated successfully"),a(q({token:w})),y(),A(""),G(""),re(""))},[oe,te]),t.useEffect(()=>{b||(Ae(),Be())},[b]);async function Ze(){if(!ie.includes("@"))return k(o,"Invalid email address","Please enter a valid email address");try{V(!0);const{payload:s,error:n}=await a(ws({identifier:ie}));if(n)return V(!1),k(o,"Error",n==null?void 0:n.message);s&&(Ye(s==null?void 0:s.userId),Me())}catch(s){console.log(s,"SEND_RESET_CODE_ERR")}finally{V(!1)}}async function es(){try{if(O!==_)return k(o,"Invalid password","Password do not match");if(O.length<8||_.length<8)return k(o,"Invalid password","Password must be at least 8 characters");if(Y.length<4)return k(o,"Invalid otp","Please provide a valid otp code");const{payload:s,error:n}=await a(Cs({code:Y,password:O,confirmPassword:_,userId:Ve}));if(n)return pe(!1),k(o,"Error",n==null?void 0:n.message);s&&(_s(o,"Password changed successfully",5e3),fe(""),ge(""),me(""),U())}catch(s){console.log(s)}finally{pe(!1)}}t.useEffect(()=>{Ke()},[]);const X=(ye=((be=Os)==null?void 0:be.map(s=>({id:z(),...s}))).filter(s=>s.name==="234"||s.callingCodes[0]==="234"))==null?void 0:ye[0];async function ss(s){s==="login"?T(!0):s==="deposit"?L(!0):B(!0),await ne({enable:!0}).then(async n=>{console.log(n),w&&a(q({token:w})),(n==null?void 0:n.statusCode)===200&&j(o,"2FA enabled successfully")}).catch(n=>{console.log(n,"UOPIO")}).finally(()=>{T(!1),L(!1),B(!1)})}async function ts(s){s==="login"?T(!0):s==="deposit"?L(!0):B(!0),await ne({enable:!1}).then(async({data:n})=>{w&&a(q({token:w})),(n==null?void 0:n.statusCode)===200&&j(o,"2FA disabled successfully")}).catch(n=>{console.log(n,"UOPIO")}).finally(()=>{T(!1),L(!1),B(!1)})}return e.jsxs(i,{...p,flexDir:"column",children:[e.jsx(r,{...l,children:"Security"}),e.jsx(r,{...u,children:"Secure your account by enabling these settings."}),e.jsxs(i,{flexDir:"column",children:[e.jsx(r,{...x,children:"Two factor authentication"}),e.jsx(R,{my:"1%"}),e.jsx(_e,{head:"Enable at login",body:`If enabled, we will send a temporary 4-digit code to your email ${Ms(c==null?void 0:c.email)} when you login.`,isChecked:c==null?void 0:c.is2faEnabled,switchLoading:Qe,onChange:()=>{c!=null&&c.is2faEnabled?ts("login"):ss("login")}}),e.jsx(r,{...x,children:"Login"}),e.jsx(R,{my:"1%"}),e.jsx(_e,{head:"Password",body:"We’ll send a temporary 4-digit code to reset your password",isButton:!0,loading:Ge,onClick:Ze}),e.jsxs(i,{justify:"space-between",align:"flex-end",children:[e.jsxs(Re,{spacing:2,children:[e.jsx(r,{...x,children:"Phone number"}),e.jsx(r,{color:"#999999",fontSize:["14px","14px","12px","12px","12px"],children:"Manage your phone number"})]}),e.jsx(I,{as:"button",...h,onClick:D,children:e.jsx(r,{fontSize:["14px","12px","12px","12px","14px"],children:"Manage"})})]}),e.jsx(R,{my:"1%"})]}),(Se=Q==null?void 0:Q.phones)==null?void 0:Se.map(s=>e.jsxs(i,{align:"center",children:[e.jsx(fs,{src:X==null?void 0:X.flag,size:"xs"}),e.jsx(r,{fontSize:"12px",pl:"5px",children:s==null?void 0:s.phone})]},z())),e.jsxs(Ce,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:b,size:"xl",onClose:y,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(ve,{}),e.jsxs(Pe,{w:{base:"90vw",md:"50vw"},borderRadius:0,p:"2%",overflowY:"scroll",children:[e.jsx(gs,{}),e.jsx(P,{mb:"30px",children:e.jsx(ms,{fontSize:"18px",children:"Update Phone Number"})}),e.jsxs(ke,{w:"full",display:C?"none":void 0,children:[e.jsx(r,{fontSize:"14px",mt:"24px",mb:"8px",children:"Phone number"}),e.jsxs(bs,{...f,children:[e.jsx(ee,{w:"15%",pl:2,p:"0",h:"100%",children:e.jsx(Ds,{isCallingCode:!0,onChange:s=>{G(s.target.value),A(s.target.value+S.slice(3))},value:v||"234",...d})}),e.jsx(J,{h:"100%",borderRadius:"0px",boxShadow:"none",outline:"none",type:"tel",pattern:"[0-9+]*",placeholder:`${v||"(000)"} 0 000 000 000 `,value:S,onChange:({target:s})=>{A(s.value.replace(/[^0-9+]+/g,""))}})]}),e.jsx(I,{as:"button",mt:5,w:"full",onClick:()=>{/^\+[0-9]{7,15}$/.test(S)?se({phone:S,countryCode:v}):j(o,"Invalid Phone number format. Should be international format (i.e +123...)")},bg:"black",color:"light",h:"50px",children:De?e.jsxs(P,{children:[e.jsx(m,{}),e.jsx(r,{children:"Loading"})]}):e.jsx(r,{children:"Add phone"})})]}),e.jsx(R,{display:C?void 0:"none",orientation:"horizontal",mt:"40px"}),e.jsxs(i,{mt:"16px",display:C?void 0:"none",justifyContent:"center",alignItems:"center",flexDir:"column",children:[e.jsx(r,{fontSize:"14px",mb:"10px",children:"Enter the 2-step verification code that we texted to your phone"}),e.jsx(P,{w:"100%",h:"48px",justifyContent:"center",alignItems:"center",children:e.jsx(Fe,{onComplete:s=>{re(s),$e("")},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(Oe,{bg:"#F6F6F6",borderRadius:10,borderWidth:0,w:"48px",h:"100%"},z()))})}),ae&&e.jsx(r,{color:"red",mt:"10px",children:ae}),e.jsxs(r,{pt:"10px",children:["Didn’t receive the code?"," ",e.jsxs(ys,{onClick:()=>{se({phone:S,countryCode:v})},href:"#",color:"#256BF2",children:[" ","Resend code"]})]})]}),e.jsx(R,{orientation:"horizontal",mt:"16px"}),e.jsxs(i,{mt:"24px",flexDir:"column",display:C?void 0:"none",children:[e.jsx(I,{onClick:()=>Te({phone:S,countryCode:v,countryName:We,code:Ue}),as:"button",bg:"black",color:"light",h:"50px",children:Le?e.jsxs(P,{children:[e.jsx(m,{}),e.jsx(r,{children:"Loading"})]}):e.jsx(r,{children:"Add phone"})}),e.jsx(I,{as:"button",bg:"light",color:"dark",h:"50px",border:"1px solid black",onClick:y,mt:"8px",children:e.jsx(r,{children:"Cancel"})})]})]})]}),e.jsxs(Ce,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:F,size:"xl",onClose:U,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(ve,{}),e.jsx(Pe,{w:{base:"90vw",md:"50vw"},borderRadius:0,p:"2%",overflowY:"scroll",children:e.jsxs(i,{flexDir:"column",py:"5px",children:[e.jsxs(i,{justifyContent:"space-between",mb:"20px",children:[e.jsx(r,{fontSize:"20px",fontWeight:"700",children:"New Password"}),e.jsx(i,{as:"button",onClick:U,children:e.jsx(Is,{size:25})})]}),e.jsx(r,{fontSize:"16px",mb:"10px",children:"Please provide your new login details"}),e.jsx(J,{placeholder:"Password",borderColor:"rgba(0, 0, 0, 0.1)",backgroundColor:"#F5F5F5",borderRadius:"10px",py:"10px",px:"20px",variant:"unstyled",w:"100%",value:O,type:W?"text":"password",onChange:({target:s})=>{fe(s.value),he("")}}),e.jsx(J,{mt:"20px",placeholder:"Confirm Password",backgroundColor:"#F5F5F5",borderRadius:"10px",py:"10px",px:"20px",variant:"unstyled",w:"100%",value:_,type:W?"text":"password",onChange:({target:s})=>{ge(s.value),he("")}}),e.jsx(r,{as:Ie,onClick:Je,alignSelf:"flex-end",pt:"0px",bg:"transparent",_hover:{bg:"transparent"},children:W?"Hide":"Show"}),e.jsx(P,{w:"100%",h:"80px",children:e.jsx(Fe,{onComplete:s=>{me(s)},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(Oe,{bg:"grey",borderRadius:10,borderWidth:0,w:"30%",h:"100%",_focus:{border:"1px solid #1a1e26",outline:"none",boxShadow:"none"}},z()))})}),ue&&e.jsx(r,{color:"#E50000",children:ue}),de&&e.jsx(m,{size:"sm",alignSelf:"flex-end",mt:"10px"}),e.jsxs(P,{fontSize:"14px",mt:"25px",children:[e.jsx(r,{children:"Did not receive OTP?"}),e.jsx(ke,{opacity:le?1:.5,onClick:()=>{le&&(qe(xe+1),ce(!1))},children:e.jsx(Ss,{countFrom:xe,onCountdownComplete:()=>{ce(!0)}})})]}),e.jsx(I,{mt:"10px",w:"100%",bg:"black",color:"white",p:"10px",borderRadius:"8px",as:Ie,isLoading:de,onClick:es,_hover:{bg:"black",_loading:{bg:"black"}},isDisabled:!O||!_||!Y,children:"Confirm"})]})})]})]})},As=()=>({root:{w:"100%",h:"100%"},root2:{w:"100%",h:"48px",align:"center",justify:"center",px:"0px",bg:"#FFFFFF",borderColor:"1px solid rgba(0, 0, 0, 0.08)",outline:"none",borderRadius:"0px"},headingStyle:{fontSize:["14px","12px","14px","16px","18px"]},bodyStyle:{fontSize:["14px","14px","12px","12px","12px"],color:"#999999"},subHeadStyle:{fontSize:["14px","12px","12px","12px","14px"],mt:"4%"},manageButton:{borderWidth:1,borderColor:"#000000",px:"2%",borderRadius:"100px",h:"30px"},countrySelect:{w:{base:"100%",md:"100%"},bg:"#FFFFFF",color:"dark",borderColor:"1px solid rgba(0, 0, 0, 0.08)",borderWidth:"1px",align:"center",borderRadius:"0px"},basedText:{fontSize:{base:"14px",md:"16px"}},desc:{pb:"5px",fontSize:{base:"15px",md:"17px"},w:{base:"100%",md:"80%"}}}),Ts=()=>{const{root:o,rootBox:a,leftSection:p,rightSection:l,singleRouteStyle:u}=Ls(),[x,h]=t.useState(0),d=[{route:"Edit Profile",view:e.jsx(t.Suspense,{fallback:e.jsx(m,{size:"sm"}),children:e.jsx(ks,{})},"1")},{route:"Security",view:e.jsx(t.Suspense,{fallback:e.jsx(m,{size:"sm"}),children:e.jsx(Ns,{})},"3")}];return e.jsxs(i,{flexDir:"column",children:[e.jsx(t.Suspense,{fallback:e.jsx(m,{size:"sm"}),children:e.jsx(vs,{})}),e.jsxs(Ps,{children:[e.jsx(Re,{...o,children:e.jsxs(i,{...a,children:[e.jsx(i,{...p,flexDir:"column",children:d==null?void 0:d.map((f,g)=>e.jsx(i,{...u,as:"button",onClick:()=>h(g),bg:g===x?"white":"transparent",children:e.jsx(r,{fontSize:["14px","14px","14px","14px","14px"],children:f.route})},z()))}),e.jsx(i,{...l,overflowY:"scroll",children:d==null?void 0:d.map((f,g)=>g===x&&f.view)})]})}),"`"]})]})},Ks=Ts,Ls=()=>({root:{w:"100%",h:"600px",mt:"108px",pt:"3%",overflow:"hidden"},rootBox:{w:"100%",h:"100%",borderRadius:"15px",overflow:"hidden",borderWidth:"1px",borderColor:"#00000007"},leftSection:{h:"100%",w:"25%",bg:"#F2F2F2"},rightSection:{h:"100%",w:"75%",p:"3%"},singleRouteStyle:{w:"100%",h:"8%",borderBottomWidth:"1px",borderBottomColor:"#0000001C",align:"center",pl:"3%"}});export{Ks as default};
