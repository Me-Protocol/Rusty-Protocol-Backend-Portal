import{bq as We,aq as T,bw as Ge,aQ as He,j as e,ar as E,as as Xe,r as d,_ as I,u as Ye,a as Qe,Q as qe,c as Ke,d as P,at as Ue,Y as Je,bV as Ze,X as Re,F as o,S as w,p as es,h as v,G as S,T as n,J as f,i as N,al as L,C as ss,z as k,aK as rs,aL as as,b9 as _e,M as A,I as ns,K as ts,V as os,bW as ls,bX as ds,bY as is,bZ as cs}from"./index-e858156d.js";import{e as xs}from"./empty-fb04a4d6.js";import{S as hs}from"./index-0c7ed3cc.js";import{g as De,C as ps,a as bs,L as gs,P as ms,b as us,p as js,c as fs,i as ys,d as ws,e as Ss,f as Cs}from"./random-color-f88bfeda.js";import{S as Rs}from"./chunk-3RSXBRAN-db78bbc1.js";var[_s,$]=We({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),ve=T((i,g)=>{const p=Ge("Table",i),{className:j,layout:C,...z}=He(i);return e.jsx(_s,{value:p,children:e.jsx(E.table,{ref:g,__css:{tableLayout:C,...p.table},className:Xe("chakra-table",j),...z})})});ve.displayName="Table";var Ds=T((i,g)=>{const p=$();return e.jsx(E.tr,{...i,ref:g,__css:p.tr})}),vs=T((i,g)=>{const p=$();return e.jsx(E.tbody,{...i,ref:g,__css:p.tbody})}),_=T(({isNumeric:i,...g},p)=>{const j=$();return e.jsx(E.td,{...g,ref:p,__css:j.td,"data-is-numeric":i})});const Ls="/assets/sentarrow-195623c8.svg",ks=d.lazy(()=>I(()=>import("./index-42a7ef4e.js"),["assets/index-42a7ef4e.js","assets/index-e858156d.js","assets/index-ed5220eb.css","assets/index-ef641e1e.js","assets/countries-e12a8af3.js","assets/chunk-3RSXBRAN-db78bbc1.js","assets/chunk-K7XRJ7NL-0eace40d.js"])),As=d.lazy(()=>I(()=>import("./index-864db2fb.js"),["assets/index-864db2fb.js","assets/index-e858156d.js","assets/index-ed5220eb.css"])),Ts=d.lazy(()=>I(()=>import("./index-e858156d.js").then(i=>i.dc),["assets/index-e858156d.js","assets/index-ed5220eb.css"])),Es=d.lazy(()=>I(()=>import("./index-95713195.js"),["assets/index-95713195.js","assets/index-e858156d.js","assets/index-ed5220eb.css"])),Ys=()=>{var H,X,Y,Q,q,K,U,J,Z,ee,se,re,ae,ne,te,oe,le,de,ie,ce,xe,he,pe,be,ge,me,ue,je,fe,ye,we,Se,Ce;let i=Ye();const g=Qe(),{root:p,font:j,font1:C,font3:z,smallButton1:M,root2:Le,nameStyles:B,graphBox:ke}=Is(),{id:y}=qe(),{state:r}=Ke(),[Ae,Te]=d.useState([]),{token:Ee}=P(s=>s==null?void 0:s.authReducer),{reward_type_product:F}=P(s=>s.productReducer),{user_data:m,my_debit_credit:O,my_rewards:zs,my_rewards_loading:Fs,my_debit_credit_single:Os}=P(s=>s==null?void 0:s.userReducer),R=O&&De(O)[y],[Ie,Ps]=d.useState(!1),{data:u,isLoading:Ns}=Ue({page:1,limit:4,brandId:y},{refetchOnMountOrArgChange:!0,skip:!y}),{data:x,error:$s}=Je({id:y},{refetchOnFocus:!0,skip:!y}),V={"Last 7 days":{label:"Last 7 days",millisecondsAgo:60*60*24*7*1e3},"Last 30 days":{label:"Last 30 days",millisecondsAgo:60*60*24*30*1e3},"Last 3 days":{label:"Last 3 days",millisecondsAgo:60*60*24*3*1e3}},W=s=>{const a=Date.now()-s;return new Date(a).toISOString()},ze={startDate:W(V["Last 7 days"].millisecondsAgo),endDate:new Date().toISOString(),dateRangeString:"Last 7 days"},[D,Fe]=d.useState(ze),Oe=s=>{console.log("heyooo",s);const a=V[s].millisecondsAgo;Fe({...D,startDate:W(a),dateRangeString:s})},Pe=async()=>{var c,h;if(!((c=m==null?void 0:m.customer)!=null&&c.walletAddress))return;const{data:s}=await ds.get_account_detail({address:(h=m==null?void 0:m.customer)==null?void 0:h.walletAddress}),a=[];for(const t in s.result.balance)a.push({contractAddress:is(t),balance:cs(s.result.balance[t])});const l=F==null?void 0:F.map(t=>{const Be=a==null?void 0:a.find(Ve=>Ve.contractAddress===(t==null?void 0:t.contractAddress));return{...t,balance:Be}});Te(l==null?void 0:l.filter(t=>t.balance))};d.useEffect(()=>{g(Ze({token:Ee})),Pe()},[]),Re();const{isOpen:Ms,onOpen:Ne,onClose:Bs}=Re();ps.register(bs,gs,ms,us,js,fs,ys,ws);const $e={type:"line",responsive:!0,stepped:"middle",elements:{point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}},scales:{x:{ticks:{autoSkip:!0},grid:{display:!1}},y:{min:0,ticks:{autoSkip:!0,maxTicksLimit:10},border:{display:!1},grid:{color:"#99999935"}}},plugins:{legend:{display:!1},title:{display:!1,text:"Chart.js Line Chart"}}};new Date().getMonth();const G=Cs(),Me=R?{labels:[new Date(D.startDate).toDateString(),new Date(D.endDate).toDateString()],datasets:[{data:R.reduce((s,a,l)=>{console.log("here",a);const c=a.transactionType==="CREDIT"?parseFloat(a.amount):-parseFloat(a.amount),t=((s==null?void 0:s.length)===0?0:s[(s==null?void 0:s.length)-1])+c;return s.push(t),s},[]),fill:!1,label:(Y=(X=(H=R[0])==null?void 0:H.rewardRegistry)==null?void 0:X.reward)==null?void 0:Y.rewardName,borderColor:`#${((K=(q=(Q=R[0])==null?void 0:Q.rewardRegistry.reward)==null?void 0:q.brand)==null?void 0:K.color)||G}`,backgroundColor:`#${((Z=(J=(U=R[0])==null?void 0:U.rewardRegistry.reward)==null?void 0:J.brand)==null?void 0:Z.color)||G}`,borderWidth:2}]}:{labels:[],datasets:[]};let b=De(O)[r.brandId]||[];return console.log("test",b),e.jsxs(o,{flexDir:"column",children:[e.jsx(d.Suspense,{fallback:e.jsx(w,{size:"sm"}),children:e.jsx(Ts,{})}),e.jsx(es,{children:e.jsxs(v,{...p,children:[e.jsx(d.Suspense,{fallback:e.jsx(w,{size:"sm"}),children:e.jsx(As,{breadcrumbs:[{name:"Home",link:`${S}/dashboard`},{name:"Assets",link:`${S}/dashboard/dashboard-my-assets`},{name:(se=(ee=x==null?void 0:x.data)==null?void 0:ee.name)==null?void 0:se.replaceAll("_"," "),link:`${S}/dashboard/dashboard-my-assets/${y}`,isCurrentPage:!0}]})}),e.jsxs(o,{...Le,children:[e.jsxs(o,{flexDir:"column",children:[e.jsxs(n,{...j,children:["Learn more about your personalized ",r.rewardName," card"]}),e.jsx(f,{}),e.jsx(n,{...C,mb:"10px",children:(ae=(re=r==null?void 0:r.reward)==null?void 0:re.brand)==null?void 0:ae.description}),e.jsx(N,{children:e.jsx(L,{as:"button",...M,onClick:()=>{var s,a,l,c,h,t;return i(`${S}/dashboard/shop/${(s=x==null?void 0:x.data)==null?void 0:s.id}`,{state:{id:(l=(a=r==null?void 0:r.reward)==null?void 0:a.brand)==null?void 0:l.id,slug:(h=(c=r==null?void 0:r.reward)==null?void 0:c.brand)==null?void 0:h.slug,brandName:(t=r==null?void 0:r.reward)==null?void 0:t.brandName}})},children:e.jsx(n,{...j,children:"Learn more"})})})]}),e.jsx(f,{}),e.jsx(L,{style:{transform:"rotate(-35deg) translateX(60px) translateY(40px)"},children:e.jsx(hs,{logo:((ne=r==null?void 0:r.brand)==null?void 0:ne.white_logo)||((te=r==null?void 0:r.brand)==null?void 0:te.logo),bg:(le=(oe=r==null?void 0:r.reward)==null?void 0:oe.brand)!=null&&le.color?`#${(ie=(de=r==null?void 0:r.reward)==null?void 0:de.brand)==null?void 0:ie.color}`:"#363636",userName:`${(ce=m==null?void 0:m.customer)==null?void 0:ce.name}`})})]}),e.jsxs(o,{...ke,flexDir:"column",children:[e.jsxs(N,{h:"50px",w:"100%",children:[e.jsx(L,{borderColor:`#${(he=(xe=r==null?void 0:r.reward)==null?void 0:xe.brand)==null?void 0:he.color}`,borderWidth:"2px",p:"3px",borderRadius:50,children:e.jsx(ss,{as:"img",objectFit:"contain",src:((pe=r==null?void 0:r.brand)==null?void 0:pe.white_logo)||((be=r==null?void 0:r.brand)==null?void 0:be.logo),w:"50px",h:"50px",borderRadius:"70px"})}),e.jsx(n,{color:"white",fontSize:"18px",children:(ge=r==null?void 0:r.reward)==null?void 0:ge.rewardName}),e.jsx(f,{})]}),e.jsxs(N,{h:"50px",w:"100%",mt:"20px",children:[e.jsxs(v,{children:[e.jsxs(n,{fontSize:["14px","14px","14px","18px","16px"],color:"white",children:[(ue=(me=Ae.filter(s=>{var a;return((a=s==null?void 0:s.brand)==null?void 0:a.id)===y}))==null?void 0:me.map(s=>{var a;return Number((a=s==null?void 0:s.balance)==null?void 0:a.balance)}))==null?void 0:ue.reduce((s,a)=>s+a,0).toLocaleString()," ","pts"]}),e.jsx(n,{fontSize:"14px",color:"#999999C5",children:"Balance"})]}),e.jsx(f,{})]}),e.jsx(f,{}),e.jsxs(o,{bg:"#262626",borderRadius:"8px",h:"70%",w:"100%",p:"1%",alignSelf:"flex-end",flexDir:"column",children:[e.jsxs(o,{w:"100%",h:"3vw",align:"center",children:[e.jsx(n,{color:"white",children:Ie?"Percentage allocation":"Historic Progress"}),e.jsx(f,{}),e.jsx(o,{children:e.jsx(Rs,{color:"white",onChange:s=>{Oe(s.target.value)},value:D.dateRangeString,variant:"unstyled",placeholder:"Select range",size:"sm",children:["Last 30 days","Last 7 days","Last 3 days"].map(s=>e.jsx("option",{value:s,children:s},k()))})})]}),e.jsx(o,{alignItems:"flex-end",justifyContent:"flex-end",h:"90%",w:"100%",children:e.jsx(Ss,{width:1180,height:250,options:$e,data:Me})})]})]}),e.jsxs(o,{w:"100%",pt:"40px",children:[e.jsx(n,{...B,children:"Last transactions"}),e.jsx(f,{}),e.jsx(d.Suspense,{fallback:e.jsx(w,{size:"sm"}),children:e.jsx(rs,{label:"Sort",children:[1,2,3,4,5].map(s=>d.createElement(as,{as:"button",...j,key:k()},e.jsx(n,{textAlign:"left",children:s})))})})]}),e.jsxs(o,{flexDir:"column",children:[b&&(b==null?void 0:b.length)===0&&e.jsxs(v,{...p,align:"center",children:[e.jsx(_e,{animationData:xs,style:{height:300}}),e.jsx(n,{pt:"3%",fontSize:"18px",fontWeight:"600",children:"You currently have no transactions"})]}),b&&(b==null?void 0:b.length)>0&&e.jsx(ve,{variant:"simple",children:e.jsx(vs,{children:b.map(s=>{var a,l;return e.jsxs(Ds,{children:[e.jsx(_,{w:"10%",children:e.jsxs(o,{flexDir:"column",children:[e.jsx(n,{children:A(s==null?void 0:s.updatedAt).format("MMM DD")}),e.jsx(n,{children:A(s==null?void 0:s.updatedAt).format("hh:ss a")}),e.jsx(n,{...C})]})}),e.jsx(_,{width:"5%",children:e.jsx(o,{borderRadius:"md",bg:"black",w:10,h:10,justifyContent:"center",alignItems:"center",transform:(s==null?void 0:s.transactionType)==="CREDIT"?"rotate(180deg)":"rotate(360deg)",children:e.jsx(ns,{src:Ls})})}),e.jsx(_,{w:"20%",children:e.jsxs(o,{flexDir:"column",alignItems:"flex-start",children:[e.jsxs(n,{children:[(s==null?void 0:s.transactionType)==="CREDIT"?"Received":"Spent"," ",r==null?void 0:r.rewardSymbol]}),e.jsx(n,{...C,children:"Completed"})]})}),e.jsx(_,{w:"12%",children:e.jsxs(v,{w:"98%",alignItems:"flex-start",children:[e.jsx(n,{alignSelf:"flex-end",color:"#999999",textAlign:"right",children:"From"}),e.jsx(n,{children:(l=(a=s==null?void 0:s.rewardRegistry)==null?void 0:a.reward)==null?void 0:l.contractAddress})]})}),e.jsx(_,{children:e.jsx(o,{flexDir:"column",children:e.jsxs(n,{...z,textAlign:"right",textColor:(s==null?void 0:s.transactionType)==="CREDIT"?"green":"red",children:[(s==null?void 0:s.transactionType)==="CREDIT"?parseFloat(s==null?void 0:s.amount):parseFloat(s==null?void 0:s.amount)*-1,r==null?void 0:r.rewardSymbol]})})})]},k())})})})]}),e.jsxs(o,{w:"100%",pt:"40px",children:[e.jsxs(n,{...B,children:["Offer from ",(je=x==null?void 0:x.data)==null?void 0:je.name]}),e.jsx(f,{}),e.jsx(d.Suspense,{fallback:e.jsx(w,{size:"sm"}),children:e.jsx(o,{children:e.jsx(L,{as:"button",...M,onClick:()=>{var s,a,l,c,h,t;return i(`${S}/dashboard/shop/${(s=x==null?void 0:x.data)==null?void 0:s.id}`,{state:{id:(l=(a=r==null?void 0:r.reward)==null?void 0:a.brand)==null?void 0:l.id,slug:(h=(c=r==null?void 0:r.reward)==null?void 0:c.brand)==null?void 0:h.slug,brandName:(t=r==null?void 0:r.reward)==null?void 0:t.brandName}})},children:e.jsx(n,{...j,children:"Visit shop"})})})})]}),e.jsx(ts,{columns:[2,2,3,4,4],spacingX:"3.5%",w:"100%",children:e.jsxs(d.Suspense,{fallback:e.jsx(w,{size:"sm"}),children:[((fe=u==null?void 0:u.data)==null?void 0:fe.offers)&&((we=(ye=u==null?void 0:u.data)==null?void 0:ye.offers)==null?void 0:we.length)<1&&e.jsxs(os,{children:[e.jsx(o,{w:"500px",h:"300px",children:e.jsx(_e,{animationData:ls,loop:!0,autoplay:!0,width:50,height:70})}),e.jsxs(n,{children:["You have not synced any reward,"," ",e.jsx(n,{as:"button",onClick:Ne,decoration:"underline",children:"sync now"})]})]}),(Ce=(Se=u==null?void 0:u.data)==null?void 0:Se.offers)==null?void 0:Ce.map((s,a)=>{var l,c,h;return e.jsx(Es,{isLoaded:!0,productTitle:s.name,points:`${s==null?void 0:s.tokens}${(l=s.reward)==null?void 0:l.rewardSymbol}`,productSubtitle:(h=(c=s.product)==null?void 0:c.category)==null?void 0:h.name,price:s.originalPrice.toLocaleString(),isNew:A(A()).diff(s==null?void 0:s.createdAt,"days")<1,rest:{...s},i:a,bgImage:s.offerImages,onClick:()=>i(`${S}/productDetails/${s==null?void 0:s.offerCode}`)},k())})]})})]})}),e.jsx(d.Suspense,{fallback:e.jsx(w,{size:"sm"}),children:e.jsx(ks,{})})]})},Is=()=>({root:{w:"100%",mt:"108px",pt:"3%",overflow:"hidden",pb:"3%"},root2:{bg:"#F2F2F2",h:"174px",w:"100%",borderRadius:"16px",p:"2%",overflow:"hidden"},nameStyles:{fontSize:["20px","20px"]},search:{w:"18%",h:"40px",background:"#F6F6F6",borderRadius:"53px",justify:"flex-start",align:"center",pl:"1%"},button:{w:{base:"18%",md:"6%"},color:"dark",borderWidth:.5,backgroundColor:"light",fontSize:"15px"},loadMore:{w:"132px",h:"32px",alignSelf:"center",py:"10px",borderRadius:"100px"},font:{fontSize:"16px",lineHeight:"22px",color:"#000000",marginBottom:"5px"},smallButton:{w:"95px",h:"42px",bg:"#000000",borderRadius:"100px"},smallButton1:{w:"124px",h:"42px",p:"10px 16px",border:"1px",borderColor:"#000000",borderRadius:"100px",color:"#000000"},font1:{fontSize:"14px",lineHeight:"17px",color:"#999999"},font2:{fontSize:"18px",lineHeight:"22px",color:"#FFFFFF"},font3:{fontSize:"16px",lineHeight:"22px",color:"#E71C1C"},graphBox:{bg:"dark",w:"100%",h:"35vw",borderRadius:"16px",p:"20px"}});export{Ys as default,Is as useDashboardAssetsSingleBrand};
