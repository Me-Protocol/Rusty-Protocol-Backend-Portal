import{j as e,a1 as q,a2 as K,a3 as Q,c0 as Z,r as s,i as D,T as c,u as V,b as ee,a as N,F as b,n as se,S as y,ah as te,c1 as oe,s as ne,ax as G,G as g,bj as re,W as ae,_ as k,c as ie,bk as le,d as A,O as ce,e as M,m as de,c2 as xe,V as ue,H as pe,L as T,B as he,al as B,l as fe,c3 as ge}from"./index-d1513471.js";import{F as me}from"./formik.esm-d4019cef.js";import{I as je}from"./index.esm-cdcb8747.js";import{P as be,a as Se}from"./chunk-I5V4ORUK-3a25ad6f.js";const we=({children:o,isOpen:r,onClose:t,modalContentStyle:d,modalBodyStyle:i,...l})=>e.jsxs(q,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:r,size:"lg",onClose:t,motionPreset:"slideInBottom",...l,children:[e.jsx(K,{bg:"#00000020",backdropFilter:"auto",backdropBlur:"2px"}),e.jsx(Q,{w:{base:"90vw",md:"60vw"},borderRadius:0,py:"1%",...d,children:e.jsx(Z,{...i,children:o})})]}),ye=({countFrom:o,onCountdownComplete:r})=>{const[t,d]=s.useState(o),[i,l]=s.useState(!0);s.useEffect(()=>{if(i&&t>0){const a=setInterval(()=>{d(t-1)},1e3);return()=>clearInterval(a)}else t===0&&i&&(l(!1),r())},[t,i,r]);const C=a=>{const S=Math.floor(a/60),m=a%60;return`${S.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`},n=()=>{o>0||(d(o),l(!0))};return e.jsxs(D,{as:"button",onClick:n,children:[e.jsx(c,{children:"Resend"}),e.jsxs(c,{opacity:t>0?1:0,children:["(",C(t),")"]})]})},Ce=({isOpen:o,onClose:r,token:t,userId:d})=>{const[i,l]=s.useState(!1),[C,n]=s.useState(!1),[a,S]=s.useState(60),[m,v]=s.useState("");let E=V(),L=ee();const x=N();async function I(u){var h;try{n(!0);const{payload:j,error:R}=await x(oe({userId:d,code:u}));if(R)return v(R.message);if(j){x(ne(j));const{payload:w}=await x(G({token:j}));(h=w==null?void 0:w.customer)!=null&&h.walletAddress?E(`${g}/dashboard`):E(`${g}/syncRewards`),r()}}catch{}finally{n(!1)}}async function z(){try{n(!0);const{payload:u,error:h}=await x(re({token:t}));if(h)return v(h.message);u&&ae(L,"Code resent successfully",9e3,"bottom-left")}catch{}finally{n(!1)}}return e.jsx(we,{isOpen:o,onClose:r,closeOnOverlayClick:!1,modalContentStyle:{borderRadius:"10px"},children:e.jsxs(b,{flexDir:"column",py:"5px",children:[e.jsx(b,{alignSelf:"flex-end",as:"button",onClick:r,mb:"20px",children:e.jsx(je,{size:20})}),e.jsx(c,{fontSize:"14px",mb:"10px",children:"Please provide the OTP sent to your Email"}),e.jsx(D,{w:"100%",h:"80px",children:e.jsx(be,{onComplete:u=>{v(""),I(u)},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(Se,{bg:"grey",borderRadius:10,borderWidth:0,w:"30%",h:"100%"},se()))})}),m&&e.jsx(c,{color:"red",children:m}),C&&e.jsx(y,{size:"sm",alignSelf:"flex-end",mt:"10px"}),e.jsxs(D,{fontSize:"14px",mt:"25px",children:[e.jsx(c,{children:"Did not receive OTP?"}),e.jsx(te,{opacity:i?1:.5,onClick:()=>{i&&(z(),S(a+1),l(!1))},children:e.jsx(ye,{countFrom:a,onCountdownComplete:()=>{l(!0)}})})]})]})})},ve=s.lazy(()=>k(()=>import("./index-475e86e8.js"),["assets/index-475e86e8.js","assets/index-d1513471.js","assets/index-ed5220eb.css"])),Ee=s.lazy(()=>k(()=>import("./index-d1513471.js").then(o=>o.c$),["assets/index-d1513471.js","assets/index-ed5220eb.css"])),_e=s.lazy(()=>k(()=>import("./index-78b061fc.js"),["assets/index-78b061fc.js","assets/index-d1513471.js","assets/index-ed5220eb.css"])),$=s.lazy(()=>k(()=>import("./index-a7cc1470.js"),["assets/index-a7cc1470.js","assets/index-d1513471.js","assets/index-ed5220eb.css","assets/formik.esm-d4019cef.js"])),ke=()=>{ie();let o=V();const r=le(),t=N(),[d,i]=s.useState(!1),{isLoading:l,error:C,token:n}=A(f=>f.authReducer);A(f=>f.userReducer);const[a,S]=s.useState(" "),[m,v]=s.useState(""),[E,L]=s.useState(""),[x,I]=s.useState(!1),{isOpen:z,onClose:u,onOpen:h}=ce(),{root:j,boxLeft:R,boxLogin:w,leftImg:Ie,loginColumn:H,head:U,desc:O,basedText:W}=Le();s.useEffect(()=>{if(t(M()),n){if(n!=null&&n.userId)return;t(M()),o(`${g}/dashboard`)}},[t,n,o]);const J=async({email:f,password:Y},ze)=>{var F;if(!r)return;const{payload:p,error:_}=await t(ge({identifier:f,password:Y}));if(_)return S(_==null?void 0:_.message);if(p!=null&&p.userId){L(p==null?void 0:p.userId),h();return}if(p){const{payload:P}=await t(G({token:p}));(F=P==null?void 0:P.customer)!=null&&F.walletAddress?o(`${g}/dashboard`):o(`${g}/syncRewards`)}},X=()=>I(!x);return e.jsx(e.Fragment,{children:e.jsxs(de,{children:[e.jsx(s.Suspense,{fallback:e.jsx(y,{size:"sm"}),children:e.jsx(ve,{pos:"fixed"})}),e.jsx(b,{...j,children:e.jsx(b,{...w,children:e.jsx(me,{initialValues:{email:"",password:""},validationSchema:xe,onSubmit:J,children:f=>e.jsxs(ue,{as:"form",...H,onSubmit:f.handleSubmit,onChange:()=>t(M()),children:[e.jsx(pe,{...U,pb:2,children:"Let’s Login"}),e.jsx(b,{w:"100%",justify:"space-between",children:e.jsx(s.Suspense,{fallback:e.jsx(y,{size:"sm"}),children:e.jsx(T,{href:`${he}/user/google`,w:"full",children:e.jsx(Ee,{isLoading:d,name:"Sign in with Google",onClick:()=>{},rest:{w:"100%"}})})})}),e.jsxs(b,{align:"center",w:"100%",justify:"space-between",children:[e.jsx(B,{w:"45%",color:"#ECECEC"}),e.jsx(c,{color:"#999999",fontSize:{base:"12px",md:"20px"},children:"or"}),e.jsx(B,{w:"45%",color:"#ECECEC"})]}),e.jsxs(s.Suspense,{fallback:e.jsx(y,{size:"sm"}),children:[e.jsx($,{name:"email",type:"email",placeholder:"your@email.com"}),e.jsx($,{name:"password",type:x?"text":"password",placeholder:"Password"})]}),e.jsx(c,{as:fe,onClick:X,alignSelf:"flex-end",...W,bg:"transparent",_hover:{bg:"transparent"},p:"0px",fontSize:"14px",children:x?"Hide":"Show"}),a&&e.jsx(c,{...O,color:"red",children:a}),e.jsx(T,{onClick:()=>o(`${g}/password_reset`),...O,pb:3,textDecoration:"underline",w:"30%",children:"Forgot Password"}),e.jsx(s.Suspense,{fallback:e.jsx(y,{size:"sm"}),children:e.jsx(_e,{isLoading:l,name:"Login"})}),e.jsxs(c,{...O,pt:"10px",children:["Don’t have an account yet?",e.jsxs(T,{onClick:()=>{o(`${g}/register`)},textDecoration:"underline",children:[" ","Create one here."]})]})]})})})}),e.jsx(Ce,{isOpen:z,onClose:u,token:m,userId:E})]})})},Te=ke,Le=()=>({root:{h:"100vh",align:"center",justify:"center",bg:"light"},boxLeft:{display:["none","none","none","flex","flex"],bg:"light",fontSize:40,h:"100%",w:"40vw"},boxLogin:{fontSize:40,h:"100%",w:["100%","100%","80%","50%","50%"],overflow:"hidden"},boxRegister:{fontSize:40,h:"100vh",w:["100%","100%","80%","80%","70%"],justify:"center"},leftImg:{h:"100%",w:"100%"},loginColumn:{bg:"light",w:"100%",align:"flex-start",pt:{base:"5vh",md:"10vh"},px:{base:"15px"},justifySelf:"center"},registerColumn:{bg:"light",w:["100%","100%","100%","80%","70%"],align:"flex-start",pt:{base:"5vh",md:"10vh"},px:{base:"15px"},justifySelf:"center"},head:{fontSize:{base:"18px",md:"25px"},pt:"20px"},desc:{fontSize:{base:"15px",md:"17px"},w:{base:"100%",md:"85%"}},basedText:{pt:"30px",fontSize:{base:"18px",md:"20px"}},checkBoxRoot:{py:"20px"},countrySelect:{w:{base:"100%",md:"100%"},bg:"grey",color:"dark",borderColor:"light",borderWidth:"1px",align:"center"}});export{Te as L,we as N,ye as a,Le as u};
