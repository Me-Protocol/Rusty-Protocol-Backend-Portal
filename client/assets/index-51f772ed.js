import{aS as He,aT as Qe,j as e,aP as pe,aQ as Xe,r as a,_ as M,a as Ye,b as qe,Z as A,u as Je,d as X,bd as Ze,J as Ke,v as es,w as ss,bh as as,bi as os,aR as rs,S as x,m as ns,h as C,H as d,T as l,C as u,V as xe,F as r,ay as ts,az as ls,ak as v,I as f,f as k,aA as is,G as Y,y as h,al as cs,aI as ds,U as q,bj as ps,am as _,a$ as xs,b0 as us,b1 as hs,b2 as ms,b3 as js,O as bs,N as fs,a5 as gs,bk as J,b4 as ws,bl as ys,i as Ss,bm as Cs,a1 as ue,bn as vs}from"./index-3e391fce.js";import{useInputStyles as ks}from"./index-8c087915.js";import{P as _s}from"./chunk-RLMGYZLY-e6bf23b4.js";import{S as he}from"./chunk-3RSXBRAN-da3978f4.js";import{P as Ps,a as Os}from"./chunk-I5V4ORUK-f9cbc862.js";import"./formik.esm-88e71906.js";var Z=(t,i)=>i?`${t}.${i}, ${i}`:void 0;function je(t){var i;const{bg:P,bgColor:D,backgroundColor:O,shadow:R,boxShadow:N,shadowColor:j}=t,{getArrowProps:E,getArrowInnerProps:I}=He(),V=Qe(),T=(i=P??D)!=null?i:O,g=R??N;return e.jsx(pe.div,{...E(),className:"chakra-popover__arrow-positioner",children:e.jsx(pe.div,{className:Xe("chakra-popover__arrow",t.className),...I(t),__css:{"--popper-arrow-shadow-color":Z("colors",j),"--popper-arrow-bg":Z("colors",T),"--popper-arrow-shadow":Z("shadows",g),...V.arrow}})})}je.displayName="PopoverArrow";const m=a.lazy(()=>M(()=>import("./index-3e391fce.js").then(t=>t.cS),["assets/index-3e391fce.js","assets/index-ed5220eb.css"])),Rs=a.lazy(()=>M(()=>import("./index-1d0bdc75.js"),["assets/index-1d0bdc75.js","assets/index-3e391fce.js","assets/index-ed5220eb.css"])),me=a.lazy(()=>M(()=>import("./index-3e391fce.js").then(t=>t.cT),["assets/index-3e391fce.js","assets/index-ed5220eb.css"])),Es=a.lazy(()=>M(()=>import("./index-08b1e201.js"),["assets/index-08b1e201.js","assets/index-3e391fce.js","assets/index-ed5220eb.css","assets/chunk-7ELO524Q-d3018fab.js"])),Is=()=>{var ie,ce,de;const t=Ye(),i=qe();A();const{isOpen:P,onOpen:D,onClose:O}=A(),{isOpen:R,onOpen:N,onClose:j}=A();A();let E=Je();const I=a.useRef(null),V=a.useRef(null),{token:T}=X(s=>s.authReducer);Ze();const{my_rewards:g,my_rewards_loading:Ls}=X(s=>s==null?void 0:s.userReducer),{data:n,isLoading:zs}=Ke({page:1,limit:8},{refetchOnFocus:!0});es({page:1,limit:8,type:ss.PRODUCT},{refetchOnMountOrArgChange:300});const{user_data:$}=X(s=>s==null?void 0:s.userReducer),{styles:be}=ks(),[fe]=as(),[ge]=os();rs();const[we,B]=a.useState(0),[K,ee]=a.useState(!1),[ye,Se]=a.useState(""),[Ce,se]=a.useState(""),[ae,L]=a.useState(""),[ve,oe]=a.useState(!1),[re,z]=a.useState(!1),[w,ne]=a.useState(""),[ke,_e]=a.useState(""),[Pe,Oe]=a.useState(""),[o,Re]=a.useState({}),[Ee,Ie]=a.useState(""),[U,W]=a.useState(""),{root:Be,head:y,desc:c,rewardBox:Le,smallerDesc:ze,connectButton:Fe,search:b,Box1:Ae,center1:Me,pintf1:De}=Bs();a.useEffect(()=>{},[]),a.useEffect(()=>{var s,p;H((s=n==null?void 0:n.data)==null?void 0:s.brands),Ne((p=n==null?void 0:n.data)==null?void 0:p.brands)},[(ie=n==null?void 0:n.data)==null?void 0:ie.brands]);const[G,H]=a.useState([]),[te,Ne]=a.useState([]),[Ve,le]=a.useState("");function Te(s){if(s){const p=te.filter(S=>{const F=S.rewardName?S.rewardName.toUpperCase():"".toUpperCase(),Ge=s.toUpperCase();return F.indexOf(Ge)>-1});H(p),le(s)}else H(te),le(s)}async function $e(){w.includes("@")&&(oe(!0),await ge({rewardId:o.id,emailCode:Ce}).then(s=>{var p,S,F;if(s.error){L((S=(p=s==null?void 0:s.error)==null?void 0:p.data)==null?void 0:S.error);return}(F=s==null?void 0:s.data)!=null&&F.synced&&(ue(i,"Brand connected successfully"),setTimeout(()=>{t(vs({token:T})),se(""),ne(""),z(!1),B(2)},300))}).catch(s=>{console.log(s,"SendEmailVerificationForSyncERR")}).finally(()=>{oe(!1)}))}async function Ue(){w.includes("@")&&(ee(!0),await fe({rewardId:o.id,email:w}).then(s=>{s!=null&&s.data&&(z(!0),ue(i,"OTP sent successfully"))}).catch(s=>{console.log(s,"ERR")}).finally(()=>{ee(!1)}))}const We=()=>{switch(we){case 0:return e.jsxs(C,{children:[e.jsxs(r,{flexDir:"row",justify:"space-between",children:[e.jsxs(d,{...y,children:["Sync ",o==null?void 0:o.name," Rewards"]}),e.jsx(u,{as:"button",onClick:j,children:e.jsx(f,{w:"30px",h:"30px",src:k.cancel_icon})})]}),e.jsxs(r,{flexDir:"row",align:"center",justify:"space-between",py:"2%",children:[e.jsxs(u,{w:"100px",h:"100px",overflow:"hidden",children:[e.jsx(f,{borderRadius:"10px",objectFit:"contain",src:o==null?void 0:o.rewardImage}),e.jsx(v,{...Ae,pos:"absolute"})]}),e.jsx(l,{...c,noOfLines:4,w:"100%",pl:"3%",children:o==null?void 0:o.description})]}),e.jsx(d,{...y,children:"What you’ll get"}),e.jsx(r,{flexDir:"column",bg:"#f6f6f6",p:"5%",borderRadius:"15px",children:[`Authorize Me app to access your reward balance with ${o==null?void 0:o.brandName}`,`Me app will Read reward balance from ${o==null?void 0:o.brandName}`,"Me app will monitor changes in reward balance "].map(s=>e.jsxs(r,{children:[e.jsx(u,{...Me,children:e.jsx(q,{as:Cs,color:"light"})}),e.jsx(l,{...c,noOfLines:2,pl:"2%",w:"100%",children:s})]},h()))}),e.jsx(m,{isLoading:K,onClick:()=>B(1),name:`Connect with ${(o==null?void 0:o.rewardName)||"reward"}`})]});case 1:return e.jsxs(C,{children:[e.jsxs(r,{flexDir:"row",justify:"space-between",children:[e.jsx(d,{...y,children:"Verify identity "}),e.jsx(u,{as:"button",onClick:()=>{B(0),j(),W(""),z(!1),L("")},children:e.jsx(f,{src:k.cancel_icon,w:"30px",h:"30px"})})]}),e.jsx(l,{...c,w:"100%",pt:"1%",children:"Please select your preferred means of identification from the available options below"}),e.jsx(r,{...b,children:e.jsx(J,{my:"5px",children:e.jsx(he,{color:"dark",onChange:({target:s})=>{W(s.value)},value:U,variant:"unstyled",placeholder:"Select verification option",size:"md",_placeholder:{color:"#999999"},children:["Email","Phone number"].map(s=>e.jsx("option",{value:s,children:s},h()))})})}),U&&e.jsx(C,{children:U==="Email"?e.jsx(_,{...b,value:w,onChange:s=>{ne(s.target.value)},placeholder:"Enter email address"}):e.jsx(_,{...b,value:ke,onChange:s=>{_e(s.target.value)},placeholder:"Enter phone number"})}),re&&e.jsxs(v,{my:"3%",children:[e.jsx(l,{fontSize:"10px",children:"Please provide the OTP sent to your inbox"}),e.jsx(Ss,{w:"100%",h:"60px",children:e.jsx(Ps,{onComplete:s=>{se(s),L("")},otp:!0,placeholder:"*",children:[1,2,3,4,5,6].map(()=>e.jsx(Os,{...De},h()))})})]}),ae&&e.jsx(l,{...c,color:"red",children:ae}),e.jsx(m,{isLoading:ve||K,onClick:()=>{if(re){$e();return}Ue()},isDisabled:!w.includes("@"),name:"Continue"})]});case 2:return e.jsx(C,{w:"100%",children:e.jsxs(xe,{children:[e.jsx(ws,{style:{width:"150px",height:"150px"},animationData:ys,loop:!1,autoplay:!0}),e.jsx(d,{fontSize:"18px",pb:"10px",children:"Brand connected successfully"}),e.jsx(m,{name:"Ok",onClick:()=>{B(0),j(),W(""),z(!1),L(""),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}})]})})}},Q=[{id:"1",name:"All"},{id:"2",name:"Fashion"},{id:"3",name:"Beauty"},{id:"4",name:"Home"},{id:"5",name:"Travel"},{id:"6",name:"Sports & outdoor"},{id:"7",name:"Health & nutrition"},{id:"8",name:"Family & baby"}];return e.jsx(e.Fragment,{children:e.jsxs(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:[e.jsx(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:e.jsx(Rs,{pos:"relative"})}),e.jsx(ns,{children:e.jsxs(C,{...Be,w:"100%",children:[e.jsx(d,{...y,children:"Sync rewards from the brands you love"}),e.jsx(l,{...c,children:"Connect your favorite brands to import rewards and get exclusive deals."}),e.jsx(d,{...c,pt:"30px",children:"Connected brands"}),e.jsxs(u,{as:xe,...Le,children:[e.jsxs(r,{w:{base:"90%",md:"65%"},flexDir:"column",align:"center",children:[e.jsx(l,{...c,w:"40%",textAlign:"center",children:(g==null?void 0:g.length)<=0?"You haven’t connected any brand, yet. Add the brands below":"Add more brands below "}),e.jsxs(ts,{placement:"right-end",children:[e.jsx(ls,{children:e.jsx(v,{as:"button",children:e.jsx(f,{src:k.noticeIcon,w:{base:5,md:5},h:{base:5,md:5}})})}),e.jsxs(is,{borderRadius:20,borderColor:"grey",children:[e.jsx(je,{}),e.jsx(_s,{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla mattis, est eu tempor accumsan, lorem nulla auctor ex, a consectetur nisi mi nec justo. Cras eu nunc et dui suscipit venenatis."})]})]})]}),e.jsx(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:e.jsx(m,{isDisabled:!((ce=$==null?void 0:$.customer)!=null&&ce.walletAddress),rest:{w:{base:"90%",md:"50%"}},name:"Next",onClick:()=>E(`${Y}/dashboard`)})}),e.jsx(r,{w:{base:"90%",md:"50%"},justifyContent:"center",onClick:()=>E(`${Y}/dashboard`),color:"placeholderColor",_hover:{color:"dark"},children:e.jsx(l,{as:"button",fontSize:{base:"14px",md:"16px"},children:"Do it later"})})]}),e.jsxs(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:[e.jsx(e.Fragment,{}),e.jsx(Es,{shopArray:(de=n==null?void 0:n.data)==null?void 0:de.brands,plusButtonVisible:!0,preLink:`${Y}/dashboard/shop/`},h())]}),e.jsxs(r,{w:"100%",pt:"3%",justify:"space-between",align:"center",children:[e.jsx(d,{...c,children:"Search for all brands"}),e.jsx(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:e.jsx(m,{name:"Suggest Brand",rest:{w:{base:"35%",md:"20%"},color:"dark",borderWidth:1,backgroundColor:"light"},onClick:D})})]}),e.jsx(r,{pt:"20px",children:e.jsx(r,{...be,children:e.jsxs(cs,{_focus:{boxShadow:"none"},as:"button",children:[e.jsx(ds,{pointerEvents:"none",children:e.jsx(q,{as:ps,color:"placeholderColor",w:"25px",h:"25px"})}),e.jsx(_,{borderWidth:"0px",placeholder:"Search offers, brands or styles...",value:Ve,onChange:({target:s})=>{Te(s.value)}})]})})}),e.jsxs(xs,{isLazy:!0,isManual:!0,w:"100%",pt:"50px",pb:"10px",children:[e.jsx(us,{children:Q==null?void 0:Q.map(s=>a.createElement(hs,{...ze,w:"100%",key:h(),_selected:{color:"black",borderColor:"black"},color:"#999999"},e.jsx(l,{noOfLines:1,children:s.name})))}),e.jsx(ms,{children:e.jsx(js,{p:"0px"})})]}),e.jsx(r,{alignSelf:"center",children:e.jsx(bs,{columns:3,w:"100%",spacingX:["30px","30px","30px","30px","30px"],spacingY:"40px",children:G==null?void 0:G.map(s=>e.jsxs(v,{role:"group",children:[e.jsx(fs,{isLoaded:!0,mr:"20px",overflow:"hidden",w:["120px","200px","280px","320px","400px"],h:["100px","180px","180px","180px","200px"],onClick:()=>{N(),Re({...s})},children:e.jsxs(u,{w:["120px","200px","280px","320px","400px"],h:["100px","180px","180px","180px","200px"],bg:"#0000003D",borderRadius:{base:"10px",md:"16px"},pos:"absolute",background:`url(${s!=null&&s.banners?s==null?void 0:s.banners[1]:""}) center/cover no-repeat`,backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"multiply",as:"button",overflow:"hidden",children:[(s==null?void 0:s.white_logo)&&e.jsx(f,{w:"130px",h:"130px",position:"relative",borderRadius:"5px",src:s==null?void 0:s.white_logo,objectFit:"contain",fallbackSrc:k.appLogoPlaceholder,fallbackStrategy:"onError"}),e.jsx(v,{display:"none",_groupHover:{display:"flex"},pos:"absolute",children:e.jsx(m,{icon:e.jsx(q,{as:gs,color:"dark",w:"30px",h:"30px"}),name:"Connect",rest:Fe})})]})}),e.jsx(l,{w:["120px","200px","280px","320px","400px"],noOfLines:1,mt:"12px",color:"dark",fontSize:["10px","10px","12px","12px","14px"],children:s==null?void 0:s.brandName})]},h()))})})]})}),e.jsxs(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:[e.jsxs(me,{isOpen:P,onClose:O,initialFocusRef:I,finalFocusRef:V,children:[e.jsxs(r,{flexDir:"row",justify:"space-between",children:[e.jsx(d,{...y,children:"Suggest new brand"}),e.jsx(u,{as:"button",onClick:O,children:e.jsx(f,{src:k.cancel_icon,w:"30px",h:"30px"})})]}),e.jsx(l,{...c,w:"100%",pt:"1%",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla mattis, est eu tempor accumsan, lorem nulla auctor ex, a consectetur nisi mi nec justo. Cras eu nunc et dui suscipit venenatis. Phasellus posuere lacus commodo enim aliquam commodo. In ac sodales lorem."}),e.jsx(J,{children:e.jsx(_,{...b,ref:I,value:ye,onChange:s=>{Se(s.target.value)},placeholder:"Brand Name"})}),e.jsx(J,{my:"5px",children:e.jsx(_,{...b,value:Pe,onChange:s=>{Oe(s.target.value)},placeholder:"https://my-brand.xyz"})}),e.jsx(r,{...b,children:e.jsx(he,{color:"dark",onChange:s=>{Ie(s.target.value)},value:Ee,variant:"unstyled",placeholder:"Select category",size:"md",_placeholder:{color:"#999999"},children:["Clothings","Airline","Food and beverages","Sport"].map(s=>e.jsx("option",{value:s,children:s},h()))})}),e.jsx(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:e.jsx(m,{name:"Submit brand",onClick:()=>{},rest:{my:"5px"}})})]}),e.jsx(me,{isOpen:R,onClose:j,closeOnOverlayClick:!1,children:We()})]})]})})},Ts=Is,Bs=()=>({root:{w:"100%",pt:"3%",overflow:"hidden"},head:{fontSize:{base:"18px",md:"20px"}},desc:{pb:"5px",fontSize:{base:"12px",md:"14px"},w:{base:"100%",md:"80%"}},smallerDesc:{fontSize:{base:"10px",md:"14px"}},rewardBox:{w:"100%",bg:"grey",borderRadius:10,borderWidth:1,borderColor:"placeholderColor",borderStyle:"dashed",py:"2%"},connectButton:{w:{base:"65%",md:"90%"},color:"dark",borderWidth:0,backgroundColor:"light",alignSelf:"center",justifySelf:"center"},connectedButton:{w:{base:"65%",md:"35%"},color:"light",borderWidth:1,backgroundColor:"transparent"},search:{w:"100%",h:"40px",background:"#F6F6F6",borderRadius:"53px",justify:"flex-start",align:"center",pl:"2%",borderWidth:"0px",_placeholder:{color:"#999999"},_focus:{borderColor:"black"}},Box1:{w:"100px",h:"100px",borderRadius:"100px",bg:"#9999992D"},center1:{bg:"#000000",w:"20px",h:"20px",borderRadius:"20px"},pintf1:{bg:"grey",borderRadius:10,borderWidth:0,w:"15%",h:"100%"}});export{Ts as default};
