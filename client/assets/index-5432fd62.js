import{bH as E,bG as H,cA as ts,j as e,bI as K,bJ as ns,bE as rs,r as o,F as i,T as n,C as I,S as b,_ as as,u as is,b as ls,a as cs,N as je,d as we,as as ds,cB as ps,cC as xs,cD as us,cE as hs,U as v,aw as X,n as z,ak as R,h as Re,a0 as fs,a2 as Ce,a3 as ve,a4 as ke,cF as gs,i as k,H as bs,X as Pe,ah as ms,ai as q,L as ys,l as Ie,c3 as Ss,g as js,bt as ws,bs as Cs,W as vs,m as ks}from"./index-847fbe21.js";import{M as Ps}from"./MyProfile-a37f3093.js";import{I as Is}from"./index.esm-ab33940f.js";import{u as Os}from"./chunk-7D6N5TE5-470c0422.js";import{c as _s}from"./countries-020c4914.js";import{C as P}from"./index-48807620.js";import{C as Fs}from"./index-62602faf.js";import{P as Oe,a as _e}from"./chunk-I5V4ORUK-19210f31.js";var Rs={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},Es=E("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),Z=H(function(a,p){var l;const{placement:u="left",...x}=a,h=(l=Rs[u])!=null?l:{},d=ts();return e.jsx(Es,{ref:p,...x,__css:{...d.addon,...h}})});Z.displayName="InputAddon";var ee=H(function(a,p){return e.jsx(Z,{ref:p,placement:"left",...a,className:K("chakra-input__left-addon",a.className)})});ee.displayName="InputLeftAddon";ee.id="InputLeftAddon";var Ee=H(function(a,p){return e.jsx(Z,{ref:p,placement:"right",...a,className:K("chakra-input__right-addon",a.className)})});Ee.displayName="InputRightAddon";Ee.id="InputRightAddon";var ze=H(function(a,p){const l=ns("Switch",a),{spacing:u="0.5rem",children:x,...h}=rs(a),{getIndicatorProps:d,getInputProps:f,getCheckboxProps:g,getRootProps:M,getLabelProps:m}=Os(h),N=o.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...l.container}),[l.container]),y=o.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...l.track}),[l.track]),O=o.useMemo(()=>({userSelect:"none",marginStart:u,...l.label}),[u,l.label]);return e.jsxs(E.label,{...M(),className:K("chakra-switch",a.className),__css:N,children:[e.jsx("input",{className:"chakra-switch__input",...f({},p)}),e.jsx(E.span,{...g(),className:"chakra-switch__track",__css:y,children:e.jsx(E.span,{__css:l.thumb,className:"chakra-switch__thumb",...d()})}),x&&e.jsx(E.span,{className:"chakra-switch__label",...m(),__css:O,children:x})]})});ze.displayName="Switch";const Fe=({head:r,body:a,isButton:p,onClick:l,loading:u,onChange:x,value:h,isChecked:d,switchLoading:f})=>{const{root:g,lowerSec:M,subHeadStyle:m,headingStyle:N,bodyStyle:y,button:O}=zs();return e.jsxs(i,{...g,flexDir:"column",children:[e.jsx(n,{...m,children:r}),e.jsxs(i,{...M,flexDir:"row",justify:"space-between",children:[e.jsx(n,{...y,w:"65%",children:a}),p?e.jsx(I,{as:"button",...O,onClick:l,children:u?e.jsx(b,{mx:"18px",my:"2px",size:"sm"}):e.jsx(n,{fontSize:["14px","12px","12px","12px","14px"],children:"Change"})}):e.jsxs(i,{align:"center",children:[f&&e.jsx(b,{size:"xs",color:"dark"}),e.jsx(ze,{sx:{"span.chakra-switch__track:not([data-checked])":{backgroundColor:"gray"},"span.chakra-switch__track":{backgroundColor:"gray.900"}},size:"sm",value:h,onChange:x,pl:"5px",isChecked:d})]})]})]})},zs=()=>({root:{w:"100%",mb:"2%"},lowerSec:{w:"100%",align:"center"},headingStyle:{fontSize:["14px","12px","14px","16px","18px"]},subHeadStyle:{fontSize:["14px","12px","12px","12px","14px"]},bodyStyle:{fontSize:["14px","14px","12px","12px","12px"],color:"#999999"},button:{borderWidth:1,borderColor:"#000000",px:"2%",py:"0.5%",borderRadius:"100px"}}),Ms=r=>r?r.slice(0,6)+"..."+r.slice(-4):"",Ns=o.lazy(()=>as(()=>import("./index-c09721b8.js"),["assets/index-c09721b8.js","assets/index-847fbe21.js","assets/index-00bfa456.css","assets/countries-020c4914.js","assets/chunk-3RSXBRAN-7f392348.js"])),As=()=>{var me,ye,Se;is();let r=ls();const a=cs(),{root:p,headingStyle:l,bodyStyle:u,subHeadStyle:x,manageButton:h,countrySelect:d,root2:f,desc:g,basedText:M}=Ds(),{isOpen:m,onOpen:N,onClose:y}=je(),{isOpen:O,onOpen:Me,onClose:U}=je(),{user_data:c}=we(s=>s.userReducer),{token:S}=we(s=>s.authReducer);ds();const[se,{isLoading:Ne,isSuccess:j,error:A,isError:Ae,reset:De}]=ps(),[Te,{isLoading:Le,isSuccess:oe,error:G,isError:te,reset:Be}]=xs(),[ne]=us(),[We,He]=o.useState("Switzerland"),[w,$]=o.useState("566"),[C,D]=o.useState(c.phone?`+${c.phone}`:""),[Ue,re]=o.useState(""),[ae,Ge]=o.useState(""),[$e,V]=o.useState(!1),[ie,Bs]=o.useState(c==null?void 0:c.email),[Ve,Ye]=o.useState("");o.useState(!1);const[Je,T]=o.useState(!1),[Ws,L]=o.useState(!1),[Hs,B]=o.useState(!1),[W,Qe]=o.useState(!1),[le,ce]=o.useState(!1),[de,pe]=o.useState(!1),[xe,Xe]=o.useState(60),[ue,he]=o.useState(""),[_,fe]=o.useState(""),[F,ge]=o.useState(""),[Y,be]=o.useState(""),qe=()=>Qe(!W),{data:J}=hs(void 0,{refetchOnFocus:!0,skip:!S}),Ke=()=>{js.get("https://ipapi.co/json/").then(s=>{let t=s.data;He(t.country_name),$(t.country_calling_code),D(t.country_calling_code)}).catch(s=>{console.log(s)})};o.useEffect(()=>()=>{},[c]),o.useEffect(()=>{var s;A&&v(r,((s=A==null?void 0:A.data)==null?void 0:s.message)||"Could not send OTP. Please try again later."),j&&v(r,`OTP has been sent to phone number ending in ${C.slice(-4)}`)},[Ae,j]),o.useEffect(()=>{var s;te&&v(r,((s=G==null?void 0:G.data)==null?void 0:s.message)||"Could not send OTP. Please try again later."),oe&&(v(r,"Your phone number has been updated successfully"),a(X({token:S})),y(),D(""),$(""),re(""))},[te,oe]),o.useEffect(()=>{m||(De(),Be())},[m]);async function Ze(){if(!ie.includes("@"))return P(r,"Invalid email address","Please enter a valid email address");try{V(!0);const{payload:s,error:t}=await a(ws({identifier:ie}));if(t)return V(!1),P(r,"Error",t==null?void 0:t.message);s&&(Ye(s==null?void 0:s.userId),Me())}catch(s){console.log(s,"SEND_RESET_CODE_ERR")}finally{V(!1)}}async function es(){try{if(_!==F)return P(r,"Invalid password","Password do not match");if(_.length<8||F.length<8)return P(r,"Invalid password","Password must be at least 8 characters");if(Y.length<4)return P(r,"Invalid otp","Please provide a valid otp code");const{payload:s,error:t}=await a(Cs({code:Y,password:_,confirmPassword:F,userId:Ve}));if(t)return pe(!1),P(r,"Error",t==null?void 0:t.message);s&&(Fs(r,"Password changed successfully",5e3),fe(""),ge(""),be(""),U())}catch(s){console.log(s)}finally{pe(!1)}}o.useEffect(()=>{Ke()},[]);const Q=(ye=((me=_s)==null?void 0:me.map(s=>({id:z(),...s}))).filter(s=>s.name==="234"||s.callingCodes[0]==="234"))==null?void 0:ye[0];async function ss(s){s==="login"?T(!0):s==="deposit"?L(!0):B(!0),await ne({enable:!0}).then(async t=>{console.log(t),S&&a(X({token:S})),(t==null?void 0:t.statusCode)===200&&v(r,"2FA enabled successfully")}).catch(t=>{console.log(t,"UOPIO")}).finally(()=>{T(!1),L(!1),B(!1)})}async function os(s){s==="login"?T(!0):s==="deposit"?L(!0):B(!0),await ne({enable:!1}).then(async({data:t})=>{S&&a(X({token:S})),(t==null?void 0:t.statusCode)===200&&v(r,"2FA disabled successfully")}).catch(t=>{console.log(t,"UOPIO")}).finally(()=>{T(!1),L(!1),B(!1)})}return e.jsxs(i,{...p,flexDir:"column",children:[e.jsx(n,{...l,children:"Security"}),e.jsx(n,{...u,children:"Secure your account by enabling these settings."}),e.jsxs(i,{flexDir:"column",children:[e.jsx(n,{...x,children:"Two factor authentication"}),e.jsx(R,{my:"1%"}),e.jsx(Fe,{head:"Enable at login",body:`If enabled, we will send a temporary 4-digit code to your email ${Ms(c==null?void 0:c.email)} when you login.`,isChecked:c==null?void 0:c.is2faEnabled,switchLoading:Je,onChange:()=>{c!=null&&c.is2faEnabled?os("login"):ss("login")}}),e.jsx(n,{...x,children:"Login"}),e.jsx(R,{my:"1%"}),e.jsx(Fe,{head:"Password",body:"Weâ€™ll send a temporary 4-digit code to reset your password",isButton:!0,loading:$e,onClick:Ze}),e.jsxs(i,{justify:"space-between",align:"flex-end",children:[e.jsxs(Re,{spacing:2,children:[e.jsx(n,{...x,children:"Phone number"}),e.jsx(n,{color:"#999999",fontSize:["14px","14px","12px","12px","12px"],children:"Manage your phone number"})]}),e.jsx(I,{as:"button",...h,onClick:N,children:e.jsx(n,{fontSize:["14px","12px","12px","12px","14px"],children:"Manage"})})]}),e.jsx(R,{my:"1%"})]}),(Se=J==null?void 0:J.phones)==null?void 0:Se.map(s=>e.jsxs(i,{align:"center",children:[e.jsx(fs,{src:Q==null?void 0:Q.flag,size:"xs"}),e.jsx(n,{fontSize:"12px",pl:"5px",children:s==null?void 0:s.phone})]},z())),e.jsxs(Ce,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:m,size:"xl",onClose:y,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(ve,{}),e.jsxs(ke,{w:{base:"90vw",md:"50vw"},borderRadius:0,p:"2%",overflowY:"scroll",children:[e.jsx(gs,{}),e.jsx(k,{mb:"30px",children:e.jsx(bs,{fontSize:"18px",children:"Update Phone Number"})}),e.jsxs(Pe,{w:"full",display:j?"none":void 0,children:[e.jsx(n,{fontSize:"14px",mt:"24px",mb:"8px",children:"Phone number"}),e.jsxs(ms,{...f,children:[e.jsx(ee,{w:"15%",pl:2,p:"0",h:"100%",children:e.jsx(Ns,{isCallingCode:!0,onChange:s=>{$(s.target.value),D(s.target.value+C.slice(3))},value:w||"234",...d})}),e.jsx(q,{h:"100%",borderRadius:"0px",boxShadow:"none",outline:"none",type:"tel",placeholder:`${w||"(000)"} 0 000 000 000 `,value:C,onChange:({target:s})=>{D(s.value)}})]}),e.jsx(I,{as:"button",mt:5,w:"full",onClick:()=>se({phone:C,countryCode:w}),bg:"black",color:"light",h:"50px",children:Ne?e.jsxs(k,{children:[e.jsx(b,{}),e.jsx(n,{children:"Loading"})]}):e.jsx(n,{children:"Add phone"})})]}),e.jsx(R,{display:j?void 0:"none",orientation:"horizontal",mt:"40px"}),e.jsxs(i,{mt:"16px",display:j?void 0:"none",justifyContent:"center",alignItems:"center",flexDir:"column",children:[e.jsx(n,{fontSize:"14px",mb:"10px",children:"Enter the 2-step verification code that we texted to your phone"}),e.jsx(k,{w:"100%",h:"48px",justifyContent:"center",alignItems:"center",children:e.jsx(Oe,{onComplete:s=>{re(s),Ge("")},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(_e,{bg:"#F6F6F6",borderRadius:10,borderWidth:0,w:"48px",h:"100%"},z()))})}),ae&&e.jsx(n,{color:"red",mt:"10px",children:ae}),e.jsxs(n,{pt:"10px",children:["Didnâ€™t receive the code?"," ",e.jsxs(ys,{onClick:()=>{se({phone:C,countryCode:w})},href:"#",color:"#256BF2",children:[" ","Resend code"]})]})]}),e.jsx(R,{orientation:"horizontal",mt:"16px"}),e.jsxs(i,{mt:"24px",flexDir:"column",display:j?void 0:"none",children:[e.jsx(I,{onClick:()=>Te({phone:C,countryCode:w,countryName:We,code:Ue}),as:"button",bg:"black",color:"light",h:"50px",children:Le?e.jsxs(k,{children:[e.jsx(b,{}),e.jsx(n,{children:"Loading"})]}):e.jsx(n,{children:"Add phone"})}),e.jsx(I,{as:"button",bg:"light",color:"dark",h:"50px",border:"1px solid black",onClick:y,mt:"8px",children:e.jsx(n,{children:"Cancel"})})]})]})]}),e.jsxs(Ce,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:O,size:"xl",onClose:U,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(ve,{}),e.jsx(ke,{w:{base:"90vw",md:"50vw"},borderRadius:0,p:"2%",overflowY:"scroll",children:e.jsxs(i,{flexDir:"column",py:"5px",children:[e.jsxs(i,{justifyContent:"space-between",mb:"20px",children:[e.jsx(n,{fontSize:"20px",fontWeight:"700",children:"New Password"}),e.jsx(i,{as:"button",onClick:U,children:e.jsx(Is,{size:25})})]}),e.jsx(n,{fontSize:"16px",mb:"10px",children:"Please provide your new login details"}),e.jsx(q,{placeholder:"Password",borderColor:"rgba(0, 0, 0, 0.1)",backgroundColor:"#F5F5F5",borderRadius:"10px",py:"10px",px:"20px",variant:"unstyled",w:"100%",value:_,type:W?"text":"password",onChange:({target:s})=>{fe(s.value),he("")}}),e.jsx(q,{mt:"20px",placeholder:"Confirm Password",backgroundColor:"#F5F5F5",borderRadius:"10px",py:"10px",px:"20px",variant:"unstyled",w:"100%",value:F,type:W?"text":"password",onChange:({target:s})=>{ge(s.value),he("")}}),e.jsx(n,{as:Ie,onClick:qe,alignSelf:"flex-end",pt:"0px",bg:"transparent",_hover:{bg:"transparent"},children:W?"Hide":"Show"}),e.jsx(k,{w:"100%",h:"80px",children:e.jsx(Oe,{onComplete:s=>{be(s)},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(_e,{bg:"grey",borderRadius:10,borderWidth:0,w:"30%",h:"100%",_focus:{border:"1px solid #1a1e26",outline:"none",boxShadow:"none"}},z()))})}),ue&&e.jsx(n,{color:"#E50000",children:ue}),de&&e.jsx(b,{size:"sm",alignSelf:"flex-end",mt:"10px"}),e.jsxs(k,{fontSize:"14px",mt:"25px",children:[e.jsx(n,{children:"Did not receive OTP?"}),e.jsx(Pe,{opacity:le?1:.5,onClick:()=>{le&&(Xe(xe+1),ce(!1))},children:e.jsx(Ss,{countFrom:xe,onCountdownComplete:()=>{ce(!0)}})})]}),e.jsx(I,{mt:"10px",w:"100%",bg:"black",color:"white",p:"10px",borderRadius:"8px",as:Ie,isLoading:de,onClick:es,_hover:{bg:"black",_loading:{bg:"black"}},isDisabled:!_||!F||!Y,children:"Confirm"})]})})]})]})},Ds=()=>({root:{w:"100%",h:"100%"},root2:{w:"100%",h:"48px",align:"center",justify:"center",px:"0px",bg:"#FFFFFF",borderColor:"1px solid rgba(0, 0, 0, 0.08)",outline:"none",borderRadius:"0px"},headingStyle:{fontSize:["14px","12px","14px","16px","18px"]},bodyStyle:{fontSize:["14px","14px","12px","12px","12px"],color:"#999999"},subHeadStyle:{fontSize:["14px","12px","12px","12px","14px"],mt:"4%"},manageButton:{borderWidth:1,borderColor:"#000000",px:"2%",borderRadius:"100px",h:"30px"},countrySelect:{w:{base:"100%",md:"100%"},bg:"#FFFFFF",color:"dark",borderColor:"1px solid rgba(0, 0, 0, 0.08)",borderWidth:"1px",align:"center",borderRadius:"0px"},basedText:{fontSize:{base:"14px",md:"16px"}},desc:{pb:"5px",fontSize:{base:"15px",md:"17px"},w:{base:"100%",md:"80%"}}}),Ts=()=>{const{root:r,rootBox:a,leftSection:p,rightSection:l,singleRouteStyle:u}=Ls(),[x,h]=o.useState(0),d=[{route:"Edit Profile",view:e.jsx(o.Suspense,{fallback:e.jsx(b,{size:"sm"}),children:e.jsx(Ps,{})},"1")},{route:"Security",view:e.jsx(o.Suspense,{fallback:e.jsx(b,{size:"sm"}),children:e.jsx(As,{})},"3")}];return e.jsxs(i,{flexDir:"column",children:[e.jsx(o.Suspense,{fallback:e.jsx(b,{size:"sm"}),children:e.jsx(vs,{})}),e.jsxs(ks,{children:[e.jsx(Re,{...r,children:e.jsxs(i,{...a,children:[e.jsx(i,{...p,flexDir:"column",children:d==null?void 0:d.map((f,g)=>e.jsx(i,{...u,as:"button",onClick:()=>h(g),bg:g===x?"white":"transparent",children:e.jsx(n,{fontSize:["14px","14px","14px","14px","14px"],children:f.route})},z()))}),e.jsx(i,{...l,overflowY:"scroll",children:d==null?void 0:d.map((f,g)=>g===x&&f.view)})]})}),"`"]})]})},Ks=Ts,Ls=()=>({root:{w:"100%",h:"600px",mt:"108px",pt:"3%",overflow:"hidden"},rootBox:{w:"100%",h:"100%",borderRadius:"15px",overflow:"hidden",borderWidth:"1px",borderColor:"#00000007"},leftSection:{h:"100%",w:"25%",bg:"#F2F2F2"},rightSection:{h:"100%",w:"75%",p:"3%"},singleRouteStyle:{w:"100%",h:"8%",borderBottomWidth:"1px",borderBottomColor:"#0000001C",align:"center",pl:"3%"}});export{Ks as default};
