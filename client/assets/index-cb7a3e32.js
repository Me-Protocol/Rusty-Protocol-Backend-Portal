import{bI as E,bH as H,cw as ns,j as e,bJ as X,bK as rs,bF as as,r as t,F as i,T as n,C as I,S as m,_ as Fe,u as is,b as ls,a as cs,O as je,d as we,at as ds,cx as ps,cy as xs,cz as us,cA as hs,W as v,ax as Q,n as z,al as F,h as Ee,a0 as fs,a2 as Ce,a3 as ve,a4 as ke,cB as gs,i as k,H as ms,a8 as Pe,ai as bs,aj as q,L as ys,l as Ie,c6 as Ss,g as js,bu as ws,bt as Cs,m as vs}from"./index-4224d7bb.js";import{M as ks}from"./MyProfile-8e57f42d.js";import{I as Ps}from"./index.esm-09a78916.js";import{u as Is}from"./chunk-7D6N5TE5-5789772e.js";import{c as _s}from"./countries-020c4914.js";import{C as P}from"./index-48807620.js";import{C as Os}from"./index-1cb20934.js";import{P as _e,a as Oe}from"./chunk-I5V4ORUK-194da3bb.js";var Rs={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},Fs=E("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),Z=H(function(a,d){var l;const{placement:u="left",...p}=a,h=(l=Rs[u])!=null?l:{},c=ns();return e.jsx(Fs,{ref:d,...p,__css:{...c.addon,...h}})});Z.displayName="InputAddon";var ee=H(function(a,d){return e.jsx(Z,{ref:d,placement:"left",...a,className:X("chakra-input__left-addon",a.className)})});ee.displayName="InputLeftAddon";ee.id="InputLeftAddon";var ze=H(function(a,d){return e.jsx(Z,{ref:d,placement:"right",...a,className:X("chakra-input__right-addon",a.className)})});ze.displayName="InputRightAddon";ze.id="InputRightAddon";var Me=H(function(a,d){const l=rs("Switch",a),{spacing:u="0.5rem",children:p,...h}=as(a),{getIndicatorProps:c,getInputProps:f,getCheckboxProps:g,getRootProps:M,getLabelProps:b}=Is(h),A=t.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...l.container}),[l.container]),y=t.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...l.track}),[l.track]),_=t.useMemo(()=>({userSelect:"none",marginStart:u,...l.label}),[u,l.label]);return e.jsxs(E.label,{...M(),className:X("chakra-switch",a.className),__css:A,children:[e.jsx("input",{className:"chakra-switch__input",...f({},d)}),e.jsx(E.span,{...g(),className:"chakra-switch__track",__css:y,children:e.jsx(E.span,{__css:l.thumb,className:"chakra-switch__thumb",...c()})}),p&&e.jsx(E.span,{className:"chakra-switch__label",...b(),__css:_,children:p})]})});Me.displayName="Switch";const Re=({head:r,body:a,isButton:d,onClick:l,loading:u,onChange:p,value:h,isChecked:c,switchLoading:f})=>{const{root:g,lowerSec:M,subHeadStyle:b,headingStyle:A,bodyStyle:y,button:_}=Es();return e.jsxs(i,{...g,flexDir:"column",children:[e.jsx(n,{...b,children:r}),e.jsxs(i,{...M,flexDir:"row",justify:"space-between",children:[e.jsx(n,{...y,w:"65%",children:a}),d?e.jsx(I,{as:"button",..._,onClick:l,children:u?e.jsx(m,{mx:"18px",my:"2px",size:"sm"}):e.jsx(n,{fontSize:["14px","12px","12px","12px","14px"],children:"Change"})}):e.jsxs(i,{align:"center",children:[f&&e.jsx(m,{size:"xs",color:"dark"}),e.jsx(Me,{sx:{"span.chakra-switch__track:not([data-checked])":{backgroundColor:"gray"},"span.chakra-switch__track":{backgroundColor:"gray.900"}},size:"sm",value:h,onChange:p,pl:"5px",isChecked:c})]})]})]})},Es=()=>({root:{w:"100%",mb:"2%"},lowerSec:{w:"100%",align:"center"},headingStyle:{fontSize:["14px","12px","14px","16px","18px"]},subHeadStyle:{fontSize:["14px","12px","12px","12px","14px"]},bodyStyle:{fontSize:["14px","14px","12px","12px","12px"],color:"#999999"},button:{borderWidth:1,borderColor:"#000000",px:"2%",py:"0.5%",borderRadius:"100px"}}),zs=r=>r?r.slice(0,6)+"..."+r.slice(-4):"",Ms=t.lazy(()=>Fe(()=>import("./index-b00e6359.js"),["assets/index-b00e6359.js","assets/index-4224d7bb.js","assets/index-56f23032.css","assets/countries-020c4914.js","assets/chunk-3RSXBRAN-fcbdb00b.js"])),As=()=>{var be,ye,Se;is();let r=ls();const a=cs(),{root:d,headingStyle:l,bodyStyle:u,subHeadStyle:p,manageButton:h,countrySelect:c,root2:f,desc:g,basedText:M}=Ts(),{isOpen:b,onOpen:A,onClose:y}=je(),{isOpen:_,onOpen:Ae,onClose:U}=je(),{user_data:x}=we(s=>s.userReducer),{token:S}=we(s=>s.authReducer);ds();const[se,{isLoading:Te,isSuccess:j,error:T,isError:Le,reset:De}]=ps(),[Ne,{isLoading:Be,isSuccess:te,error:V,isError:oe,reset:We}]=xs(),[ne]=us(),[He,Ue]=t.useState("Switzerland"),[w,G]=t.useState("566"),[C,L]=t.useState(""),[Ve,re]=t.useState(""),[ae,Ge]=t.useState("");t.useState(!1);const[$e,$]=t.useState(!1),[ie,Bs]=t.useState(x==null?void 0:x.email),[Ye,Je]=t.useState("");t.useState(!1);const[Ke,D]=t.useState(!1),[Ws,N]=t.useState(!1),[Hs,B]=t.useState(!1),[W,Qe]=t.useState(!1),[le,ce]=t.useState(!1),[de,pe]=t.useState(!1),[xe,qe]=t.useState(60),[ue,he]=t.useState(""),[O,fe]=t.useState(""),[R,ge]=t.useState(""),[Y,me]=t.useState(""),Xe=()=>Qe(!W),{data:J}=hs(void 0,{refetchOnFocus:!0,skip:!S}),Ze=()=>{js.get("https://ipapi.co/json/").then(s=>{let o=s.data;Ue(o.country_name),G(o.country_calling_code),L(o.country_calling_code)}).catch(s=>{console.log(s)})};t.useEffect(()=>()=>{},[x]),t.useEffect(()=>{var s;T&&v(r,((s=T==null?void 0:T.data)==null?void 0:s.message)||"Could not send OTP. Please try again later."),j&&v(r,`OTP has been sent to phone number ending in ${C.slice(-4)}`)},[Le,j]),t.useEffect(()=>{var s;oe&&v(r,((s=V==null?void 0:V.data)==null?void 0:s.message)||"Could not send OTP. Please try again later."),te&&(v(r,"Your phone number has been updated successfully"),a(Q({token:S})),y(),L(""),G(""),re(""))},[oe,te]),t.useEffect(()=>{b||(De(),We())},[b]);async function es(){if(!ie.includes("@"))return P(r,"Invalid email address","Please enter a valid email address");try{$(!0);const{payload:s,error:o}=await a(ws({identifier:ie}));if(o)return $(!1),P(r,"Error",o==null?void 0:o.message);s&&(Je(s==null?void 0:s.userId),Ae())}catch(s){console.log(s,"SEND_RESET_CODE_ERR")}finally{$(!1)}}async function ss(){try{if(O!==R)return P(r,"Invalid password","Password do not match");if(O.length<8||R.length<8)return P(r,"Invalid password","Password must be at least 8 characters");if(Y.length<4)return P(r,"Invalid otp","Please provide a valid otp code");const{payload:s,error:o}=await a(Cs({code:Y,password:O,confirmPassword:R,userId:Ye}));if(o)return pe(!1),P(r,"Error",o==null?void 0:o.message);s&&(Os(r,"Password changed successfully",5e3),fe(""),ge(""),me(""),U())}catch(s){console.log(s)}finally{pe(!1)}}t.useEffect(()=>{Ze()},[]);const K=(ye=((be=_s)==null?void 0:be.map(s=>({id:z(),...s}))).filter(s=>s.name==="234"||s.callingCodes[0]==="234"))==null?void 0:ye[0];async function ts(s){s==="login"?D(!0):s==="deposit"?N(!0):B(!0),await ne({enable:!0}).then(async o=>{console.log(o),S&&a(Q({token:S})),(o==null?void 0:o.statusCode)===200&&v(r,"2FA enabled successfully")}).catch(o=>{console.log(o,"UOPIO")}).finally(()=>{D(!1),N(!1),B(!1)})}async function os(s){s==="login"?D(!0):s==="deposit"?N(!0):B(!0),await ne({enable:!1}).then(async({data:o})=>{S&&a(Q({token:S})),(o==null?void 0:o.statusCode)===200&&v(r,"2FA disabled successfully")}).catch(o=>{console.log(o,"UOPIO")}).finally(()=>{D(!1),N(!1),B(!1)})}return e.jsxs(i,{...d,flexDir:"column",children:[e.jsx(n,{...l,children:"Security"}),e.jsx(n,{...u,children:"Secure your account by enabling these settings."}),e.jsxs(i,{flexDir:"column",children:[e.jsx(n,{...p,children:"Two factor authentication"}),e.jsx(F,{my:"1%"}),e.jsx(Re,{head:"Enable at login",body:`If enabled, we will send a temporary 4-digit code to your email ${zs(x==null?void 0:x.email)} when you login.`,isChecked:x==null?void 0:x.is2faEnabled,switchLoading:Ke,onChange:()=>{x!=null&&x.is2faEnabled?os("login"):ts("login")}}),e.jsx(n,{...p,children:"Login"}),e.jsx(F,{my:"1%"}),e.jsx(Re,{head:"Password",body:"Weâ€™ll send a temporary 4-digit code to reset your password",isButton:!0,loading:$e,onClick:es}),e.jsxs(i,{justify:"space-between",align:"flex-end",children:[e.jsxs(Ee,{spacing:2,children:[e.jsx(n,{...p,children:"Phone number"}),e.jsx(n,{color:"#999999",fontSize:["14px","14px","12px","12px","12px"],children:"Manage your phone number"})]}),e.jsx(I,{as:"button",...h,onClick:A,children:e.jsx(n,{fontSize:["14px","12px","12px","12px","14px"],children:"Manage"})})]}),e.jsx(F,{my:"1%"})]}),(Se=J==null?void 0:J.phones)==null?void 0:Se.map(s=>e.jsxs(i,{align:"center",children:[e.jsx(fs,{src:K==null?void 0:K.flag,size:"xs"}),e.jsx(n,{fontSize:"12px",pl:"5px",children:s==null?void 0:s.phone})]},z())),e.jsxs(Ce,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:b,size:"xl",onClose:y,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(ve,{}),e.jsxs(ke,{w:{base:"90vw",md:"50vw"},borderRadius:0,p:"2%",overflowY:"scroll",children:[e.jsx(gs,{}),e.jsx(k,{mb:"30px",children:e.jsx(ms,{fontSize:"18px",children:"Update Phone Number"})}),e.jsxs(Pe,{w:"full",display:j?"none":void 0,children:[e.jsx(n,{fontSize:"14px",mt:"24px",mb:"8px",children:"Phone number"}),e.jsxs(bs,{...f,children:[e.jsx(ee,{w:"15%",pl:2,p:"0",h:"100%",children:e.jsx(Ms,{isCallingCode:!0,onChange:s=>{G(s.target.value),L(s.target.value+C.slice(3))},value:w||"234",...c})}),e.jsx(q,{h:"100%",borderRadius:"0px",boxShadow:"none",outline:"none",type:"tel",placeholder:`${w||"(000)"} 0 000 000 000 `,value:C,onChange:({target:s})=>{L(s.value)}})]}),e.jsx(I,{as:"button",mt:5,w:"full",onClick:()=>se({phone:C,countryCode:w}),bg:"black",color:"light",h:"50px",children:Te?e.jsxs(k,{children:[e.jsx(m,{}),e.jsx(n,{children:"Loading"})]}):e.jsx(n,{children:"Add phone"})})]}),e.jsx(F,{display:j?void 0:"none",orientation:"horizontal",mt:"40px"}),e.jsxs(i,{mt:"16px",display:j?void 0:"none",justifyContent:"center",alignItems:"center",flexDir:"column",children:[e.jsx(n,{fontSize:"14px",mb:"10px",children:"Enter the 2-step verification code that we texted to your phone"}),e.jsx(k,{w:"100%",h:"48px",justifyContent:"center",alignItems:"center",children:e.jsx(_e,{onComplete:s=>{re(s),Ge("")},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(Oe,{bg:"#F6F6F6",borderRadius:10,borderWidth:0,w:"48px",h:"100%"},z()))})}),ae&&e.jsx(n,{color:"red",mt:"10px",children:ae}),e.jsxs(n,{pt:"10px",children:["Didnâ€™t receive the code?"," ",e.jsxs(ys,{onClick:()=>{se({phone:C,countryCode:w})},href:"#",color:"#256BF2",children:[" ","Resend code"]})]})]}),e.jsx(F,{orientation:"horizontal",mt:"16px"}),e.jsxs(i,{mt:"24px",flexDir:"column",display:j?void 0:"none",children:[e.jsx(I,{onClick:()=>Ne({phone:C,countryCode:w,countryName:He,code:Ve}),as:"button",bg:"black",color:"light",h:"50px",children:Be?e.jsxs(k,{children:[e.jsx(m,{}),e.jsx(n,{children:"Loading"})]}):e.jsx(n,{children:"Add phone"})}),e.jsx(I,{as:"button",bg:"light",color:"dark",h:"50px",border:"1px solid black",onClick:y,mt:"8px",children:e.jsx(n,{children:"Cancel"})})]})]})]}),e.jsxs(Ce,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:_,size:"xl",onClose:U,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(ve,{}),e.jsx(ke,{w:{base:"90vw",md:"50vw"},borderRadius:0,p:"2%",overflowY:"scroll",children:e.jsxs(i,{flexDir:"column",py:"5px",children:[e.jsxs(i,{justifyContent:"space-between",mb:"20px",children:[e.jsx(n,{fontSize:"20px",fontWeight:"700",children:"New Password"}),e.jsx(i,{as:"button",onClick:U,children:e.jsx(Ps,{size:25})})]}),e.jsx(n,{fontSize:"16px",mb:"10px",children:"Please provide your new login details"}),e.jsx(q,{placeholder:"Password",borderColor:"rgba(0, 0, 0, 0.1)",backgroundColor:"#F5F5F5",borderRadius:"10px",py:"10px",px:"20px",variant:"unstyled",w:"100%",value:O,type:W?"text":"password",onChange:({target:s})=>{fe(s.value),he("")}}),e.jsx(q,{mt:"20px",placeholder:"Confirm Password",backgroundColor:"#F5F5F5",borderRadius:"10px",py:"10px",px:"20px",variant:"unstyled",w:"100%",value:R,type:W?"text":"password",onChange:({target:s})=>{ge(s.value),he("")}}),e.jsx(n,{as:Ie,onClick:Xe,alignSelf:"flex-end",pt:"0px",bg:"transparent",_hover:{bg:"transparent"},children:W?"Hide":"Show"}),e.jsx(k,{w:"100%",h:"80px",children:e.jsx(_e,{onComplete:s=>{me(s)},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(Oe,{bg:"grey",borderRadius:10,borderWidth:0,w:"30%",h:"100%",_focus:{border:"1px solid #1a1e26",outline:"none",boxShadow:"none"}},z()))})}),ue&&e.jsx(n,{color:"#E50000",children:ue}),de&&e.jsx(m,{size:"sm",alignSelf:"flex-end",mt:"10px"}),e.jsxs(k,{fontSize:"14px",mt:"25px",children:[e.jsx(n,{children:"Did not receive OTP?"}),e.jsx(Pe,{opacity:le?1:.5,onClick:()=>{le&&(qe(xe+1),ce(!1))},children:e.jsx(Ss,{countFrom:xe,onCountdownComplete:()=>{ce(!0)}})})]}),e.jsx(I,{mt:"10px",w:"100%",bg:"black",color:"white",p:"10px",borderRadius:"8px",as:Ie,isLoading:de,onClick:ss,_hover:{bg:"black",_loading:{bg:"black"}},isDisabled:!O||!R||!Y,children:"Confirm"})]})})]})]})},Ts=()=>({root:{w:"100%",h:"100%"},root2:{w:"100%",h:"48px",align:"center",justify:"center",px:"0px",bg:"#FFFFFF",borderColor:"1px solid rgba(0, 0, 0, 0.08)",outline:"none",borderRadius:"0px"},headingStyle:{fontSize:["14px","12px","14px","16px","18px"]},bodyStyle:{fontSize:["14px","14px","12px","12px","12px"],color:"#999999"},subHeadStyle:{fontSize:["14px","12px","12px","12px","14px"],mt:"4%"},manageButton:{borderWidth:1,borderColor:"#000000",px:"2%",borderRadius:"100px",h:"30px"},countrySelect:{w:{base:"100%",md:"100%"},bg:"#FFFFFF",color:"dark",borderColor:"1px solid rgba(0, 0, 0, 0.08)",borderWidth:"1px",align:"center",borderRadius:"0px"},basedText:{fontSize:{base:"14px",md:"16px"}},desc:{pb:"5px",fontSize:{base:"15px",md:"17px"},w:{base:"100%",md:"80%"}}}),Ls=t.lazy(()=>Fe(()=>import("./index-a9fa17b3.js"),["assets/index-a9fa17b3.js","assets/index-4224d7bb.js","assets/index-56f23032.css"])),Ds=()=>{const{root:r,rootBox:a,leftSection:d,rightSection:l,singleRouteStyle:u}=Ns(),[p,h]=t.useState(0),c=[{route:"Edit Profile",view:e.jsx(t.Suspense,{fallback:e.jsx(m,{size:"sm"}),children:e.jsx(ks,{})},"1")},{route:"Security",view:e.jsx(t.Suspense,{fallback:e.jsx(m,{size:"sm"}),children:e.jsx(As,{})},"3")}];return e.jsxs(i,{flexDir:"column",children:[e.jsx(t.Suspense,{fallback:e.jsx(m,{size:"sm"}),children:e.jsx(Ls,{borderBottomWidth:"0px"})}),e.jsxs(vs,{children:[e.jsx(Ee,{...r,children:e.jsxs(i,{...a,children:[e.jsx(i,{...d,flexDir:"column",children:c==null?void 0:c.map((f,g)=>e.jsx(i,{...u,as:"button",onClick:()=>h(g),bg:g===p?"white":"transparent",children:e.jsx(n,{fontSize:["14px","14px","14px","14px","14px"],children:f.route})},z()))}),e.jsx(i,{...l,overflowY:"scroll",children:c==null?void 0:c.map((f,g)=>g===p&&f.view)})]})}),"`"]})]})},Xs=Ds,Ns=()=>({root:{w:"100%",h:"600px",mt:"108px",pt:"3%",overflow:"hidden"},rootBox:{w:"100%",h:"100%",borderRadius:"15px",overflow:"hidden",borderWidth:"1px",borderColor:"#00000007"},leftSection:{h:"100%",w:"25%",bg:"#F2F2F2"},rightSection:{h:"100%",w:"75%",p:"3%"},singleRouteStyle:{w:"100%",h:"8%",borderBottomWidth:"1px",borderBottomColor:"#0000001C",align:"center",pl:"3%"}});export{Xs as default};
