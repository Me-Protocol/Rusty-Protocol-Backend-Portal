import{aS as qe,aT as Je,j as e,aP as me,aQ as Ke,r as a,_ as M,a as es,b as ss,Z as D,u as as,d as X,bd as os,J as rs,v as ns,w as ts,bf as ls,bg as is,aR as cs,S as x,m as ds,h as v,H as u,T as n,C as h,V as je,F as r,ay as ps,az as xs,ak as k,I as w,f as R,aA as us,G as Z,y as m,al as hs,aI as ms,U as q,bh as js,am as _,a$ as bs,b0 as fs,b1 as gs,b2 as ws,b3 as ys,O as Ss,N as Cs,a5 as vs,bi as J,b4 as ks,bj as Rs,i as _s,bk as Es,g as Ps,B as Os,t as As,a1 as K,bl as Ls}from"./index-4302fa73.js";import{useInputStyles as Bs}from"./index-c93abaf5.js";import{P as Is}from"./chunk-RLMGYZLY-3be20e77.js";import{S as be}from"./chunk-3RSXBRAN-6b0fc4b3.js";import{P as zs,a as Fs}from"./chunk-I5V4ORUK-7ee0060c.js";import"./formik.esm-5e033970.js";var ee=(t,i)=>i?`${t}.${i}, ${i}`:void 0;function ge(t){var i;const{bg:E,bgColor:T,backgroundColor:P,shadow:O,boxShadow:N,shadowColor:b}=t,{getArrowProps:A,getArrowInnerProps:L}=qe(),V=Je(),f=(i=E??T)!=null?i:P,U=O??N;return e.jsx(me.div,{...A(),className:"chakra-popover__arrow-positioner",children:e.jsx(me.div,{className:Ke("chakra-popover__arrow",t.className),...L(t),__css:{"--popper-arrow-shadow-color":ee("colors",b),"--popper-arrow-bg":ee("colors",f),"--popper-arrow-shadow":ee("shadows",U),...V.arrow}})})}ge.displayName="PopoverArrow";const j=a.lazy(()=>M(()=>import("./index-4302fa73.js").then(t=>t.cQ),["assets/index-4302fa73.js","assets/index-ed5220eb.css"])),Ds=a.lazy(()=>M(()=>import("./index-64097767.js"),["assets/index-64097767.js","assets/index-4302fa73.js","assets/index-ed5220eb.css"])),fe=a.lazy(()=>M(()=>import("./index-4302fa73.js").then(t=>t.cR),["assets/index-4302fa73.js","assets/index-ed5220eb.css"])),Ms=a.lazy(()=>M(()=>import("./index-3901ad29.js"),["assets/index-3901ad29.js","assets/index-4302fa73.js","assets/index-ed5220eb.css","assets/chunk-7ELO524Q-966f499c.js"])),Ts=()=>{var de,pe,xe,ue,he;const t=es(),i=ss();D();const{isOpen:E,onOpen:T,onClose:P}=D(),{isOpen:O,onOpen:N,onClose:b}=D();D();let A=as();const L=a.useRef(null),V=a.useRef(null),{token:f}=X(s=>s.authReducer),{setUpWallet:U,loading:we}=os(),{my_rewards:$,my_rewards_loading:Vs}=X(s=>s==null?void 0:s.userReducer),{data:l,isLoading:Us}=rs({page:1,limit:8},{refetchOnFocus:!0});ns({page:1,limit:8,type:ts.PRODUCT},{refetchOnMountOrArgChange:300});const{user_data:p}=X(s=>s==null?void 0:s.userReducer),{styles:ye}=Bs(),[Se]=ls(),[Ce]=is();cs();const[ve,B]=a.useState(0),[se,ae]=a.useState(!1),[ke,Re]=a.useState(""),[_e,oe]=a.useState(""),[re,I]=a.useState(""),[Ee,ne]=a.useState(!1),[te,z]=a.useState(!1),[y,le]=a.useState(""),[Pe,Oe]=a.useState(""),[Ae,Le]=a.useState(""),[o,Be]=a.useState({}),[Ie,ze]=a.useState(""),[W,G]=a.useState(""),{root:Fe,head:S,desc:c,rewardBox:De,smallerDesc:Me,connectButton:Te,search:g,Box1:Ne,center1:Ve,pintf1:Ue}=Ns();a.useEffect(()=>{},[]),a.useEffect(()=>{var s,d;Q((s=l==null?void 0:l.data)==null?void 0:s.brands),$e((d=l==null?void 0:l.data)==null?void 0:d.brands)},[(de=l==null?void 0:l.data)==null?void 0:de.brands]);const[H,Q]=a.useState([]),[ie,$e]=a.useState([]),[We,ce]=a.useState("");function Ge(s){if(s){const d=ie.filter(C=>{const F=C.rewardName?C.rewardName.toUpperCase():"".toUpperCase(),Ze=s.toUpperCase();return F.indexOf(Ze)>-1});Q(d),ce(s)}else Q(ie),ce(s)}async function He(){y.includes("@")&&(ne(!0),await Ce({rewardId:o.id,emailCode:_e}).then(s=>{var d,C,F;if(s.error){I((C=(d=s==null?void 0:s.error)==null?void 0:d.data)==null?void 0:C.error);return}(F=s==null?void 0:s.data)!=null&&F.synced&&(K(i,"Brand connected successfully"),setTimeout(()=>{t(Ls({token:f})),oe(""),le(""),z(!1),B(2)},300))}).catch(s=>{console.log(s,"SendEmailVerificationForSyncERR")}).finally(()=>{ne(!1)}))}async function Qe(){y.includes("@")&&(ae(!0),await Se({rewardId:o.id,email:y}).then(s=>{s!=null&&s.data&&(z(!0),K(i,"OTP sent successfully"))}).catch(s=>{console.log(s,"ERR")}).finally(()=>{ae(!1)}))}const Ye=()=>{switch(ve){case 0:return e.jsxs(v,{children:[e.jsxs(r,{flexDir:"row",justify:"space-between",children:[e.jsxs(u,{...S,children:["Sync ",o==null?void 0:o.name," Rewards"]}),e.jsx(h,{as:"button",onClick:b,children:e.jsx(w,{w:"30px",h:"30px",src:R.cancel_icon})})]}),e.jsxs(r,{flexDir:"row",align:"center",justify:"space-between",py:"2%",children:[e.jsxs(h,{w:"100px",h:"100px",overflow:"hidden",children:[e.jsx(w,{borderRadius:"10px",objectFit:"contain",src:o==null?void 0:o.rewardImage}),e.jsx(k,{...Ne,pos:"absolute"})]}),e.jsx(n,{...c,noOfLines:4,w:"100%",pl:"3%",children:o==null?void 0:o.description})]}),e.jsx(u,{...S,children:"What you’ll get"}),e.jsx(r,{flexDir:"column",bg:"#f6f6f6",p:"5%",borderRadius:"15px",children:[`Authorize Me app to access your reward balance with ${o==null?void 0:o.brandName}`,`Me app will Read reward balance from ${o==null?void 0:o.brandName}`,"Me app will monitor changes in reward balance "].map(s=>e.jsxs(r,{children:[e.jsx(h,{...Ve,children:e.jsx(q,{as:Es,color:"light"})}),e.jsx(n,{...c,noOfLines:2,pl:"2%",w:"100%",children:s})]},m()))}),e.jsx(j,{isLoading:se,onClick:()=>B(1),name:`Connect with ${(o==null?void 0:o.rewardName)||"reward"}`})]});case 1:return e.jsxs(v,{children:[e.jsxs(r,{flexDir:"row",justify:"space-between",children:[e.jsx(u,{...S,children:"Verify identity "}),e.jsx(h,{as:"button",onClick:()=>{B(0),b(),G(""),z(!1),I("")},children:e.jsx(w,{src:R.cancel_icon,w:"30px",h:"30px"})})]}),e.jsx(n,{...c,w:"100%",pt:"1%",children:"Please select your preferred means of identification from the available options below"}),e.jsx(r,{...g,children:e.jsx(J,{my:"5px",children:e.jsx(be,{color:"dark",onChange:({target:s})=>{G(s.value)},value:W,variant:"unstyled",placeholder:"Select verification option",size:"md",_placeholder:{color:"#999999"},children:["Email","Phone number"].map(s=>e.jsx("option",{value:s,children:s},m()))})})}),W&&e.jsx(v,{children:W==="Email"?e.jsx(_,{...g,value:y,onChange:s=>{le(s.target.value)},placeholder:"Enter email address"}):e.jsx(_,{...g,value:Pe,onChange:s=>{Oe(s.target.value)},placeholder:"Enter phone number"})}),te&&e.jsxs(k,{my:"3%",children:[e.jsx(n,{fontSize:"10px",children:"Please provide the OTP sent to your inbox"}),e.jsx(_s,{w:"100%",h:"60px",children:e.jsx(zs,{onComplete:s=>{oe(s),I("")},otp:!0,placeholder:"*",children:[1,2,3,4,5,6].map(()=>e.jsx(Fs,{...Ue},m()))})})]}),re&&e.jsx(n,{...c,color:"red",children:re}),e.jsx(j,{isLoading:Ee||se,onClick:()=>{if(te){He();return}Qe()},isDisabled:!y.includes("@"),name:"Continue"})]});case 2:return e.jsx(v,{w:"100%",children:e.jsxs(je,{children:[e.jsx(ks,{style:{width:"150px",height:"150px"},animationData:Rs,loop:!1,autoplay:!0}),e.jsx(u,{fontSize:"18px",pb:"10px",children:"Brand connected successfully"}),e.jsx(j,{name:"Ok",onClick:()=>{B(0),b(),G(""),z(!1),I(""),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}})]})})}},Y=[{id:"1",name:"All"},{id:"2",name:"Fashion"},{id:"3",name:"Beauty"},{id:"4",name:"Home"},{id:"5",name:"Travel"},{id:"6",name:"Sports & outdoor"},{id:"7",name:"Health & nutrition"},{id:"8",name:"Family & baby"}],Xe=async()=>{try{const s=await U({persist:!1});s.publicAddress&&await Ps.put(`${Os}/customer/setup-wallet-address`,{walletAddress:s.publicAddress},{headers:{Authorization:`Bearer ${f}`}}).then(({data:d})=>{f&&t(As({token:f})),K(i,"Profile updated successfully",2e3)}).catch(d=>{console.log(d,"UPDATeYUSERZRR")})}catch(s){console.log(s,"CREATE_WALLET ERR")}};return e.jsx(e.Fragment,{children:e.jsxs(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:[e.jsx(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:e.jsx(Ds,{pos:"relative"})}),e.jsx(ds,{children:e.jsxs(v,{...Fe,w:"100%",children:[e.jsx(u,{...S,children:"Sync rewards from the brands you love"}),e.jsx(n,{...c,children:"Connect your favorite brands to import rewards and get exclusive deals."}),e.jsx(u,{...c,pt:"30px",children:"Connected brands"}),e.jsxs(h,{as:je,...De,children:[e.jsxs(r,{w:{base:"90%",md:"65%"},flexDir:"column",align:"center",children:[e.jsx(n,{...c,w:"40%",textAlign:"center",children:($==null?void 0:$.length)<=0?"You haven’t connected any brand, yet. Add the brands below":"Add more brands below "}),!((pe=p==null?void 0:p.customer)!=null&&pe.walletAddress)&&e.jsx(n,{...c,w:"40%",textAlign:"center",children:"or"}),!((xe=p==null?void 0:p.customer)!=null&&xe.walletAddress)&&e.jsxs(e.Fragment,{children:[we?e.jsx(x,{size:"sm"}):e.jsx(n,{textDecoration:"underline",fontSize:"14px",mb:"10px",as:"button",onClick:Xe,children:"Set up your wallet"})," "]}),e.jsxs(ps,{placement:"right-end",children:[e.jsx(xs,{children:e.jsx(k,{as:"button",children:e.jsx(w,{src:R.noticeIcon,w:{base:5,md:5},h:{base:5,md:5}})})}),e.jsxs(us,{borderRadius:20,borderColor:"grey",children:[e.jsx(ge,{}),e.jsx(Is,{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla mattis, est eu tempor accumsan, lorem nulla auctor ex, a consectetur nisi mi nec justo. Cras eu nunc et dui suscipit venenatis."})]})]})]}),e.jsx(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:e.jsx(j,{isDisabled:!((ue=p==null?void 0:p.customer)!=null&&ue.walletAddress),rest:{w:{base:"90%",md:"50%"}},name:"Next",onClick:()=>A(`${Z}/dashboard`)})}),e.jsx(r,{w:{base:"90%",md:"50%"},justifyContent:"center",onClick:()=>A(`${Z}/dashboard`),color:"placeholderColor",_hover:{color:"dark"},children:e.jsx(n,{as:"button",fontSize:{base:"14px",md:"16px"},children:"Do it later"})})]}),e.jsxs(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:[e.jsx(e.Fragment,{}),e.jsx(Ms,{shopArray:(he=l==null?void 0:l.data)==null?void 0:he.brands,plusButtonVisible:!0,preLink:`${Z}/dashboard/shop/`},m())]}),e.jsxs(r,{w:"100%",pt:"3%",justify:"space-between",align:"center",children:[e.jsx(u,{...c,children:"Search for all brands"}),e.jsx(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:e.jsx(j,{name:"Suggest Brand",rest:{w:{base:"35%",md:"20%"},color:"dark",borderWidth:1,backgroundColor:"light"},onClick:T})})]}),e.jsx(r,{pt:"20px",children:e.jsx(r,{...ye,children:e.jsxs(hs,{_focus:{boxShadow:"none"},as:"button",children:[e.jsx(ms,{pointerEvents:"none",children:e.jsx(q,{as:js,color:"placeholderColor",w:"25px",h:"25px"})}),e.jsx(_,{borderWidth:"0px",placeholder:"Search offers, brands or styles...",value:We,onChange:({target:s})=>{Ge(s.value)}})]})})}),e.jsxs(bs,{isLazy:!0,isManual:!0,w:"100%",pt:"50px",pb:"10px",children:[e.jsx(fs,{children:Y==null?void 0:Y.map(s=>a.createElement(gs,{...Me,w:"100%",key:m(),_selected:{color:"black",borderColor:"black"},color:"#999999"},e.jsx(n,{noOfLines:1,children:s.name})))}),e.jsx(ws,{children:e.jsx(ys,{p:"0px"})})]}),e.jsx(r,{alignSelf:"center",children:e.jsx(Ss,{columns:3,w:"100%",spacingX:["30px","30px","30px","30px","30px"],spacingY:"40px",children:H==null?void 0:H.map(s=>e.jsxs(k,{role:"group",children:[e.jsx(Cs,{isLoaded:!0,mr:"20px",overflow:"hidden",w:["120px","200px","280px","320px","400px"],h:["100px","180px","180px","180px","200px"],onClick:()=>{N(),Be({...s})},children:e.jsxs(h,{w:["120px","200px","280px","320px","400px"],h:["100px","180px","180px","180px","200px"],bg:"#0000003D",borderRadius:{base:"10px",md:"16px"},pos:"absolute",background:`url(${s!=null&&s.banners?s==null?void 0:s.banners[1]:""}) center/cover no-repeat`,backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"multiply",as:"button",overflow:"hidden",children:[(s==null?void 0:s.white_logo)&&e.jsx(w,{w:"130px",h:"130px",position:"relative",borderRadius:"5px",src:s==null?void 0:s.white_logo,objectFit:"contain",fallbackSrc:R.appLogoPlaceholder,fallbackStrategy:"onError"}),e.jsx(k,{display:"none",_groupHover:{display:"flex"},pos:"absolute",children:e.jsx(j,{icon:e.jsx(q,{as:vs,color:"dark",w:"30px",h:"30px"}),name:"Connect",rest:Te})})]})}),e.jsx(n,{w:["120px","200px","280px","320px","400px"],noOfLines:1,mt:"12px",color:"dark",fontSize:["10px","10px","12px","12px","14px"],children:s==null?void 0:s.brandName})]},m()))})})]})}),e.jsxs(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:[e.jsxs(fe,{isOpen:E,onClose:P,initialFocusRef:L,finalFocusRef:V,children:[e.jsxs(r,{flexDir:"row",justify:"space-between",children:[e.jsx(u,{...S,children:"Suggest new brand"}),e.jsx(h,{as:"button",onClick:P,children:e.jsx(w,{src:R.cancel_icon,w:"30px",h:"30px"})})]}),e.jsx(n,{...c,w:"100%",pt:"1%",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla mattis, est eu tempor accumsan, lorem nulla auctor ex, a consectetur nisi mi nec justo. Cras eu nunc et dui suscipit venenatis. Phasellus posuere lacus commodo enim aliquam commodo. In ac sodales lorem."}),e.jsx(J,{children:e.jsx(_,{...g,ref:L,value:ke,onChange:s=>{Re(s.target.value)},placeholder:"Brand Name"})}),e.jsx(J,{my:"5px",children:e.jsx(_,{...g,value:Ae,onChange:s=>{Le(s.target.value)},placeholder:"https://my-brand.xyz"})}),e.jsx(r,{...g,children:e.jsx(be,{color:"dark",onChange:s=>{ze(s.target.value)},value:Ie,variant:"unstyled",placeholder:"Select category",size:"md",_placeholder:{color:"#999999"},children:["Clothings","Airline","Food and beverages","Sport"].map(s=>e.jsx("option",{value:s,children:s},m()))})}),e.jsx(a.Suspense,{fallback:e.jsx(x,{size:"sm"}),children:e.jsx(j,{name:"Submit brand",onClick:()=>{},rest:{my:"5px"}})})]}),e.jsx(fe,{isOpen:O,onClose:b,closeOnOverlayClick:!1,children:Ye()})]})]})})},Xs=Ts,Ns=()=>({root:{w:"100%",pt:"3%",overflow:"hidden"},head:{fontSize:{base:"18px",md:"20px"}},desc:{pb:"5px",fontSize:{base:"12px",md:"14px"},w:{base:"100%",md:"80%"}},smallerDesc:{fontSize:{base:"10px",md:"14px"}},rewardBox:{w:"100%",bg:"grey",borderRadius:10,borderWidth:1,borderColor:"placeholderColor",borderStyle:"dashed",py:"2%"},connectButton:{w:{base:"65%",md:"90%"},color:"dark",borderWidth:0,backgroundColor:"light",alignSelf:"center",justifySelf:"center"},connectedButton:{w:{base:"65%",md:"35%"},color:"light",borderWidth:1,backgroundColor:"transparent"},search:{w:"100%",h:"40px",background:"#F6F6F6",borderRadius:"53px",justify:"flex-start",align:"center",pl:"2%",borderWidth:"0px",_placeholder:{color:"#999999"},_focus:{borderColor:"black"}},Box1:{w:"100px",h:"100px",borderRadius:"100px",bg:"#9999992D"},center1:{bg:"#000000",w:"20px",h:"20px",borderRadius:"20px"},pintf1:{bg:"grey",borderRadius:10,borderWidth:0,w:"15%",h:"100%"}});export{Xs as default};
