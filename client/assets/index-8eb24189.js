import{b as Ie,U as ze,c as Ee,a as De,u as $e,r as l,d as Y,W as Me,X as Pe,Y as Ae,Z as Ne,$ as Te,g as _e,B as Be,a0 as z,j as e,F as n,a1 as He,m as We,h as j,G as d,i as m,I as E,f as q,A as D,T as r,E as i,a2 as $,O as g,a3 as Ge,a4 as Ue,a5 as Qe,C as b,Q as J,H as S,J as Xe,K as Z,n as ee,l as Ke,S as Ve,a6 as Ye,a7 as qe,a8 as Je,a9 as Ze,aa as oe,ab as eo,z as oo}from"./index-a17d5818.js";import so from"./index-e64147cd.js";import ao from"./index-d261404d.js";import to from"./index-03dd6a38.js";import{S as ro}from"./svg-eab83def.js";import{S as lo}from"./chunk-W7A7QDAK-8287cb05.js";import"./index-e970c13b.js";import"./countries-020c4914.js";import"./chunk-3RSXBRAN-8faf8567.js";const no=()=>{var T,_,B,H,W,G,U,Q,X,K,V;const{root:se,loadMore:ae}=oo();let k=Ie();const{id:c}=ze();Ee(),De();let C=$e();const[F,f]=l.useState(!1),[y,M]=l.useState(!1);l.useState("Last 30 days");const[v,te]=l.useState(1);l.useState([]);const[re,P]=l.useState(!1),[co,le]=l.useState(1),[ne,A]=l.useState(!1),[h,ie]=l.useState([]),[N,ce]=l.useState(null),{token:O}=Y(o=>o.authReducer);Y(o=>o.productReducer);const[de]=Me(),[xe]=Pe(),{isOpen:pe,onOpen:fe,onClose:R}=Ae(),{data:s,isLoading:u,error:xo}=Ne({id:c},{refetchOnFocus:!0,skip:!c}),{data:L,isLoading:I,refetch:w}=Te({brand_id:c},{refetchOnMountOrArgChange:!0,skip:!O}),{fontSmall:po,topCardStack:he,topCardHstack:ue,imageSkel:we,tokenCenter:je,iconFlex:me,sendFlex:fo,centerButton:ho,textReceive:uo,graphFlex:ge,overviewFlex:be,modalContentFollow:Se,overflowFlex:ke,circleImage:Ce,circleImage2:Fe,followCenter:ye,cancelCenter:ve}=io();l.useEffect(()=>{Oe()},[v]),l.useEffect(()=>{},[]);async function Oe(){var o,a,x,p;if(c){A(!0),P(!1);try{const{data:t}=await _e.get(`${Be}/store/offer?page=${v}&limit=4&brandId=${c}`);((o=t==null?void 0:t.data)==null?void 0:o.offers.length)<1&&(P(!0),z(k,"No offer available",3e3,"top-right")),ie([...h,...(a=t==null?void 0:t.data)==null?void 0:a.offers]),le((p=(x=t==null?void 0:t.data)==null?void 0:x.pagination)==null?void 0:p.totalPage)}catch(t){console.log(t,"GET_BRANDS_OFFERS_ERR")}finally{A(!1)}}}async function Re(){O||C(`${d}/login`),f(!0),await de({brand_id:c}).then(async o=>{var a;await w(),((a=o==null?void 0:o.data)==null?void 0:a.statusCode)===200&&(await w(),z(k,"Brand Followed"))}).catch(o=>{console.log(o,"FollowBrandErr")}).finally(()=>{f(!1)})}async function Le(){O||C(`${d}/login`),f(!0),await xe({brandId:c}).then(async o=>{var a;await w(),((a=o==null?void 0:o.data)==null?void 0:a.statusCode)===200&&(await w(),z(k,"Brand Unfollowed"))}).catch(o=>{console.log(o,"unFollowBrandERR")}).finally(()=>{f(!1)})}return e.jsxs(n,{flexDir:"column",children:[e.jsx(He,{}),e.jsx(We,{children:e.jsxs(j,{...se,children:[e.jsx(so,{breadcrumbs:[{name:"Home",link:`${d}/dashboard`},{name:"Shop",link:`${d}/dashboard/shop`},{name:(_=(T=s==null?void 0:s.data)==null?void 0:T.name)==null?void 0:_.replaceAll("_"," "),link:`${d}/dashboard/shop/${c}`,isCurrentPage:!0}]}),e.jsxs(j,{minH:y?"700px":"480px",...he,children:[e.jsxs(m,{...ue,children:[e.jsxs(j,{w:"60%",h:"100%",p:"20px",children:[e.jsx(lo,{isLoaded:!u,w:"70px",h:"70px",children:e.jsx(E,{src:(B=s==null?void 0:s.data)==null?void 0:B.logo,objectFit:"contain",...we,fallbackSrc:q.appLogoPlaceholder,fallbackStrategy:"beforeLoadOrError"})}),e.jsx(D,{isLoaded:!u,children:e.jsx(r,{fontSize:"28px",w:"75%",noOfLines:2,children:(H=s==null?void 0:s.data)==null?void 0:H.slogan})}),e.jsx(i,{}),e.jsx(D,{isLoaded:!u,children:e.jsx(r,{fontSize:"16px",noOfLines:3,w:"95%",children:(W=s==null?void 0:s.data)==null?void 0:W.description})}),e.jsx(n,{children:L!=null&&L.data?e.jsxs(n,{className:"followFlex",children:[e.jsx($,{name:"Following",isLoading:F||I,icon:e.jsx(g,{w:"25px",h:"25px",as:Ge}),rest:{w:"146px",fontSize:"16px",bg:"white",borderWidth:1,borderColor:"dark",color:"dark",className:"following"}}),e.jsx($,{name:"Unfollow",isLoading:F||I,rest:{w:"146px",fontSize:"16px",bg:"red",borderWidth:1,borderColor:"light",color:"light",className:"unfollow"},onClick:Le})]}):e.jsx($,{name:"Follow",isLoading:F||I,icon:e.jsx(g,{w:"25px",h:"25px",as:Ue}),rest:{w:"100px",fontSize:"16px"},onClick:fe})})]}),e.jsx(n,{w:"48%",h:"100%",children:e.jsx(D,{isLoaded:!u,children:e.jsx(ro,{img:(G=s==null?void 0:s.data)!=null&&G.banners?(U=s==null?void 0:s.data)==null?void 0:U.banners[0]:"https://cdn.cdnparenting.com/articles/2018/05/150311462-H.webp"})})})]}),e.jsxs(n,{w:"100%",p:"20px",color:"white",children:[e.jsx(m,{w:"25%",h:"30px",justifyContent:"space-between",children:e.jsxs(m,{color:"white",children:[e.jsx(Qe,{size:"sm",src:(Q=s==null?void 0:s.data)==null?void 0:Q.logo,mr:"2px"}),e.jsxs(n,{flexDir:"column",children:[e.jsx(r,{fontSize:"12px",children:(X=s==null?void 0:s.data)==null?void 0:X.name}),e.jsx(r,{fontSize:"10px",color:"#999999",children:"TKN"})]})]})}),e.jsx(i,{}),e.jsxs(b,{...je,as:"button",onClick:()=>{M(!y)},children:[e.jsx(r,{fontSize:"12px",children:"Reward overview"}),e.jsx(g,{as:J,...me})]})]}),e.jsxs(j,{display:y?"flex":"none",children:[e.jsx(i,{}),e.jsx(i,{}),e.jsx(i,{}),e.jsx(i,{}),e.jsx(i,{}),e.jsx(i,{}),e.jsx(n,{...ge}),e.jsxs(n,{...be,children:[e.jsxs(n,{w:"49%",flexDir:"column",children:[e.jsx(S,{fontSize:"16px",children:"Overview"}),e.jsx(r,{fontSize:"12px",py:"5px",children:"We believe in recognizing and appreciating your loyalty. That's why we have curated a unique and exciting rewards offers designed exclusively for our customers. We offer you a world of delightful offers"})]}),e.jsx(i,{}),e.jsxs(n,{w:"49%",flexDir:"column",children:[e.jsx(S,{fontSize:"16px",children:"How it works"}),e.jsx(r,{fontSize:"12px",py:"5px",children:"Enjoy the ease of redeeming your rewards with desired offers. Our user-friendly interface ensures a hassle-free experience every time you claim your benefits."}),e.jsx(S,{fontSize:"16px",children:"Resources"}),e.jsxs(r,{fontSize:"12px",py:"5px",children:["Official website:"," ",e.jsx(r,{as:"button",decoration:"underline",children:"https://www.meprotocol.io/"})]})]})]})]})]}),e.jsx(Xe,{columns:[2,2,3,4,4],w:"100%",spacingX:"3.5%",children:h==null?void 0:h.map((o,a)=>{var x,p,t;return e.jsx(ao,{isLoaded:!0,productTitle:o.name,points:`${o==null?void 0:o.tokens}${(x=o.reward)==null?void 0:x.rewardSymbol}`,productSubtitle:(t=(p=o.product)==null?void 0:p.category)==null?void 0:t.name,price:o.originalPrice.toLocaleString(),isNew:Z(Z()).diff(o==null?void 0:o.createdAt,"days")<1,rest:{...o},i:a,bgImage:o.offerImages,onClick:()=>C(`${d}/productDetails/${o.offerCode}`)},ee())})}),!re&&e.jsx(b,{as:Ke,...ae,onClick:()=>{te(v+1)},children:ne?e.jsx(Ve,{size:"sm"}):e.jsxs(e.Fragment,{children:["Load more ",e.jsx(g,{as:J,ml:"5%"})]})})]})}),e.jsxs(Ye,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:pe,size:"xl",onClose:R,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(qe,{}),e.jsxs(Je,{overflowY:"scroll",...Se,children:[e.jsxs(S,{fontSize:"18px",children:["Follow ",(K=s==null?void 0:s.data)==null?void 0:K.name]}),e.jsx(Ze,{mt:"10px",children:(V=oe)==null?void 0:V.map((o,a)=>e.jsxs(n,{w:oe.length-a===1?"100%":"48%",flexDir:"column",as:"button",borderColor:N===a?"dark":"#0000001C",...ke,onClick:()=>ce(a),children:[e.jsxs(m,{w:"100%",children:[e.jsx(eo,{bg:"black",p:"5px",children:e.jsx(E,{src:o.icon,...Ce,objectFit:"contain"})}),e.jsx(i,{}),N===a&&e.jsx(E,{...Fe,src:q.blackCheckMark})]}),e.jsx(r,{my:"5px",children:o.title}),e.jsx(r,{color:"#999999",textAlign:"left",children:o.desc})]},ee()))}),e.jsxs(n,{mt:"24px",flexDir:"column",children:[e.jsx(b,{as:"button",...ye,onClick:()=>{Re(),R()},children:e.jsx(r,{children:"Follow"})}),e.jsx(b,{as:"button",...ve,onClick:R,children:e.jsx(r,{children:"Cancel"})})]})]})]}),e.jsx(to,{})]})},yo=no,io=()=>({fontSmall:{},topCardStack:{bg:"dark",borderRadius:"16px",overflow:"hidden",transition:"all 0.5s",w:"100%"},topCardHstack:{bg:"grey",w:"100%",borderRadius:"16px",overflow:"hidden",h:"400px"},imageSkel:{h:"70px",w:"70px"},tokenCenter:{bg:"white",px:"10px",py:"5px",borderRadius:"16px",transition:"all 0.3s ease-in-out",color:"dark"},iconFlex:{alignSelf:"center",justifySelf:"center"},sendFlex:{w:"20%",bg:"black",borderRadius:"100px",borderWidth:.5,borderColor:"white",color:"white",align:"center",h:"100%"},centerButton:{w:"50%",bg:"white",borderRadius:"100px",h:"100%"},textReceive:{fontSize:["16px","16px","16px","16px","16px"],color:"black"},graphFlex:{w:"96%",borderRadius:"16px",bg:"#262626",alignSelf:"center",px:"20px"},overviewFlex:{w:"100%",color:"white",px:"20px",py:"15px",pb:"20px"},modalContentFollow:{w:{base:"90vw",md:"50vw"},p:"2%",borderRadius:0},overflowFlex:{borderRadius:"5px",p:"15px",alignContent:"flex-start",borderWidth:"1px"},circleImage:{h:"25px",w:"25px"},circleImage2:{w:"20px",h:"20px"},followCenter:{bg:"black",h:"50px",color:"light"},cancelCenter:{bg:"light",h:"50px",mt:"8px",border:"1px solid black",color:"dark"}});export{yo as default};
