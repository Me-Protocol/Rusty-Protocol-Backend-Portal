import{bp as Ne,bx as v,bA as $e,bv as Me,j as e,by as L,bz as Be,r as d,_ as I,u as Ge,a as Ve,U as We,c as He,d as z,cm as Qe,aB as Ye,Z as Xe,Y as we,F as l,S,m as Ue,h as A,G as C,T as n,E as j,i as F,al as T,C as Je,aQ as Ke,aR as Ze,y as P,M as Se,K as k,I as qe,J as es,V as ss,N as rs,cn as as,be as ns,bf as ts}from"./index-a17d5818.js";import{e as os}from"./empty-fb04a4d6.js";import{S as ls}from"./index-377dc40f.js";import{g as Ce,C as ds,a as is,L as cs,P as xs,b as hs,p as ps,c as bs,i as ms,d as us,e as gs,f as js}from"./random-color-c11db622.js";var[fs,N]=Ne({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),De=v((i,b)=>{const c=$e("Table",i),{className:f,layout:E,..._}=Me(i);return e.jsx(fs,{value:c,children:e.jsx(L.table,{ref:b,__css:{tableLayout:E,...c.table},className:Be("chakra-table",f),..._})})});De.displayName="Table";var ys=v((i,b)=>{const c=N();return e.jsx(L.tr,{...i,ref:b,__css:c.tr})}),ws=v((i,b)=>{const c=N();return e.jsx(L.tbody,{...i,ref:b,__css:c.tbody})}),R=v(({isNumeric:i,...b},c)=>{const f=N();return e.jsx(L.td,{...b,ref:c,__css:f.td,"data-is-numeric":i})});const Ss="/assets/sentarrow-195623c8.svg",Cs=d.lazy(()=>I(()=>import("./index-03dd6a38.js"),["assets/index-03dd6a38.js","assets/index-a17d5818.js","assets/index-ed5220eb.css","assets/index-e970c13b.js","assets/countries-020c4914.js","assets/chunk-3RSXBRAN-8faf8567.js"])),Ds=d.lazy(()=>I(()=>import("./index-e64147cd.js"),["assets/index-e64147cd.js","assets/index-a17d5818.js","assets/index-ed5220eb.css"])),Rs=d.lazy(()=>I(()=>import("./index-a17d5818.js").then(i=>i.cR),["assets/index-a17d5818.js","assets/index-ed5220eb.css"])),_s=d.lazy(()=>I(()=>import("./index-d261404d.js"),["assets/index-d261404d.js","assets/index-a17d5818.js","assets/index-ed5220eb.css"])),Vs=()=>{var G,V,W,H,Q,Y,X,U,J,K,Z,q,ee,se,re,ae,ne,te,oe,le,de,ie,ce,xe,he,pe,be,me,ue,ge,je,fe,ye;let i=Ge();Ve();const{root:b,font:c,font1:f,font3:E,smallButton1:_,root2:Re,nameStyles:$,graphBox:_e}=As(),{id:y}=We(),{state:r}=He(),[Ae,Te]=d.useState([]);z(s=>s==null?void 0:s.authReducer);const{reward_type_product:O}=z(s=>s.productReducer),{data:w}=Qe({startDate:new Date("05-06-2022").toISOString(),endDate:new Date("11-11-2023").toISOString()},{refetchOnMountOrArgChange:!0}),{user_data:m,my_debit_credit:Ts,my_rewards:ks,my_rewards_loading:vs,my_debit_credit_single:Ls}=z(s=>s==null?void 0:s.userReducer),D=w&&Ce(w==null?void 0:w.data)[y],[ke,Is]=d.useState(!1),{data:u,isLoading:Es}=Ye({page:1,limit:4,brandId:y},{refetchOnMountOrArgChange:!0,skip:!y}),{data:h,error:Os}=Xe({id:y},{refetchOnFocus:!0,skip:!y}),ve={"Last 7 days":{label:"Last 7 days",millisecondsAgo:60*60*24*7*1e3},"Last 30 days":{label:"Last 30 days",millisecondsAgo:60*60*24*30*1e3},"Last 3 days":{label:"Last 3 days",millisecondsAgo:60*60*24*3*1e3}},Le={startDate:(s=>{const a=Date.now()-s;return new Date(a).toISOString()})(ve["Last 7 days"].millisecondsAgo),endDate:new Date().toISOString(),dateRangeString:"Last 7 days"},[M,Fs]=d.useState(Le),Ie=async()=>{var x,p;if(!((x=m==null?void 0:m.customer)!=null&&x.walletAddress))return;const{data:s}=await as.get_account_detail({address:(p=m==null?void 0:m.customer)==null?void 0:p.walletAddress}),a=[];for(const t in s.result.balance)a.push({contractAddress:ns(t),balance:ts(s.result.balance[t])});const o=O==null?void 0:O.map(t=>{const Fe=a==null?void 0:a.find(Pe=>Pe.contractAddress===(t==null?void 0:t.contractAddress));return{...t,balance:Fe}});Te(o==null?void 0:o.filter(t=>t.balance))};d.useEffect(()=>{Ie()},[]),we();const{isOpen:Ps,onOpen:Ee,onClose:Ns}=we();ds.register(is,cs,xs,hs,ps,bs,ms,us);const Oe={type:"line",responsive:!0,stepped:"middle",elements:{point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}},scales:{x:{ticks:{autoSkip:!0},grid:{display:!1}},y:{min:0,ticks:{autoSkip:!0,maxTicksLimit:10},border:{display:!1},grid:{color:"#99999935"}}},plugins:{legend:{display:!1},title:{display:!1,text:"Chart.js Line Chart"}}};new Date().getMonth();const B=js(),ze=D?{labels:[new Date(M.startDate).toDateString(),new Date(M.endDate).toDateString()],datasets:[{data:D.reduce((s,a,o)=>{const x=a.transactionType==="CREDIT"?parseFloat(a.amount):-parseFloat(a.amount),t=((s==null?void 0:s.length)===0?0:s[(s==null?void 0:s.length)-1])+x;return s.push(t),s},[]),fill:!1,label:(W=(V=(G=D[0])==null?void 0:G.rewardRegistry)==null?void 0:V.reward)==null?void 0:W.rewardName,borderColor:`#${((Y=(Q=(H=D[0])==null?void 0:H.rewardRegistry.reward)==null?void 0:Q.brand)==null?void 0:Y.color)||B}`,backgroundColor:`#${((J=(U=(X=D[0])==null?void 0:X.rewardRegistry.reward)==null?void 0:U.brand)==null?void 0:J.brandPrimaryColor)||B}`,borderWidth:2}]}:{labels:[],datasets:[]};let g=Ce(w==null?void 0:w.data)[r.brandId]||[];return e.jsxs(l,{flexDir:"column",children:[e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(Rs,{})}),e.jsx(Ue,{children:e.jsxs(A,{...b,children:[e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(Ds,{breadcrumbs:[{name:"Home",link:`${C}/dashboard`},{name:"Assets",link:`${C}/dashboard/dashboard-my-assets`},{name:(Z=(K=h==null?void 0:h.data)==null?void 0:K.name)==null?void 0:Z.replaceAll("_"," "),link:`${C}/dashboard/dashboard-my-assets/${y}`,isCurrentPage:!0}]})}),e.jsxs(l,{...Re,children:[e.jsxs(l,{flexDir:"column",children:[e.jsxs(n,{...c,children:["Learn more about your personalized ",r.rewardName," card"]}),e.jsx(j,{}),e.jsx(n,{...f,mb:"10px",children:(ee=(q=r==null?void 0:r.reward)==null?void 0:q.brand)==null?void 0:ee.description}),e.jsx(F,{children:e.jsx(T,{as:"button",..._,onClick:()=>{var s,a,o,x,p,t;return i(`${C}/dashboard/shop/${(s=h==null?void 0:h.data)==null?void 0:s.id}`,{state:{id:(o=(a=r==null?void 0:r.reward)==null?void 0:a.brand)==null?void 0:o.id,slug:(p=(x=r==null?void 0:r.reward)==null?void 0:x.brand)==null?void 0:p.slug,brandName:(t=r==null?void 0:r.reward)==null?void 0:t.brandName}})},children:e.jsx(n,{...c,children:"Learn more"})})})]}),e.jsx(j,{}),e.jsx(T,{style:{transform:"rotate(-35deg) translateX(60px) translateY(40px)"},children:e.jsx(ls,{logo:((se=r==null?void 0:r.brand)==null?void 0:se.white_logo)||((re=r==null?void 0:r.brand)==null?void 0:re.logo),bg:(ne=(ae=r==null?void 0:r.reward)==null?void 0:ae.brand)!=null&&ne.color?`#${(oe=(te=r==null?void 0:r.reward)==null?void 0:te.brand)==null?void 0:oe.color}`:"#363636",userName:`${(le=m==null?void 0:m.customer)==null?void 0:le.name}`})})]}),e.jsxs(l,{..._e,flexDir:"column",children:[e.jsxs(F,{h:"50px",w:"100%",children:[e.jsx(T,{borderColor:`#${(ie=(de=r==null?void 0:r.reward)==null?void 0:de.brand)==null?void 0:ie.color}`,borderWidth:"2px",p:"3px",borderRadius:50,children:e.jsx(Je,{as:"img",objectFit:"contain",src:((ce=r==null?void 0:r.brand)==null?void 0:ce.white_logo)||((xe=r==null?void 0:r.brand)==null?void 0:xe.logo),w:"50px",h:"50px",borderRadius:"70px"})}),e.jsx(n,{color:"white",fontSize:"18px",children:(he=r==null?void 0:r.reward)==null?void 0:he.rewardName}),e.jsx(j,{})]}),e.jsxs(F,{h:"50px",w:"100%",mt:"20px",children:[e.jsxs(A,{children:[e.jsxs(n,{fontSize:["14px","14px","14px","18px","16px"],color:"white",children:[(be=(pe=Ae.filter(s=>{var a;return((a=s==null?void 0:s.brand)==null?void 0:a.id)===y}))==null?void 0:pe.map(s=>{var a;return Number((a=s==null?void 0:s.balance)==null?void 0:a.balance)}))==null?void 0:be.reduce((s,a)=>s+a,0).toLocaleString()," ","pts"]}),e.jsx(n,{fontSize:"14px",color:"#999999C5",children:"Balance"})]}),e.jsx(j,{})]}),e.jsx(j,{}),e.jsxs(l,{bg:"#262626",borderRadius:"8px",h:"70%",w:"100%",p:"1%",alignSelf:"flex-end",flexDir:"column",children:[e.jsxs(l,{w:"100%",h:"3vw",align:"center",children:[e.jsx(n,{color:"white",children:ke?"Percentage allocation":"Historic Progress"}),e.jsx(j,{})]}),e.jsx(l,{alignItems:"flex-end",justifyContent:"flex-end",h:"90%",w:"100%",children:e.jsx(gs,{width:1180,height:250,options:Oe,data:ze})})]})]}),e.jsxs(l,{w:"100%",pt:"40px",children:[e.jsx(n,{...$,children:"Last transactions"}),e.jsx(j,{}),e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(Ke,{label:"Sort",children:[1,2,3,4,5].map(s=>d.createElement(Ze,{as:"button",...c,key:P()},e.jsx(n,{textAlign:"left",children:s})))})})]}),e.jsxs(l,{flexDir:"column",children:[g&&(g==null?void 0:g.length)===0&&e.jsxs(A,{...b,align:"center",children:[e.jsx(Se,{animationData:os,style:{height:300}}),e.jsx(n,{pt:"3%",fontSize:"18px",fontWeight:"600",children:"You currently have no transactions"})]}),g&&(g==null?void 0:g.length)>0&&e.jsx(De,{variant:"simple",children:e.jsx(ws,{children:g.map(s=>{var a,o;return e.jsxs(ys,{children:[e.jsx(R,{w:"10%",children:e.jsxs(l,{flexDir:"column",children:[e.jsx(n,{children:k(s==null?void 0:s.updatedAt).format("MMM DD")}),e.jsx(n,{children:k(s==null?void 0:s.updatedAt).format("hh:ss a")}),e.jsx(n,{...f})]})}),e.jsx(R,{width:"5%",children:e.jsx(l,{borderRadius:"md",bg:"black",w:10,h:10,justifyContent:"center",alignItems:"center",transform:(s==null?void 0:s.transactionType)==="CREDIT"?"rotate(180deg)":"rotate(360deg)",children:e.jsx(qe,{src:Ss})})}),e.jsx(R,{w:"20%",children:e.jsxs(l,{flexDir:"column",alignItems:"flex-start",children:[e.jsxs(n,{children:[(s==null?void 0:s.transactionType)==="CREDIT"?"Received":"Spent"," ",r==null?void 0:r.rewardSymbol]}),e.jsx(n,{...f,children:"Completed"})]})}),e.jsx(R,{w:"12%",children:e.jsxs(A,{w:"98%",alignItems:"flex-start",children:[e.jsx(n,{alignSelf:"flex-end",color:"#999999",textAlign:"right",children:"From"}),e.jsx(n,{children:(o=(a=s==null?void 0:s.rewardRegistry)==null?void 0:a.reward)==null?void 0:o.contractAddress})]})}),e.jsx(R,{children:e.jsx(l,{flexDir:"column",children:e.jsxs(n,{...E,textAlign:"right",textColor:(s==null?void 0:s.transactionType)==="CREDIT"?"green":"red",children:[(s==null?void 0:s.transactionType)==="CREDIT"?parseFloat(s==null?void 0:s.amount):parseFloat(s==null?void 0:s.amount)*-1,r==null?void 0:r.rewardSymbol]})})})]},P())})})})]}),e.jsxs(l,{w:"100%",pt:"40px",children:[e.jsxs(n,{...$,children:["Offer from ",(me=h==null?void 0:h.data)==null?void 0:me.name]}),e.jsx(j,{}),e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(l,{children:e.jsx(T,{as:"button",..._,onClick:()=>{var s,a,o,x,p,t;return i(`${C}/dashboard/shop/${(s=h==null?void 0:h.data)==null?void 0:s.id}`,{state:{id:(o=(a=r==null?void 0:r.reward)==null?void 0:a.brand)==null?void 0:o.id,slug:(p=(x=r==null?void 0:r.reward)==null?void 0:x.brand)==null?void 0:p.slug,brandName:(t=r==null?void 0:r.reward)==null?void 0:t.brandName}})},children:e.jsx(n,{...c,children:"Visit shop"})})})})]}),e.jsx(es,{columns:[2,2,3,4,4],spacingX:"3.5%",w:"100%",children:e.jsxs(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:[((ue=u==null?void 0:u.data)==null?void 0:ue.offers)&&((je=(ge=u==null?void 0:u.data)==null?void 0:ge.offers)==null?void 0:je.length)<1&&e.jsxs(ss,{children:[e.jsx(l,{w:"500px",h:"300px",children:e.jsx(Se,{animationData:rs,loop:!0,autoplay:!0,width:50,height:70})}),e.jsxs(n,{children:["You have not synced any reward,"," ",e.jsx(n,{as:"button",onClick:Ee,decoration:"underline",children:"sync now"})]})]}),(ye=(fe=u==null?void 0:u.data)==null?void 0:fe.offers)==null?void 0:ye.map((s,a)=>{var o,x,p;return e.jsx(_s,{isLoaded:!0,productTitle:s.name,points:`${s==null?void 0:s.tokens}${(o=s.reward)==null?void 0:o.rewardSymbol}`,productSubtitle:(p=(x=s.product)==null?void 0:x.category)==null?void 0:p.name,price:s.originalPrice.toLocaleString(),isNew:k(k()).diff(s==null?void 0:s.createdAt,"days")<1,rest:{...s},i:a,bgImage:s.offerImages,onClick:()=>i(`${C}/productDetails/${s==null?void 0:s.offerCode}`)},P())})]})})]})}),e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(Cs,{})})]})},As=()=>({root:{w:"100%",mt:"108px",pt:"3%",overflow:"hidden",pb:"3%"},root2:{bg:"#F2F2F2",h:"174px",w:"100%",borderRadius:"16px",p:"2%",overflow:"hidden"},nameStyles:{fontSize:["20px","20px"]},search:{w:"18%",h:"40px",background:"#F6F6F6",borderRadius:"53px",justify:"flex-start",align:"center",pl:"1%"},button:{w:{base:"18%",md:"6%"},color:"dark",borderWidth:.5,backgroundColor:"light",fontSize:"15px"},loadMore:{w:"132px",h:"32px",alignSelf:"center",py:"10px",borderRadius:"100px"},font:{fontSize:"16px",lineHeight:"22px",color:"#000000",marginBottom:"5px"},smallButton:{w:"95px",h:"42px",bg:"#000000",borderRadius:"100px"},smallButton1:{w:"124px",h:"42px",p:"10px 16px",border:"1px",borderColor:"#000000",borderRadius:"100px",color:"#000000"},font1:{fontSize:"14px",lineHeight:"17px",color:"#999999"},font2:{fontSize:"18px",lineHeight:"22px",color:"#FFFFFF"},font3:{fontSize:"16px",lineHeight:"22px",color:"#E71C1C"},graphBox:{bg:"dark",w:"100%",h:"35vw",borderRadius:"16px",p:"20px"}});export{Vs as default,As as useDashboardAssetsSingleBrand};
