import{r as t,_ as y,u as C,b as O,g as P,B as v,j as s,v as D,h as G,F as E,i as z,P as V,H,w as I,S as p,C as S,G as m,x as X,y as _,n as B,V as J,z as M,A as N,T as U,l as q,E as K,J as Q,t as W}from"./index-d1ffda34.js";t.lazy(()=>y(()=>import("./index-d1ffda34.js").then(i=>i.d0),["assets/index-d1ffda34.js","assets/index-ed5220eb.css"]));const Y=t.lazy(()=>y(()=>import("./index-8b37fcc8.js"),["assets/index-8b37fcc8.js","assets/index-d1ffda34.js","assets/index-ed5220eb.css"])),as=({categoryName:i,category_id:b,HeaderShown:R=!0,rest:F,loaded:$,selectedBrandId:l,selectedSortId:r})=>{let u=C();O();const{nameStyles:h,button:Z,loadMore:k}=W(),[x,L]=t.useState(1),[o,w]=t.useState([]);t.useState(!1);const[T,f]=t.useState(!1);t.useState(1);const[d,g]=t.useState(!1);t.useEffect(()=>{A()},[x,l,r]);async function A(){var a,c,n;g(!0),f(!1),console.log(r);try{const{data:e}=await P.get(`${v}/store/offer?page=${x}&limit=8&category=${b}${l?`&brandId=${l}`:""}${r?`&sort=${r}`:""}`);((a=e==null?void 0:e.data)==null?void 0:a.offers.length)<1&&f(!0),w(l||r?[...(c=e==null?void 0:e.data)==null?void 0:c.offers]:[...o,...(n=e==null?void 0:e.data)==null?void 0:n.offers])}catch(e){console.log(e,"GET_CATEGORIES_OFFERS_ERR")}finally{g(!1)}}return(o==null?void 0:o.length)<=0,s.jsx(D,{borderRadius:"20px",isLoaded:$,children:s.jsxs(G,{children:[R&&s.jsxs(E,{w:"100%",pt:"20px",children:[s.jsxs(z,{children:[s.jsx(V,{}),s.jsx(H,{...h,children:i})]}),s.jsx(I,{}),s.jsx(t.Suspense,{fallback:s.jsx(p,{size:"sm"}),children:s.jsx(S,{bg:"dark",color:"white",px:"15px",py:"5px",as:"button",onClick:()=>u(`${m}/dashboard/category/${i}`,{state:F}),...h,children:"SEE ALL OFFERS"})})]}),s.jsx(X,{columns:[2,2,3,4,4],spacingX:["35px","35px","35px","15px","35px"],w:"100%",children:s.jsx(t.Suspense,{fallback:s.jsx(p,{size:"sm"}),children:o==null?void 0:o.map((a,c)=>{var n,e,j;return s.jsx(Y,{isLoaded:!d,productTitle:a.name,points:`${a==null?void 0:a.tokens}${(n=a.reward)==null?void 0:n.rewardSymbol}`,productSubtitle:(j=(e=a.product)==null?void 0:e.category)==null?void 0:j.name,price:a.originalPrice,isNew:_(_()).diff(a==null?void 0:a.createdAt,"days")<1,rest:{...a},i:c,bgImage:a==null?void 0:a.offerImages,onClick:()=>u(`${m}/product-details/${a.offerCode}`)},B())})})}),o.length<1&&s.jsxs(J,{children:[s.jsx(E,{w:"500px",h:"300px",children:s.jsx(M,{animationData:N,loop:!0,autoplay:!0,width:50,height:70})}),s.jsx(U,{children:"There are no offers founds."})]}),!T&&s.jsx(S,{as:q,...k,onClick:()=>{L(x+1)},children:d?s.jsx(p,{size:"sm"}):s.jsxs(s.Fragment,{children:["Load more ",s.jsx(K,{as:Q,ml:"5%"})]})})]})})};export{as as O};
