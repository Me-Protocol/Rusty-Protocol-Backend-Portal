import{u as F,a as L,b as v,r as o,j as s,F as i,I as B,f as E,h as c,R as T,e as _,H as p,T as t,S as m,l as M,g as A,B as D,G as H}from"./index-47ecebed.js";import O from"./index-7d4c072e.js";import{u as $}from"./Login-97d43e99.js";import x from"./index-2719cd12.js";import{_ as z}from"./timer-7db66951.js";import{F as G}from"./formik.esm-8d485ac0.js";import N from"./index-98928bea.js";import"./index.esm-f5522c24.js";import"./chunk-I5V4ORUK-834e97e8.js";const U=()=>{let h=F();const u=L(),w=v(),{root:g,boxLeft:f,boxLogin:j,leftImg:b,loginColumn:S,head:l,desc:n,basedText:k}=$();o.useState("566");const y=()=>{console.log("button clicked")},[a,P]=o.useState(!1),[R,d]=o.useState(!1),I=()=>P(!a),C=async({password:r},V)=>{d(!0);try{const{data:e}=await A.post(`${D}/users/password/reset-by-email`,{token:window.location.href.substring(window.location.href.indexOf("=")+1),newPassword:r});e!=null&&e.isReset&&(h(`${H}/login`),w({position:"top",title:"Password changed",description:"Password updated successfully, please login with your new password",status:"success",duration:9e3,isClosable:!0}))}catch(e){console.log(e,"ChangePwdErr")}finally{d(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(O,{}),s.jsxs(i,{...g,children:[s.jsx(i,{...f,children:s.jsx(B,{src:E.AuthImage,alt:"Me Protocol",...b})}),s.jsx(i,{px:"15px",py:"3rem",...j,children:s.jsx(c,{...S,children:window.location.href.indexOf("token=")>-1?s.jsx(s.Fragment,{children:s.jsx(G,{initialValues:{password:"",confirm:""},validationSchema:T,onSubmit:C,children:r=>s.jsxs(c,{as:"form",onChange:()=>u(_()),onSubmit:r.handleSubmit,w:{base:"100%",md:"35vw"},children:[s.jsx(p,{...l,pb:2,children:"Create new password"}),s.jsx(t,{...n,children:"Please provide and confirm a new password"}),s.jsxs(o.Suspense,{fallback:s.jsx(m,{size:"sm"}),children:[s.jsx(x,{name:"password",type:a?"text":"password",placeholder:"Password"}),s.jsx(x,{name:"confirm",type:a?"text":"password",placeholder:"Confirm Password"})]}),s.jsx(t,{as:M,onClick:I,alignSelf:"flex-end",...k,pt:"0px",bg:"transparent",_hover:{bg:"transparent"},children:a?"Hide":"Show"}),s.jsx(o.Suspense,{fallback:s.jsx(m,{size:"sm"}),children:s.jsx(N,{isLoading:R,name:"Change password"})})]})})}):s.jsxs(s.Fragment,{children:[s.jsx(p,{...l,pb:2,children:"Reset password"}),s.jsx(t,{...n,children:"An email containing a password reset link has been sent to your email, please go to your email and click on the link change your password."}),s.jsxs(t,{flexDir:"row",...n,textDecoration:"underline",children:["My link didn't arrive? Resend link in"," ",s.jsx(z,{minutes:1,seconds:1,text:" ",ButtonText:"Resend",resend:y,background:"black"})]})]})})})]})]})},es=U;export{es as default};
