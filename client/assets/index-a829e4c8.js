import{u as T,a as V,c as A,r as t,j as e,F as i,I as D,f as H,h as U,H as _,T as d,i as G,n as W,L as N,g as b,B as L,s as O,k as X,G as P}from"./index-ad3125b8.js";import Y from"./index-b7ad643f.js";import q from"./index-28ddb5b6.js";import{u as z}from"./Login-30423e73.js";import{P as J,a as K}from"./chunk-I5V4ORUK-4869b116.js";import"./formik.esm-229b8fc7.js";import"./index.esm-bd7d844b.js";const Q=()=>{let l=T();const h=V(),{state:o}=A(),{root:C,boxLeft:S,boxLogin:w,leftImg:E,loginColumn:F,head:$,desc:n}=z();t.useState(!0);const[a,u]=t.useState(""),[B,p]=t.useState(!1),[x,g]=t.useState("");t.useEffect(()=>{},[]);async function M(){var r,f,m,j,I,k,v,y;if(!(a.length<5)){p(!0);try{const{data:s}=await b.post(`${L}/users/phone/verify`,{userId:(f=(r=o==null?void 0:o.state)==null?void 0:r.user)==null?void 0:f.userId,phone:o==null?void 0:o.value,phoneCode:a});if((m=s==null?void 0:s.isVerified)!=null&&m.token&&s){h(O(s==null?void 0:s.isVerified)),h(X({token:(j=s==null?void 0:s.isVerified)==null?void 0:j.token}));let R={method:"get",url:`${L}/pointregistry`,headers:{"x-access-token":`${(I=s==null?void 0:s.isVerified)==null?void 0:I.token}`}};const{data:c}=await b(R);((k=c==null?void 0:c.userPoints)==null?void 0:k.length)<1?l(`${P}/syncRewards`):l(`${P}/dashboard`)}}catch(s){g((y=(v=s==null?void 0:s.response)==null?void 0:v.data)==null?void 0:y.error)}finally{p(!1),u("")}}}return e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsxs(i,{...C,children:[e.jsx(i,{...S,children:e.jsx(D,{src:H.AuthImage,alt:"Me Protocol",...E})}),e.jsx(i,{px:"15px",py:"3rem",...w,children:e.jsxs(U,{...F,w:{base:"100%",md:"40vw"},children:[e.jsx(_,{...$,pb:2,children:"We sent you a verification code"}),e.jsx(d,{...n,children:"You have to give it back, though."}),e.jsx(G,{w:"100%",h:"60px",children:e.jsx(J,{onComplete:r=>{u(r),g("")},otp:!0,placeholder:"*",children:[1,2,3,4,5,6].map(()=>e.jsx(K,{bg:"grey",borderRadius:10,borderWidth:0,w:"14%",h:"100%"},W()))})}),x&&e.jsx(d,{...n,color:"red",children:x}),e.jsx(i,{w:"35vMax",children:e.jsx(Y,{isLoading:B,onClick:M,isDisabled:a.length<5,name:"That's the code"})}),e.jsxs(d,{...n,pt:"10px",children:["Didnâ€™t receive the code?"," ",e.jsxs(N,{href:"#",textDecoration:"underline",children:[" ","Send it again."]})]})]})})]})]})},ne=Q;export{ne as default};
