import{d as v,j as e,F as d,al as T,T as l,h as E,M as Ge,n as G,r as i,S as C,bD as he,H as U,i as ie,I as M,f as Z,b9 as fe,l as De,C as I,g as me,B as je,a as be,b2 as Je,o as re,J as ce,k as de,b as ge,bi as Ye,bj as qe,V as Pe,bm as Fe,a1 as oe,N as xe,bn as He,$ as B,ai as pe,c1 as Qe,c2 as Xe,c3 as Ke,u as Te,c4 as Ze,E as te,c5 as es,c6 as ss,D as ns,c7 as as,_ as le,c as is,Q as ts,bg as ls,X as K,aW as os,c8 as rs,c9 as cs,z as ne,G as ae,ca as ds,v as xs}from"./index-a7360b5a.js";import{L as hs}from"./index-f0b30aef.js";import{A as Be,a as $e,b as We,c as Ne,d as Ve}from"./chunk-CRBMUVJA-9863ebf7.js";import{s as fs}from"./spinning_loader-158d8410.js";import{S as ms}from"./chunk-3RSXBRAN-098486ba.js";import{P as js,a as bs}from"./chunk-I5V4ORUK-3119ae82.js";import{a as gs,b as ps}from"./index.esm-3c2625a1.js";import{S as us}from"./chunk-W7A7QDAK-dbeb050c.js";import{L as Me}from"./chunk-K7XRJ7NL-fdd767ed.js";const ws=({reviews:a})=>{var n,r;const{user_data:h}=v(c=>c.userReducer);return e.jsx(d,{width:"90%",flexDir:"column",children:e.jsx(Be,{defaultIndex:[3],allowMultiple:!0,children:e.jsxs($e,{borderWidth:0,mb:5,children:[e.jsx("h2",{children:e.jsxs(We,{_hover:{},borderWidth:0,px:0,children:[e.jsx(T,{flex:"1",textAlign:"left",children:e.jsxs(l,{fontSize:"20px",children:["Reviews(",((n=a==null?void 0:a.reviews)==null?void 0:n.length)||0,")"]})}),e.jsx(Ne,{zIndex:-10})]})}),e.jsx(Ve,{px:"0px",children:e.jsx(d,{flexDir:"column",align:"flex-start",children:(r=a==null?void 0:a.reviews)==null?void 0:r.map(c=>{var m;return e.jsxs(E,{align:"flex-start",mb:"20px",children:[e.jsx(l,{fontSize:"16px",fontWeight:400,mb:"5px",children:c==null?void 0:c.title}),e.jsxs(d,{align:"center",children:[e.jsxs(l,{ml:"5px",fontSize:"10px",color:"#999999",children:[(m=h==null?void 0:h.customer)==null?void 0:m.firstName," −"]}),e.jsx(l,{ml:"5px",fontSize:"10px",color:"#999999",children:Ge(c==null?void 0:c.created_at).format("DD MMM YYYY")})]}),e.jsx(l,{fontSize:"12px",children:c==null?void 0:c.review})]},G())})})})]},G())})})},ys=({redeemOnOpen:a,redeemIsOpen:h,redeemOnClose:n,product:r,restFns:c})=>{var b;const{token:m}=v(s=>s.authReducer),[j,u]=i.useState(!1);async function f(){u(!0);try{u(!0);const{status:s}=await me.post(`${je}/redeem`,{offerId:r==null?void 0:r.id,amount:r==null?void 0:r.point_discount,quantity:1},{headers:{Authorization:`Bearer ${m}`}});setTimeout(()=>{s===200&&(c(),n(),u(!1))},2e3)}catch(s){console.log(s,"SIMULATE_REDEEM_ERR"),u(!1)}finally{}}return e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(he,{isOpen:h,onClose:n,closeOnOverlayClick:!1,children:e.jsxs(E,{children:[e.jsx(U,{fontSize:"14px",children:"Redeem now"}),e.jsx(l,{pt:"5px",pb:"20px",children:"You are about to be redirected to the official brand's website to complete your purchase process."}),e.jsxs(ie,{w:"100%",justifyContent:"center",children:[e.jsx(M,{src:Z.appLogo,w:"50px",h:"50px",borderRadius:"70px",objectFit:"contain",bg:"#9999993B"}),j?e.jsx(fe,{style:{width:"50px",height:"50px"},animationData:fs,loop:!0,autoplay:!0}):e.jsx(l,{children:"-------------------connect-------------------"}),e.jsx(M,{src:(b=r==null?void 0:r.brand)==null?void 0:b.logo,w:"50px",h:"50px",borderRadius:"70px",objectFit:"contain",bg:"#9999993B"})]}),e.jsx(De,{isLoading:j,bg:"dark",mt:"3%",color:"white",h:"40px",borderRadius:0,_hover:{bg:"dark"},onClick:()=>{var s;((s=r==null?void 0:r.reward)==null?void 0:s.rewardType)==="REGULARPOINTS"&&f()},children:e.jsx(l,{children:"Continue"})}),e.jsx(I,{bg:"light",color:"dark",h:"40px",borderWidth:1,mt:"2px",onClick:()=>{u(!1),n()},as:"button",children:e.jsx(l,{children:"Cancel"})})]})})})},Ss=({isOpenModal:a,onCloseModal:h,restFns:n})=>{const r=be(),{token:c}=v(x=>x.authReducer),[m,j]=i.useState(""),[u,f]=i.useState(!1),[b]=Je();async function s(){m&&(f(!0),await b({name:m}).then(async({data:x})=>{x.status===200&&(await r(de({token:c})),h(),n())}).catch(x=>{}).finally(()=>{f(!1),j("")}))}return e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(he,{isOpen:a,onClose:h,closeOnOverlayClick:!1,children:e.jsxs(E,{children:[e.jsx(l,{children:"Create new collection"}),e.jsx(re,{variant:"outline",my:"2vw",h:"40px",_placeholder:{color:"#cfcfcf"},borderRadius:0,placeholder:"Collection name",value:m,onChange:({target:x})=>{j(x.value)}}),e.jsx(ce,{}),e.jsx(De,{isLoading:u,bg:"dark",color:"white",h:"40px",borderRadius:0,_hover:{bg:"dark"},onClick:s,disabled:!m,children:e.jsx(l,{children:"Next"})}),e.jsx(I,{bg:"light",color:"dark",h:"40px",borderWidth:1,mt:"2px",onClick:h,as:"button",children:e.jsx(l,{children:"Cancel"})})]})})})},Cs=({product:a,onClose3:h,isOpen3:n,restFns:r})=>{const{desc:c,search:m,head:j}=ks(),u=ge(),[f,b]=i.useState(""),[s,x]=i.useState(""),[J,y]=i.useState(0),[p,R]=i.useState(""),[$,_]=i.useState(!1),[Y,ee]=i.useState(""),[O,A]=i.useState(""),[W,N]=i.useState(!1),[se,z]=i.useState(!1),[q]=Ye(),[H]=qe();async function V(){var w;f.includes("@")&&(z(!0),await H({rewardId:(w=a==null?void 0:a.reward)==null?void 0:w.id,emailCode:s}).then(t=>{var S,P,F;if(t.error){R((P=(S=t==null?void 0:t.error)==null?void 0:S.data)==null?void 0:P.error);return}(F=t==null?void 0:t.data)!=null&&F.synced&&(B(u,"Brand connected successfully"),setTimeout(()=>{r(),x(""),b(""),_(!1),y(2)},300))}).catch(t=>{console.log(t,"SendEmailVerificationForSyncERR")}).finally(()=>{z(!1)}))}async function Q(){var w;f.includes("@")&&(N(!0),await q({rewardId:(w=a==null?void 0:a.reward)==null?void 0:w.id,email:f}).then(t=>{t!=null&&t.data&&(_(!0),B(u,"OTP sent successfully"))}).catch(t=>{console.log(t,"ERR")}).finally(()=>{N(!1)}))}const D=()=>{var w,t,S,P,F,X;switch(J){case 0:return e.jsxs(E,{children:[e.jsxs(d,{flexDir:"row",justify:"space-between",children:[e.jsxs(U,{...j,children:["Sync ",(w=a==null?void 0:a.reward)==null?void 0:w.name," Rewards"]}),e.jsx(I,{as:"button",onClick:h,children:e.jsx(M,{w:"30px",h:"30px",src:Z.cancel_icon})})]}),e.jsxs(d,{flexDir:"row",align:"center",justify:"space-between",py:"2%",children:[e.jsxs(I,{w:"100px",h:"100px",overflow:"hidden",children:[e.jsx(M,{borderRadius:"10px",objectFit:"contain",src:(t=a==null?void 0:a.reward)==null?void 0:t.rewardImage}),e.jsx(T,{w:"100px",h:"100px",borderRadius:"100px",pos:"absolute",bg:"#9999992D"})]}),e.jsx(l,{...c,noOfLines:4,w:"100%",pl:"3%",children:(S=a==null?void 0:a.brand)==null?void 0:S.description})]}),e.jsx(U,{...j,children:"What you’ll get"}),e.jsx(d,{flexDir:"column",bg:"#f6f6f6",p:"5%",borderRadius:"15px",children:[`Authorize Me app to access your reward balance with ${(P=a==null?void 0:a.brand)==null?void 0:P.brandName}`,`Me app will Read reward balance from ${(F=a==null?void 0:a.brand)==null?void 0:F.brandName}`,"Me app will monitor changes in reward balance "].map(g=>e.jsxs(d,{children:[e.jsx(I,{bg:"#000000",w:"20px",h:"20px",borderRadius:"20px",children:e.jsx(xe,{as:He,color:"light"})}),e.jsx(l,{...c,noOfLines:2,pl:"2%",w:"100%",children:g})]},G()))}),e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(oe,{isLoading:W,onClick:()=>y(1),name:`Connect with ${((X=a==null?void 0:a.reward)==null?void 0:X.rewardName)||"reward"}`})})]});case 1:return e.jsxs(E,{children:[e.jsxs(d,{flexDir:"row",justify:"space-between",children:[e.jsx(U,{...j,children:"Verify identity "}),e.jsx(I,{as:"button",onClick:()=>{y(0),h(),A(""),_(!1),R("")},children:e.jsx(M,{src:Z.cancel_icon,w:"30px",h:"30px"})})]}),e.jsx(l,{...c,w:"100%",pt:"1%",children:"Please select your preferred means of identification from the available options below"}),e.jsx(d,{...m,children:e.jsx(ms,{color:"dark",onChange:({target:g})=>{A(g.value)},value:O,variant:"unstyled",placeholder:"Select verification option",size:"md",_placeholder:{color:"#999999"},children:["Email","Phone number"].map(g=>e.jsx("option",{value:g,children:g},G()))})}),O&&e.jsx(E,{children:O==="Email"?e.jsx(re,{...m,value:f,onChange:g=>{b(g.target.value)},placeholder:"Enter email address"}):e.jsx(re,{...m,value:Y,onChange:g=>{ee(g.target.value)},placeholder:"Enter phone number"})}),$&&e.jsxs(T,{my:"3%",children:[e.jsx(l,{fontSize:"10px",children:"Please provide the OTP sent to your inbox"}),e.jsx(ie,{w:"100%",h:"60px",children:e.jsx(js,{onComplete:g=>{x(g),R("")},otp:!0,placeholder:"*",children:[1,2,3,4,5,6].map(()=>e.jsx(bs,{bg:"grey",borderRadius:10,borderWidth:0,w:"15%",h:"100%"},G()))})})]}),p&&e.jsx(l,{...c,color:"red",children:p}),e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(oe,{isLoading:se||W,onClick:()=>{if($){V();return}Q()},isDisabled:!f.includes("@"),name:"Continue"})})]});case 2:return e.jsx(E,{w:"100%",children:e.jsxs(Pe,{children:[e.jsx(fe,{style:{width:"150px",height:"150px"},animationData:Fe,loop:!1,autoplay:!0}),e.jsx(U,{fontSize:"18px",pb:"10px",children:"Brand connected successfully"}),e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(oe,{name:"Ok",onClick:()=>{y(0),h(),A(""),_(!1),R(""),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}})})]})})}};return e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(he,{isOpen:n,onClose:h,closeOnOverlayClick:!1,children:D()})})},ks=()=>({desc:{pb:"5px",fontSize:{base:"12px",md:"15px"},w:{base:"100%",md:"80%"}},search:{w:"100%",h:"40px",background:"#F6F6F6",borderRadius:"53px",justify:"flex-start",align:"center",pl:"2%",borderWidth:"0px",_placeholder:{color:"#999999"},_focus:{borderColor:"black"},mt:"1%",mb:"2%"},head:{fontSize:{base:"12px",md:"14px"}}});function Os(a){return pe({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"}}]})(a)}function vs(a){return pe({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"}}]})(a)}function Rs(a){return pe({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"}}]})(a)}const As=({isOpen:a,onClose:h,product:n,product_loading:r,rewardsFetching:c,onToggle:m,onOpenModal:j,onOpen3:u})=>{var V,Q,D,w;i.useRef();const f=be(),b=ge(),{token:s}=v(t=>t.authReducer),{user_data:x,user_collection:J}=v(t=>t.userReducer),{task_instruction_details:y}=v(t=>t.bountyReducer),{data:p,refetch:R,isFetching:$}=Qe({offerId:n==null?void 0:n.id},{refetchOnMountOrArgChange:!0,skip:!s||!(n!=null&&n.id)}),[_]=Xe(),[Y]=Ke();Te();const[ee,O]=i.useState(!1);i.useState(!0);const[A,W]=i.useState({});i.useState(""),i.useState([]);const{getTokenBalance:N,loading:se}=Ze(),z=(V=n==null?void 0:n.reward)==null?void 0:V.contractAddress;i.useEffect(()=>{(async()=>z&&W(await N(z)))()},[z,n]);async function q(t){O(!0),await _({collection_id:t,offerId:n==null?void 0:n.id}).then(async({data:S})=>{console.log(S,"KOIP"),S.statusCode===200&&(await R(),await f(de({token:s})),B(b,"Added to favorite",2e3,"bottom-right")),y&&f(as({task_id:y==null?void 0:y.id,token:s}))}).catch(()=>{}).finally(()=>{O(!1)})}async function H(){O(!0),await Y({offerId:n==null?void 0:n.id}).then(async({data:t})=>{console.log(t,"delete"),t.statusCode===200&&(await R(),await f(de({token:s})),B(b,"Removed from favorite",2e3,"bottom-right"))}).catch(t=>{console.log(t,"delete error")}).finally(()=>{O(!1)})}return e.jsxs(e.Fragment,{children:[s&&($?e.jsx(C,{size:"sm",my:"20px"}):e.jsxs(ie,{as:"button",my:"20px",onClick:()=>{p!=null&&p.data?H():q()},w:"15%",children:[e.jsx(xe,{w:"24px",h:"24px",as:p!=null&&p.data?gs:ps}),e.jsx(l,{children:p!=null&&p.data?"Liked":"Like"})]})),e.jsx(te,{isLoaded:!r,children:e.jsxs(d,{color:"dark",fontSize:"22px",align:"center",children:[e.jsxs(l,{children:[n==null?void 0:n.tokens," ",(Q=n==null?void 0:n.reward)==null?void 0:Q.rewardSymbol," ·"," "]}),e.jsxs(l,{color:"#999999",fontSize:"16px",ml:"5px",children:[" ",Number(n==null?void 0:n.discountPercentage),"% coupon"]})]})}),s&&((D=x==null?void 0:x.customer)==null?void 0:D.walletAddress)&&e.jsxs(l,{color:"#999999",children:["Available: ",A==null?void 0:A.balance," ",(w=n==null?void 0:n.reward)==null?void 0:w.rewardSymbol]}),e.jsx(te,{isLoaded:!r,children:e.jsx(l,{color:"dark",mt:"10px",mb:"30px",w:"75%",textAlign:"justify",children:n==null?void 0:n.description})}),e.jsxs(d,{flexDir:"column",children:[e.jsx(l,{children:"Share"}),e.jsx(ie,{w:"40%",justify:"space-between",mt:"10px",children:[{medium:"facebook",icon:es},{medium:"twitter",icon:vs},{medium:"linkedin",icon:ss},{medium:"url",icon:Os},{medium:"whatsapp",icon:Rs}].map(t=>e.jsx(d,{as:"a",mr:"3px",border:"1px solid #000000",_hover:{bg:"#F3F3F3"},borderRadius:"30px",alignItems:"center",justify:"center",width:"40px",height:"40px",cursor:"pointer",onClick:async()=>{var S;B(b,"Offer link has been copied to clipboard, you can now share",7e3,"top-left"),navigator.clipboard.writeText(`meappbounty.com/productDetails/${n==null?void 0:n.offerCode}`),await me.post(`${je}/shares`,{offer_id:n==null?void 0:n.id,medium:t.medium,user_id:(S=x==null?void 0:x.customer)==null?void 0:S.id},{headers:{Authorization:`Bearer ${s}`}})},children:e.jsx(xe,{w:"20px",h:"20px",as:t.icon})},G()))})]}),e.jsx(ns,{orientation:"horizontal",mt:"10px",mb:"20px",width:"82%",zIndex:-10})]})},Es=i.lazy(()=>le(()=>import("./index-0767d568.js"),["assets/index-0767d568.js","assets/index-a7360b5a.js","assets/index-ed5220eb.css","assets/index-784c77db.js","assets/countries-e12a8af3.js","assets/chunk-3RSXBRAN-098486ba.js","assets/chunk-K7XRJ7NL-fdd767ed.js"])),_s=i.lazy(()=>le(()=>import("./index-a7360b5a.js").then(a=>a.dc),["assets/index-a7360b5a.js","assets/index-ed5220eb.css"])),zs=i.lazy(()=>le(()=>import("./index-a7360b5a.js").then(a=>a.de),["assets/index-a7360b5a.js","assets/index-ed5220eb.css"])),Ls=i.lazy(()=>le(()=>import("./index-a7360b5a.js").then(a=>a.dd),["assets/index-a7360b5a.js","assets/index-ed5220eb.css"])),Is=()=>{var ue,we,ye,Se,Ce,ke,Oe,ve,Re,Ae,Ee,_e,ze;const a=ge();let h=Te();is();const n=be(),{id:r}=ts(),{loading:c,setUpWallet:m}=ls(),{token:j,session_id:u}=v(o=>o.authReducer),{user_data:f}=v(o=>o.userReducer),{reviews:b,product:s,product_loading:x}=v(o=>o.productReducer),{cartItems:J}=v(o=>o.cartReducer),{isOpen:y,onToggle:p,onClose:R}=K(),{isOpen:$,onOpen:_,onClose:Y}=K(),{isOpen:ee,onOpen:O,onClose:A}=K(),{isOpen:W,onOpen:N,onClose:se}=K(),{root:z,imageStyle:q,logoStyle:H}=Ms(),[V,Q]=i.useState(!0),[D,w]=i.useState(!1),[t,S]=i.useState(!1),{isOpen:P,onOpen:F,onClose:X}=K();os(),i.useEffect(()=>{s!=null&&s.id,n(rs({token:j,session_id:u,offerCode:r})),n(cs(!0))},[]),i.useEffect(()=>{J.find(k=>k.id===(s==null?void 0:s.id))&&w(!0)},[J]);function g(){return(s==null?void 0:s.inventory)<-1}const Ue=async()=>{try{const o=await m({persist:!1});o.publicAddress&&await me.put(`${je}/customer/setup-wallet-address`,{walletAddress:o.publicAddress},{headers:{Authorization:`Bearer ${j}`}}).then(({data:k})=>{j&&n(xs({token:j})),B(a,"Wallet created successfully",2e3),h(`${ae}/subsequentRedeeming`,{state:{...s}})}).catch(k=>{console.log(k,"UPDATeYUSERZRR")})}catch(o){console.log(o,"CREATE_WALLETERR")}};return e.jsxs(d,{flexDir:"column",children:[e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(_s,{})}),e.jsxs(E,{...z,display:"flex",children:[e.jsxs(d,{flexDir:"row",children:[e.jsx(d,{w:"50vw",bg:"grey",flexDir:"column",children:(ue=s==null?void 0:s.offerImages)==null?void 0:ue.map(o=>e.jsx(te,{isLoaded:V,overflow:"hidden",children:e.jsx(M,{src:o==null?void 0:o.url,objectFit:"cover",...q,mixBlendMode:"multiply"})},ne()))}),e.jsxs(d,{w:"50vw",flexDir:"column",px:"80px",py:"30px",children:[e.jsxs(d,{w:"600px",flexDir:"column",children:[e.jsx(us,{isLoaded:!x,w:"100px",h:"100px",children:e.jsx(T,{as:"button",onClick:()=>{var o,k,L;return h(`${ae}/dashboard/shop/${(o=s==null?void 0:s.brand)==null?void 0:o.id}`,{state:{id:(k=s==null?void 0:s.brand)==null?void 0:k.id,slug:(L=s==null?void 0:s.brand)==null?void 0:L.slug,brandName:s==null?void 0:s.brandName}})},children:e.jsx(M,{src:(we=s==null?void 0:s.brand)==null?void 0:we.logo,objectFit:"contain",...H,fallbackSrc:Z.appLogoPlaceholder,fallbackStrategy:"beforeLoadOrError",mixBlendMode:"multiply"})})}),e.jsx(l,{color:"#D0D0D0",fontSize:"20px",mb:"20px",textTransform:"uppercase",children:s==null?void 0:s.offerCode}),e.jsx(te,{isLoaded:!x,children:e.jsx(l,{lineHeight:"48px",w:"80%",fontSize:"40px",textTransform:"uppercase",children:s==null?void 0:s.name})}),e.jsx(As,{isOpen:y,onClose:R,product:s,product_loading:x,onToggle:p,onOpenModal:O,onOpen3:N,rewardsFetching:t})]}),((ye=b==null?void 0:b.reviews)==null?void 0:ye.length)>0&&e.jsx(ws,{reviews:b}),(Se=s==null?void 0:s.brand)!=null&&Se.online_stores||(Ce=s==null?void 0:s.brand)!=null&&Ce.physical_stores?e.jsx(d,{width:"90%",flexDir:"column",children:e.jsx(Be,{defaultIndex:[3],allowMultiple:!0,px:0,children:e.jsxs($e,{borderWidth:0,mb:5,children:[e.jsx("h2",{children:e.jsxs(We,{_hover:{},borderWidth:0,px:0,children:[e.jsx(T,{flex:"1",textAlign:"left",children:e.jsx(l,{fontSize:"20px",children:"Where to redeem"})}),e.jsx(Ne,{zIndex:-10})]})}),e.jsxs(Ve,{px:"0px",children:[((Oe=(ke=s==null?void 0:s.brand)==null?void 0:ke.online_stores)==null?void 0:Oe.length)>0&&e.jsxs(T,{children:[e.jsx(l,{color:"#AEAEAE",children:"Online stores"}),(Re=(ve=s==null?void 0:s.brand)==null?void 0:ve.online_stores)==null?void 0:Re.map((o,k)=>{var L,Le,Ie;return e.jsxs(d,{bg:k%2===0?"grey":"white",p:"5px",my:"5px",h:"40px",align:"center",children:[e.jsx(l,{children:(L=JSON.parse(o))==null?void 0:L.name}),e.jsx(ce,{}),e.jsxs(d,{children:[e.jsx(Me,{textDecoration:"underline",target:"_blank",href:`${(Le=JSON.parse(o))==null?void 0:Le.url}`,children:(Ie=JSON.parse(o))==null?void 0:Ie.url}),e.jsx(d,{w:"25px",h:"25px",ml:"5px",children:e.jsx(M,{src:Z.linkIcon})})]})]},ne())})]}),((Ee=(Ae=s==null?void 0:s.brand)==null?void 0:Ae.physical_stores)==null?void 0:Ee.length)>0&&e.jsxs(T,{children:[e.jsx(l,{color:"#AEAEAE",mt:"30px",children:"Physical stores"}),(ze=(_e=s==null?void 0:s.brand)==null?void 0:_e.physical_stores)==null?void 0:ze.map((o,k)=>{var L;return e.jsxs(d,{bg:k%2===0?"grey":"white",p:"5px",my:"5px",h:"40px",align:"center",children:[e.jsx(l,{children:(L=JSON.parse(o))==null?void 0:L.name}),e.jsx(ce,{}),e.jsx(d,{children:e.jsx(Me,{textDecoration:"underline",target:"_blank",href:"https://google.com",children:"130, Powell St, San Francisco, CA"})})]},ne())})]})]})]},ne())})}):e.jsx(e.Fragment,{}),e.jsxs(d,{justify:"space-between",children:[e.jsx(I,{as:"button",h:"80px",bg:g()?"#999999":"dark",w:"48%",color:"light",alignSelf:"center",top:"80vh",disabled:g()||c,_hover:{bg:"dark"},borderRadius:"0px",onClick:async()=>{var o;if(!j){h(`${ae}/login`);return}(o=f==null?void 0:f.customer)!=null&&o.walletAddress?h(`${ae}/subsequentRedeeming`,{state:{...s}}):await Ue()},children:c?e.jsx(C,{}):e.jsx(e.Fragment,{children:g()?"Out of stock":"Redeem now"})}),e.jsx(I,{as:"button",h:"80px",bg:"dark",w:"48%",color:"light",alignSelf:"center",top:"80vh",_hover:{bg:"dark"},borderRadius:"0px",onClick:()=>{D||B(a,"Added to cart"),n(ds({...s,quantity:1}))},children:D?"Added to bag":"Add to bag"})]})]})]}),e.jsx(Ss,{isOpenModal:ee,onCloseModal:A,restFns:()=>{y||p()}}),e.jsx(ys,{product:s,restFns:()=>{F()},redeemOnOpen:_,redeemOnClose:Y,redeemIsOpen:$}),e.jsx(Cs,{product:s,onClose3:se,isOpen3:W,restFns:()=>{}}),e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(zs,{isOpen:P,onClose:X,closeOnOverlayClick:!0,children:e.jsx(E,{w:"100%",children:e.jsxs(Pe,{children:[e.jsx(fe,{style:{width:"150px",height:"150px"},animationData:Fe,loop:!1,autoplay:!0}),e.jsx(U,{fontSize:"18px",pb:"10px",children:"Reward redeemed successfully"}),e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(Ls,{name:"Ok",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),X()}})})]})})})})]}),e.jsx(i.Suspense,{fallback:e.jsx(C,{size:"sm"}),children:e.jsx(Es,{})}),x&&e.jsx(hs,{})]})},Us=Is,Ms=()=>({root:{w:"100%",mt:"108px"},nameStyles:{fontSize:["20px","20px"]},button:{w:{base:"18%",md:"6%"},color:"dark",borderWidth:.5,backgroundColor:"light",fontSize:"15px"},loadMore:{w:"152px",h:"42px",alignSelf:"center",py:"10px",borderRadius:"100px"},imageStyle:{w:"100%"},addToFavPopOver:{w:"15vw"},logoStyle:{w:"100px",h:"100px",borderColor:"lightGrey",borderWidth:"0.5px"}});export{Us as default};
