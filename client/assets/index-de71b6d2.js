import{r as t,_,u as D,b as O,g as P,B as v,j as s,v as G,h as z,F as m,i as V,P as H,H as I,w as X,S as u,C as j,G as S,x as B,y as E,n as J,V as M,z as N,A as U,T as q,l as K,E as Q,J as W,t as Y}from"./index-9a3a3312.js";import{D as Z}from"./index-98d72f9e.js";t.lazy(()=>_(()=>import("./index-9a3a3312.js").then(i=>i.d9),["assets/index-9a3a3312.js","assets/index-56f23032.css"]));const ss=t.lazy(()=>_(()=>import("./index-ff4d1db3.js"),["assets/index-ff4d1db3.js","assets/index-9a3a3312.js","assets/index-56f23032.css"])),os=({categoryName:i,category_id:y,HeaderShown:b=!0,rest:R,loaded:F,selectedBrandId:l,selectedSortId:r})=>{let h=D();O();const{nameStyles:$,button:as,seeAllStyles:k,loadMore:w}=Y(),[x,L]=t.useState(1),[o,A]=t.useState([]);t.useState(!1);const[C,d]=t.useState(!1);t.useState(1);const[p,f]=t.useState(!1);t.useEffect(()=>{T()},[x,l,r]);async function T(){var a,c,n;f(!0),d(!1),console.log(r);try{const{data:e}=await P.get(`${v}/store/offer?page=${x}&limit=8&category=${y}${l?`&brandId=${l}`:""}${r?`&sort=${r}`:""}`);((a=e==null?void 0:e.data)==null?void 0:a.offers.length)<1&&d(!0),A(l||r?[...(c=e==null?void 0:e.data)==null?void 0:c.offers]:[...o,...(n=e==null?void 0:e.data)==null?void 0:n.offers])}catch(e){console.log(e,"GET_CATEGORIES_OFFERS_ERR")}finally{f(!1)}}return(o==null?void 0:o.length)<=0,s.jsx(G,{mb:["20px","10px"],borderRadius:"20px",isLoaded:F,children:s.jsxs(z,{children:[b&&s.jsxs(m,{w:"100%",pt:"20px",children:[s.jsxs(V,{children:[s.jsx(H,{}),s.jsx(I,{...$,children:i})]}),s.jsx(X,{}),s.jsx(t.Suspense,{fallback:s.jsx(u,{size:"sm"}),children:s.jsx(j,{bg:"dark",color:"white",px:"15px",py:"5px",as:"button",onClick:()=>h(`${S}/dashboard/category/${i}`,{state:R}),...k,children:"SEE ALL OFFERS"})})]}),s.jsx(B,{display:["none","grid"],columns:[2,2,3,4,4],spacingX:["35px","35px","35px","15px","35px"],w:"100%",children:s.jsx(t.Suspense,{fallback:s.jsx(u,{size:"sm"}),children:o==null?void 0:o.map((a,c)=>{var n,e,g;return s.jsx(ss,{isLoaded:!p||!!o,productTitle:a.name,points:`${a==null?void 0:a.tokens}${(n=a.reward)==null?void 0:n.rewardSymbol}`,productSubtitle:(g=(e=a.product)==null?void 0:e.category)==null?void 0:g.name,price:a.originalPrice,isNew:E(E()).diff(a==null?void 0:a.createdAt,"days")<1,rest:{...a},i:c,bgImage:a==null?void 0:a.offerImages,onClick:()=>h(`${S}/product-details/${a.offerCode}`)},J())})})}),s.jsx(Z,{loadedOffers:o,offersFetching:p}),o.length<1&&s.jsxs(M,{children:[s.jsx(m,{w:"500px",h:"300px",children:s.jsx(N,{animationData:U,loop:!0,autoplay:!0,width:50,height:70})}),s.jsx(q,{children:"There were no offers found."})]}),!C&&s.jsx(j,{as:K,...w,onClick:()=>{L(x+1)},children:p?s.jsx(u,{size:"sm"}):s.jsxs(s.Fragment,{children:["Load more ",s.jsx(Q,{as:W,ml:"5%"})]})})]})})};export{os as O};
