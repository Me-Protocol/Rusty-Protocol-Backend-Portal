import{bx as Ge,bF as I,bI as Ve,bD as We,j as e,bG as E,bH as He,r as d,_ as z,u as Xe,a as Qe,J as Ye,c as qe,d as N,cy as Je,ax as Ue,O as Ke,N as Re,F as n,S,m as Ze,h as v,G as D,T as t,w as j,i as O,X as L,C as es,q as T,aN as ss,aO as rs,z as Ce,y as k,I as as,x as ts,V as ns,cz as os,b6 as ls,b7 as ds}from"./index-ad3b3a34.js";import{e as is}from"./empty_lottie-ef5d1abe.js";import{e as cs}from"./empty-fb04a4d6.js";import{S as xs}from"./index-8d40fb65.js";import{g as Ae,C as hs,a as ps,L as bs,P as ms,b as gs,p as us,c as js,i as fs,d as ws,e as ys,f as Ss}from"./random-color-992795fc.js";import{S as Ds}from"./chunk-3RSXBRAN-b36a4ee9.js";var[_s,$]=Ge({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),ve=I((i,b)=>{const c=Ve("Table",i),{className:f,layout:F,...C}=We(i);return e.jsx(_s,{value:c,children:e.jsx(E.table,{ref:b,__css:{tableLayout:F,...c.table},className:He("chakra-table",f),...C})})});ve.displayName="Table";var Rs=I((i,b)=>{const c=$();return e.jsx(E.tr,{...i,ref:b,__css:c.tr})}),Cs=I((i,b)=>{const c=$();return e.jsx(E.tbody,{...i,ref:b,__css:c.tbody})}),R=I(({isNumeric:i,...b},c)=>{const f=$();return e.jsx(E.td,{...b,ref:c,__css:f.td,"data-is-numeric":i})});const As="/assets/sentarrow-195623c8.svg",vs=d.lazy(()=>z(()=>import("./index-d647308a.js"),["assets/index-d647308a.js","assets/index-ad3b3a34.js","assets/index-00bfa456.css","assets/index-6f075b89.js","assets/countries-020c4914.js","assets/chunk-3RSXBRAN-b36a4ee9.js"])),Ls=d.lazy(()=>z(()=>import("./index-5bdc1504.js"),["assets/index-5bdc1504.js","assets/index-ad3b3a34.js","assets/index-00bfa456.css"])),Ts=d.lazy(()=>z(()=>import("./index-ad3b3a34.js").then(i=>i.dj),["assets/index-ad3b3a34.js","assets/index-00bfa456.css"])),ks=d.lazy(()=>z(()=>import("./index-c06cd323.js"),["assets/index-c06cd323.js","assets/index-ad3b3a34.js","assets/index-00bfa456.css"])),Xs=()=>{var W,H,X,Q,Y,q,J,U,K,Z,ee,se,re,ae,te,ne,oe,le,de,ie,ce,xe,he,pe,be,me,ge,ue,je,fe,we,ye,Se,De,_e;let i=Xe();Qe();const{root:b,font:c,font1:f,font3:F,smallButton1:C,root2:Le,nameStyles:M,graphBox:Te}=Is(),{id:w}=Ye(),{state:r}=qe(),[ke,Ie]=d.useState([]);N(s=>s==null?void 0:s.authReducer);const{reward_type_product:P}=N(s=>s.productReducer),{data:y}=Je({startDate:new Date("05-06-2022").toISOString(),endDate:new Date("11-11-2023").toISOString()},{refetchOnMountOrArgChange:!0}),{user_data:m,my_debit_credit:Es,my_rewards:zs,my_rewards_loading:Fs,my_debit_credit_single:Ps}=N(s=>s==null?void 0:s.userReducer),_=y&&Ae(y==null?void 0:y.data)[w],[Ee,Ns]=d.useState(!1),{data:g,isLoading:Os}=Ue({page:1,limit:4,brandId:w},{refetchOnMountOrArgChange:!0,skip:!w}),{data:h,error:$s}=Ke({id:w},{refetchOnFocus:!0,skip:!w}),B={"Last 7 days":{label:"Last 7 days",millisecondsAgo:60*60*24*7*1e3},"Last 30 days":{label:"Last 30 days",millisecondsAgo:60*60*24*30*1e3},"Last 3 days":{label:"Last 3 days",millisecondsAgo:60*60*24*3*1e3}},G=s=>{const a=Date.now()-s;return new Date(a).toISOString()},ze={startDate:G(B["Last 7 days"].millisecondsAgo),endDate:new Date().toISOString(),dateRangeString:"Last 7 days"},[A,Fe]=d.useState(ze),Pe=s=>{console.log("heyooo",s);const a=B[s].millisecondsAgo;Fe({...A,startDate:G(a),dateRangeString:s})},Ne=async()=>{var x,p;if(!((x=m==null?void 0:m.customer)!=null&&x.walletAddress))return;const{data:s}=await os.get_account_detail({address:(p=m==null?void 0:m.customer)==null?void 0:p.walletAddress}),a=[];for(const o in s.result.balance)a.push({contractAddress:ls(o),balance:ds(s.result.balance[o])});const l=P==null?void 0:P.map(o=>{const Me=a==null?void 0:a.find(Be=>Be.contractAddress===(o==null?void 0:o.contractAddress));return{...o,balance:Me}});Ie(l==null?void 0:l.filter(o=>o.balance))};d.useEffect(()=>{Ne()},[]),Re(),Re(),hs.register(ps,bs,ms,gs,us,js,fs,ws);const Oe={type:"line",responsive:!0,stepped:"middle",elements:{point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}},scales:{x:{ticks:{autoSkip:!0},grid:{display:!1}},y:{min:0,ticks:{autoSkip:!0,maxTicksLimit:10},border:{display:!1},grid:{color:"#99999935"}}},plugins:{legend:{display:!1},title:{display:!1,text:"Chart.js Line Chart"}}};new Date().getMonth();const V=ys((H=(W=r==null?void 0:r.reward)==null?void 0:W.brand)==null?void 0:H.name),$e=_?{labels:[new Date(A.startDate).toDateString(),new Date(A.endDate).toDateString()],datasets:[{data:_.reduce((s,a,l)=>{const x=a.transactionType==="CREDIT"?parseFloat(a.amount):-parseFloat(a.amount),o=((s==null?void 0:s.length)===0?0:s[(s==null?void 0:s.length)-1])+x;return s.push(o),s},[]),fill:!1,label:(Y=(Q=(X=_[0])==null?void 0:X.rewardRegistry)==null?void 0:Q.reward)==null?void 0:Y.rewardName,borderColor:`#${((U=(J=(q=_[0])==null?void 0:q.rewardRegistry.reward)==null?void 0:J.brand)==null?void 0:U.color)||V}`,backgroundColor:`#${((ee=(Z=(K=_[0])==null?void 0:K.rewardRegistry.reward)==null?void 0:Z.brand)==null?void 0:ee.brandPrimaryColor)||V}`,borderWidth:2}]}:{labels:[],datasets:[]};let u=Ae(y==null?void 0:y.data)[r.brandId]||[];return e.jsxs(n,{flexDir:"column",children:[e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(Ts,{})}),e.jsx(Ze,{children:e.jsxs(v,{...b,children:[e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(Ls,{breadcrumbs:[{name:"Home",link:`${D}/dashboard`},{name:"Assets",link:`${D}/dashboard/dashboard-my-assets`},{name:(re=(se=h==null?void 0:h.data)==null?void 0:se.name)==null?void 0:re.replaceAll("_"," "),link:`${D}/dashboard/dashboard-my-assets/${w}`,isCurrentPage:!0}]})}),e.jsxs(n,{...Le,children:[e.jsxs(n,{flexDir:"column",children:[e.jsxs(t,{...c,children:["Learn more about your personalized ",r.rewardName," card"]}),e.jsx(j,{}),e.jsx(t,{...f,mb:"10px",children:(te=(ae=r==null?void 0:r.reward)==null?void 0:ae.brand)==null?void 0:te.description}),e.jsx(O,{children:e.jsx(L,{as:"button",...C,onClick:()=>{var s,a,l,x,p,o;return i(`${D}/dashboard/shop/${(s=h==null?void 0:h.data)==null?void 0:s.id}`,{state:{id:(l=(a=r==null?void 0:r.reward)==null?void 0:a.brand)==null?void 0:l.id,slug:(p=(x=r==null?void 0:r.reward)==null?void 0:x.brand)==null?void 0:p.slug,brandName:(o=r==null?void 0:r.reward)==null?void 0:o.brandName}})},children:e.jsx(t,{...c,children:"Learn more"})})})]}),e.jsx(j,{}),e.jsx(L,{style:{transform:"rotate(-35deg) translateX(60px) translateY(40px)"},children:e.jsx(xs,{logo:((ne=r==null?void 0:r.brand)==null?void 0:ne.white_logo)||((oe=r==null?void 0:r.brand)==null?void 0:oe.logo),bg:(de=(le=r==null?void 0:r.reward)==null?void 0:le.brand)!=null&&de.color?`#${(ce=(ie=r==null?void 0:r.reward)==null?void 0:ie.brand)==null?void 0:ce.color}`:"#363636",userName:`${(xe=m==null?void 0:m.customer)==null?void 0:xe.name}`})})]}),e.jsxs(n,{...Te,flexDir:"column",children:[e.jsxs(O,{h:"50px",w:"100%",children:[e.jsx(L,{borderColor:`#${(pe=(he=r==null?void 0:r.reward)==null?void 0:he.brand)==null?void 0:pe.color}`,borderWidth:"2px",p:"3px",borderRadius:50,children:e.jsx(es,{as:"img",objectFit:"contain",src:((be=r==null?void 0:r.brand)==null?void 0:be.white_logo)||((me=r==null?void 0:r.brand)==null?void 0:me.logo),w:"50px",h:"50px",borderRadius:"70px"})}),e.jsx(t,{color:"white",fontSize:"18px",children:(ge=r==null?void 0:r.reward)==null?void 0:ge.rewardName}),e.jsx(j,{})]}),e.jsxs(O,{h:"50px",w:"100%",mt:"20px",children:[e.jsxs(v,{children:[e.jsxs(t,{fontSize:["14px","14px","14px","18px","16px"],color:"white",children:[(je=(ue=ke.filter(s=>{var a;return((a=s==null?void 0:s.brand)==null?void 0:a.id)===w}))==null?void 0:ue.map(s=>{var a;return Number((a=s==null?void 0:s.balance)==null?void 0:a.balance)}))==null?void 0:je.reduce((s,a)=>s+a,0).toLocaleString()," ","pts"]}),e.jsx(t,{fontSize:"14px",color:"#999999C5",children:"Balance"})]}),e.jsx(j,{})]}),e.jsx(j,{}),e.jsxs(n,{bg:"#262626",borderRadius:"8px",h:"70%",w:"100%",p:"1%",alignSelf:"flex-end",flexDir:"column",children:[e.jsxs(n,{w:"100%",h:"3vw",align:"center",children:[e.jsx(t,{color:"white",children:Ee?"Percentage allocation":"Historic Progress"}),e.jsx(j,{}),e.jsx(n,{children:e.jsx(Ds,{color:"white",onChange:s=>{Pe(s.target.value)},value:A.dateRangeString,variant:"unstyled",placeholder:"Select range",size:"sm",children:["Last 30 days","Last 7 days","Last 3 days"].map(s=>e.jsx("option",{value:s,children:s},T()))})})]}),e.jsx(n,{alignItems:"flex-end",justifyContent:"flex-end",h:"90%",w:"100%",children:e.jsx(Ss,{width:1180,height:250,options:Oe,data:$e})})]})]}),e.jsxs(n,{w:"100%",pt:"40px",children:[e.jsx(t,{...M,children:"Last transactions"}),e.jsx(j,{}),e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(ss,{label:"Sort",children:[1,2,3,4,5].map(s=>d.createElement(rs,{as:"button",...c,key:T()},e.jsx(t,{textAlign:"left",children:s})))})})]}),e.jsxs(n,{flexDir:"column",children:[u&&(u==null?void 0:u.length)===0&&e.jsxs(v,{...b,align:"center",children:[e.jsx(Ce,{animationData:cs,style:{height:300}}),e.jsx(t,{pt:"3%",fontSize:"18px",fontWeight:"600",children:"You currently have no transactions"})]}),u&&(u==null?void 0:u.length)>0&&e.jsx(ve,{variant:"simple",children:e.jsx(Cs,{children:u.map(s=>{var a,l;return e.jsxs(Rs,{children:[e.jsx(R,{w:"10%",children:e.jsxs(n,{flexDir:"column",children:[e.jsx(t,{children:k(s==null?void 0:s.updatedAt).format("MMM DD")}),e.jsx(t,{children:k(s==null?void 0:s.updatedAt).format("hh:ss a")}),e.jsx(t,{...f})]})}),e.jsx(R,{width:"5%",children:e.jsx(n,{borderRadius:"md",bg:"black",w:10,h:10,justifyContent:"center",alignItems:"center",transform:(s==null?void 0:s.transactionType)==="CREDIT"?"rotate(180deg)":"rotate(360deg)",children:e.jsx(as,{src:As})})}),e.jsx(R,{w:"20%",children:e.jsxs(n,{flexDir:"column",alignItems:"flex-start",children:[e.jsxs(t,{children:[(s==null?void 0:s.transactionType)==="CREDIT"?"Received":"Spent"," ",r==null?void 0:r.rewardSymbol]}),e.jsx(t,{...f,children:"Completed"})]})}),e.jsx(R,{w:"12%",children:e.jsxs(v,{w:"98%",alignItems:"flex-start",children:[e.jsx(t,{alignSelf:"flex-end",color:"#999999",textAlign:"right",children:"From"}),e.jsx(t,{children:(l=(a=s==null?void 0:s.rewardRegistry)==null?void 0:a.reward)==null?void 0:l.contractAddress})]})}),e.jsx(R,{children:e.jsx(n,{flexDir:"column",children:e.jsxs(t,{...F,textAlign:"right",textColor:(s==null?void 0:s.transactionType)==="CREDIT"?"green":"red",children:[(s==null?void 0:s.transactionType)==="CREDIT"?parseFloat(s==null?void 0:s.amount):parseFloat(s==null?void 0:s.amount)*-1,r==null?void 0:r.rewardSymbol]})})})]},T())})})})]}),e.jsxs(n,{w:"100%",pt:"40px",children:[e.jsxs(t,{...M,children:["Offer from ",(fe=h==null?void 0:h.data)==null?void 0:fe.name]}),e.jsx(j,{}),e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(n,{children:e.jsx(L,{as:"button",...C,onClick:()=>{var s,a,l,x,p,o;return i(`${D}/dashboard/shop/${(s=h==null?void 0:h.data)==null?void 0:s.id}`,{state:{id:(l=(a=r==null?void 0:r.reward)==null?void 0:a.brand)==null?void 0:l.id,slug:(p=(x=r==null?void 0:r.reward)==null?void 0:x.brand)==null?void 0:p.slug,brandName:(o=r==null?void 0:r.reward)==null?void 0:o.brandName}})},children:e.jsx(t,{...c,children:"Visit shop"})})})})]}),e.jsx(ts,{columns:[2,2,3,4,4],spacingX:"3.5%",w:"100%",children:e.jsxs(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:[e.jsx(n,{w:"100%",alignSelf:"center",children:((we=g==null?void 0:g.data)==null?void 0:we.offers)&&((Se=(ye=g==null?void 0:g.data)==null?void 0:ye.offers)==null?void 0:Se.length)<1&&e.jsx(ns,{w:"100%",alignItems:"flex-start",children:e.jsx(n,{w:"500px",h:"300px",children:e.jsx(Ce,{animationData:is,loop:!0,autoplay:!0,width:50,height:70})})})}),(_e=(De=g==null?void 0:g.data)==null?void 0:De.offers)==null?void 0:_e.map((s,a)=>{var l,x,p;return e.jsx(ks,{isLoaded:!0,productTitle:s.name,points:`${s==null?void 0:s.tokens}${(l=s.reward)==null?void 0:l.rewardSymbol}`,productSubtitle:(p=(x=s.product)==null?void 0:x.category)==null?void 0:p.name,price:s.originalPrice.toLocaleString(),isNew:k(k()).diff(s==null?void 0:s.createdAt,"days")<1,rest:{...s},i:a,bgImage:s.offerImages,onClick:()=>i(`${D}/product-details/${s==null?void 0:s.offerCode}`)},T())})]})})]})}),e.jsx(d.Suspense,{fallback:e.jsx(S,{size:"sm"}),children:e.jsx(vs,{})})]})},Is=()=>({root:{w:"100%",mt:"108px",pt:"3%",overflow:"hidden",pb:"3%"},root2:{bg:"#F2F2F2",h:"174px",w:"100%",borderRadius:"16px",p:"2%",overflow:"hidden"},nameStyles:{fontSize:["20px","20px"]},search:{w:"18%",h:"40px",background:"#F6F6F6",borderRadius:"53px",justify:"flex-start",align:"center",pl:"1%"},button:{w:{base:"18%",md:"6%"},color:"dark",borderWidth:.5,backgroundColor:"light",fontSize:"15px"},loadMore:{w:"132px",h:"32px",alignSelf:"center",py:"10px",borderRadius:"100px"},font:{fontSize:"16px",lineHeight:"22px",color:"#000000",marginBottom:"5px"},smallButton:{w:"95px",h:"42px",bg:"#000000",borderRadius:"100px"},smallButton1:{w:"124px",h:"42px",p:"10px 16px",border:"1px",borderColor:"#000000",borderRadius:"100px",color:"#000000"},font1:{fontSize:"14px",lineHeight:"17px",color:"#999999"},font2:{fontSize:"18px",lineHeight:"22px",color:"#FFFFFF"},font3:{fontSize:"16px",lineHeight:"22px",color:"#E71C1C"},graphBox:{bg:"dark",w:"100%",h:"35vw",borderRadius:"16px",p:"20px"}});export{Xs as default,Is as useDashboardAssetsSingleBrand};
