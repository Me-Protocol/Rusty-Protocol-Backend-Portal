import{j as e,a1 as q,a2 as K,a3 as Q,bR as Z,r as s,i as D,T as c,u as V,b as ee,a as N,F as j,n as se,S as y,a7 as te,bS as oe,s as ne,aw as G,G as m,bn as re,W as ae,_,c as ie,bo as le,d as A,O as ce,e as T,m as de,bT as xe,V as ue,H as pe,L as M,ak as B,l as he,bU as fe}from"./index-47ecebed.js";import{F as me}from"./formik.esm-8d485ac0.js";import{I as ge}from"./index.esm-f5522c24.js";import{P as be,a as je}from"./chunk-I5V4ORUK-834e97e8.js";const we=({children:o,isOpen:r,onClose:t,modalContentStyle:d,modalBodyStyle:i,...l})=>e.jsxs(q,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:r,size:"lg",onClose:t,motionPreset:"slideInBottom",...l,children:[e.jsx(K,{bg:"#00000020",backdropFilter:"auto",backdropBlur:"2px"}),e.jsx(Q,{w:{base:"90vw",md:"60vw"},borderRadius:0,py:"1%",...d,children:e.jsx(Z,{...i,children:o})})]}),Se=({countFrom:o,onCountdownComplete:r})=>{const[t,d]=s.useState(o),[i,l]=s.useState(!0);s.useEffect(()=>{if(i&&t>0){const a=setInterval(()=>{d(t-1)},1e3);return()=>clearInterval(a)}else t===0&&i&&(l(!1),r())},[t,i,r]);const C=a=>{const w=Math.floor(a/60),g=a%60;return`${w.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`},n=()=>{t>0||(d(o),l(!0))};return e.jsxs(D,{as:"button",onClick:n,children:[e.jsx(c,{children:"Resend"}),e.jsxs(c,{opacity:t>0?1:0,children:["(",C(t),")"]})]})},ye=({isOpen:o,onClose:r,token:t,userId:d})=>{const[i,l]=s.useState(!1),[C,n]=s.useState(!1),[a,w]=s.useState(60),[g,v]=s.useState("");let E=V(),L=ee();const x=N();async function I(u){var h;try{n(!0);const{payload:b,error:R}=await x(oe({userId:d,code:u}));if(R)return v(R.message);if(b){x(ne(b));const{payload:S}=await x(G({token:b}));(h=S==null?void 0:S.customer)!=null&&h.walletAddress?E(`${m}/dashboard`):E(`${m}/syncRewards`),r()}}catch{}finally{n(!1)}}async function z(){try{n(!0);const{payload:u,error:h}=await x(re({token:t}));if(h)return v(h.message);u&&ae(L,"Code resent successfully",9e3,"bottom-left")}catch{}finally{n(!1)}}return e.jsx(we,{isOpen:o,onClose:r,closeOnOverlayClick:!1,modalContentStyle:{borderRadius:"10px"},children:e.jsxs(j,{flexDir:"column",py:"5px",children:[e.jsx(j,{alignSelf:"flex-end",as:"button",onClick:r,mb:"20px",children:e.jsx(ge,{size:20})}),e.jsx(c,{fontSize:"14px",mb:"10px",children:"Please provide the OTP sent to your Email"}),e.jsx(D,{w:"100%",h:"80px",children:e.jsx(be,{onComplete:u=>{v(""),I(u)},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(je,{bg:"grey",borderRadius:10,borderWidth:0,w:"30%",h:"100%"},se()))})}),g&&e.jsx(c,{color:"red",children:g}),C&&e.jsx(y,{size:"sm",alignSelf:"flex-end",mt:"10px"}),e.jsxs(D,{fontSize:"14px",mt:"25px",children:[e.jsx(c,{children:"Did not receive OTP?"}),e.jsx(te,{opacity:i?1:.5,onClick:()=>{i&&(z(),w(a+1),l(!1))},children:e.jsx(Se,{countFrom:a,onCountdownComplete:()=>{l(!0)}})})]})]})})},Ce=s.lazy(()=>_(()=>import("./index-7d4c072e.js"),["assets/index-7d4c072e.js","assets/index-47ecebed.js","assets/index-d7a3f919.css"])),ve=s.lazy(()=>_(()=>import("./index-47ecebed.js").then(o=>o.d9),["assets/index-47ecebed.js","assets/index-d7a3f919.css"])),Ee=s.lazy(()=>_(()=>import("./index-98928bea.js"),["assets/index-98928bea.js","assets/index-47ecebed.js","assets/index-d7a3f919.css"])),$=s.lazy(()=>_(()=>import("./index-2719cd12.js"),["assets/index-2719cd12.js","assets/index-47ecebed.js","assets/index-d7a3f919.css","assets/formik.esm-8d485ac0.js"])),ke=()=>{ie();let o=V();const r=le(),t=N(),[d,i]=s.useState(!1),{isLoading:l,error:C,token:n}=A(f=>f.authReducer);A(f=>f.userReducer);const[a,w]=s.useState(" "),[g,v]=s.useState(""),[E,L]=s.useState(""),[x,I]=s.useState(!1),{isOpen:z,onClose:u,onOpen:h}=ce(),{root:b,boxLeft:R,boxLogin:S,leftImg:Le,loginColumn:H,head:U,desc:O,basedText:W}=_e();s.useEffect(()=>{if(t(T()),n){if(n!=null&&n.userId)return;t(T()),o(`${m}/dashboard`)}},[t,n,o]);const J=async({email:f,password:Y},Ie)=>{var F;if(!r)return;const{payload:p,error:k}=await t(fe({identifier:f,password:Y}));if(k)return w(k==null?void 0:k.message);if(p!=null&&p.userId){L(p==null?void 0:p.userId),h();return}if(p){const{payload:P}=await t(G({token:p}));(F=P==null?void 0:P.customer)!=null&&F.walletAddress?o(`${m}/dashboard`):o(`${m}/syncRewards`)}},X=()=>I(!x);return e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(y,{size:"sm"}),children:e.jsx(Ce,{pos:"fixed"})}),e.jsxs(de,{children:[e.jsx(j,{mt:"2rem",...b,children:e.jsx(j,{...S,children:e.jsx(me,{initialValues:{email:"",password:""},validationSchema:xe,onSubmit:J,children:f=>e.jsxs(ue,{as:"form",...H,onSubmit:f.handleSubmit,onChange:()=>t(T()),children:[e.jsx(pe,{...U,pb:2,children:"Let’s Login"}),e.jsx(j,{w:"100%",justify:"space-between",children:e.jsx(s.Suspense,{fallback:e.jsx(y,{size:"sm"}),children:e.jsx(M,{href:`${window.location.origin}/user/google`,w:"full",children:e.jsx(ve,{isLoading:d,name:"Sign in with Google",onClick:()=>{},rest:{w:"100%"}})})})}),e.jsxs(j,{align:"center",w:"100%",justify:"space-between",children:[e.jsx(B,{w:"45%",color:"#ECECEC"}),e.jsx(c,{color:"#999999",fontSize:{base:"12px",md:"20px"},children:"or"}),e.jsx(B,{w:"45%",color:"#ECECEC"})]}),e.jsxs(s.Suspense,{fallback:e.jsx(y,{size:"sm"}),children:[e.jsx($,{name:"email",type:"email",placeholder:"your@email.com"}),e.jsx($,{name:"password",type:x?"text":"password",placeholder:"Password"})]}),e.jsx(c,{as:he,onClick:X,alignSelf:"flex-end",...W,bg:"transparent",_hover:{bg:"transparent"},p:"0px",fontSize:"14px",children:x?"Hide":"Show"}),a&&e.jsx(c,{...O,color:"red",children:a}),e.jsx(M,{onClick:()=>o(`${m}/password_reset`),...O,pb:3,textDecoration:"underline",w:["100","30%"],children:"Forgot Password"}),e.jsx(s.Suspense,{fallback:e.jsx(y,{size:"sm"}),children:e.jsx(Ee,{isLoading:l,name:"Login"})}),e.jsxs(c,{...O,pt:"10px",children:["Don’t have an account yet?",e.jsxs(M,{onClick:()=>{o(`${m}/register`)},textDecoration:"underline",children:[" ","Create one here."]})]})]})})})}),e.jsx(ye,{isOpen:z,onClose:u,token:g,userId:E})]})]})},Te=ke,_e=()=>({root:{h:"100vh",align:"center",justify:"center",bg:"light"},boxLeft:{display:["none","none","none","flex","flex"],bg:"light",fontSize:40,h:"100%",w:"40vw"},boxLogin:{fontSize:40,h:"100%",w:["100%","100%","80%","50%","50%"],overflow:"hidden"},boxRegister:{fontSize:40,h:"100vh",w:["100%","100%","80%","80%","70%"],justify:"center"},leftImg:{h:"100%",w:"100%"},loginColumn:{bg:"light",w:"100%",align:"flex-start",pt:{base:"5vh",md:"10vh"},px:{base:"15px"},justifySelf:"center"},registerColumn:{bg:"light",w:["100%","100%","100%","80%","70%"],align:"flex-start",pt:{base:"5vh",md:"10vh"},px:{base:"15px"},justifySelf:"center"},head:{fontSize:{base:"16px",md:"25px"},pt:["10px","20px"]},desc:{fontSize:{base:"14px",md:"17px"},w:{base:"100%",md:"85%"}},basedText:{pt:"30px",fontSize:{base:"18px",md:"20px"}},checkBoxRoot:{py:"20px"},countrySelect:{w:{base:"100%",md:"100%"},bg:"grey",color:"dark",borderColor:"light",borderWidth:"1px",align:"center"}});export{Te as L,we as N,Se as a,_e as u};
