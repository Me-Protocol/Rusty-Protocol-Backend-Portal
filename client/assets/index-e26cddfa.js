import{r as s,_ as Y,u as st,a as nt,d as w,bW as at,b as rt,b3 as B,b2 as it,bh as lt,O as de,bX as ct,bY as dt,j as e,ah as A,S as D,F as l,m as xt,h as L,i as h,a0 as ht,T as n,y as ut,w as O,l as N,G as $,aZ as pt,a_ as mt,a$ as ft,q as m,E as C,$ as xe,bZ as jt,b_ as W,a8 as gt,b$ as bt,v as he,V as ue,z as pe,a1 as me,a2 as fe,a3 as je,aj as wt,C as H,H as Ct,ae as vt,W as ge,I as be,f as we,aH as St,aI as Pt,aJ as kt}from"./index-bdfb93cd.js";import{A as yt}from"./index.esm-31b17052.js";import{e as Ce}from"./empty-fb04a4d6.js";import{S as Ft}from"./chunk-3RSXBRAN-56f91d8e.js";function Dt(i=10){const d=[10,20,50],[u,c]=s.useState(i);return{pagLimit:u,availableLimits:d,handleLimitChange:x=>{c(x)}}}const Lt=({total:i,page:d,limit:u})=>({getPaginationInfo:()=>{const r=(d-1)*u+1,x=Math.min(d*u,i);return`${r} to ${x} of ${i}`}}),Ot=s.lazy(()=>Y(()=>import("./index-bdfb93cd.js").then(i=>i.c_),["assets/index-bdfb93cd.js","assets/index-ed5220eb.css"])),It=s.lazy(()=>Y(()=>import("./index-daf3ca8c.js"),["assets/index-daf3ca8c.js","assets/index-bdfb93cd.js","assets/index-ed5220eb.css"])),zt=s.lazy(()=>Y(()=>import("./index-184c750c.js"),["assets/index-184c750c.js","assets/index-bdfb93cd.js","assets/index-ed5220eb.css"])),Mt=()=>{var oe,se,ne,ae,re,ie,le,ce;let i=st();const d=nt(),u=s.useRef(),{token:c}=w(t=>t.authReducer),{user_data:r}=w(t=>t.userReducer),{order_data:x,getOrder_loading:V}=w(t=>t.orderReducer),[ve]=at(),Se=ve.get("tab"),G=rt(),[I,J]=s.useState(1),[f,Pe]=s.useState(10),{availableLimits:ke,handleLimitChange:ye}=Dt(f),[a,Fe]=s.useState({nextPage:null,prevPage:null,total:0}),{my_deals_loading:De,my_followed_brands:p}=w(t=>t.userReducer),{collection_data:z,collection_loading:Tt}=w(t=>t.collectionReducer);s.useEffect(()=>{c&&d(B({token:c}))},[c]),s.useEffect(()=>{c&&((async()=>{const{payload:t,error:o}=await d(it({token:c,page:I,limit:f}));t&&Fe({...a,total:t==null?void 0:t.total,nextPage:t==null?void 0:t.nextPage,prevPage:t==null?void 0:t.previousPage})})(),d(lt({token:c})))},[I,f]);const Le=()=>{a!=null&&a.nextPage&&J(a==null?void 0:a.nextPage)},Oe=()=>{a!=null&&a.prevPage&&J(a==null?void 0:a.prevPage)},{getPaginationInfo:Ie}=Lt({page:I,total:a==null?void 0:a.total,limit:f}),{isOpen:ze,onOpen:q,onClose:v}=de(),{isOpen:Me,onOpen:Re,onClose:M}=de(),{root:Te,infoBox:Ee,font1:_e,font2:Be,editProfileText:Ae,contain:Et,smallerDesc:Ne,singleCol:U,popContentStyle:$e,colOptionText:We,cancelButton:X,nextButton:Z,newCollectionInput:He,editProfileButton:Ye,iconCenter:Ve,editIconStack:Ge,imageDisplay:Je,fontUnderline:qe,nameStack:Ue}=Rt(),[Xe]=ct(),[Ze]=dt(),[Ke,K]=s.useState(!1),[_t,Q]=s.useState(""),[S,ee]=s.useState(""),[R,te]=s.useState(!1);s.useState(!1),s.useState([]);const[P,T]=s.useState(null),[Bt,Qe]=s.useState("");s.useEffect(()=>{const j=["January","February","March","April","May","June","July","August","September","October","November","December"][new Date().getMonth()];Qe(j)},[]);const E=[{id:"1",name:"My deals"},{id:"2",name:"My saved"},{id:"3",name:"My brands"}];async function et(){S&&(K(!0),await Xe({name:S}).then(({data:t})=>{d(B({token:c})),ge(G,"Collection added successfully"),v()}).catch(t=>{Q(t)}).finally(()=>{K(!1),ee("")}))}async function tt(t){te(!0),T(t),await Ze(t).then(({data:o})=>{d(B({token:c})),ge(G,"Collection deleted successfully"),v()}).catch(o=>{Q(o)}).finally(()=>{M(),te(!1),T(null)})}function ot(){var t;return e.jsx(e.Fragment,{children:e.jsxs(l,{w:"100%",justify:"space-between",flexDir:"row",flexWrap:"wrap",children:[(t=z==null?void 0:z.collections)==null?void 0:t.map((o,j)=>{var g,b;return e.jsxs(l,{...U,children:[e.jsx(l,{...Je,flexDir:"row",wrap:"wrap",as:"button",onClick:()=>i(`${o==null?void 0:o.id}`,{state:{id:o==null?void 0:o.name}}),children:e.jsx(be,{src:o==null?void 0:o.image,objectFit:"contain",fallbackSrc:we.appLogoPlaceholder},m())}),e.jsxs(L,{justify:"center",...Ue,children:[e.jsx(n,{noOfLines:1,fontSize:"18px",children:o==null?void 0:o.name}),e.jsxs(n,{color:"#999999",children:[(g=o.likes)==null?void 0:g.length," ",((b=o.likes)==null?void 0:b.length)>0?"items":"item"]})]}),e.jsx(l,{w:"10%",h:"15%",alignSelf:"center",children:e.jsx(St,{isLazy:!0,placement:"bottom",children:({isOpen:_,onClose:k})=>e.jsxs(e.Fragment,{children:[e.jsx(Pt,{children:e.jsx(A,{as:"button",children:R&&o.id===P?e.jsx(D,{size:"sm"}):e.jsx(C,{w:"100%",h:"100%",as:yt})})}),e.jsx(A,{as:"button",textAlign:"left",children:e.jsx(kt,{ref:u,onClick:k,...$e,children:e.jsx(L,{...Ge,children:["Delete"].map((y,F)=>e.jsxs(l,{as:"button",flexDir:"row",align:"center",onClick:()=>{F===1?i(`${o==null?void 0:o.id}`,{state:{id:o==null?void 0:o.id}}):T((o==null?void 0:o.id)??null),Re()},children:[e.jsx(be,{w:"8%",h:"8%",src:we.edit_Icon,mr:"5%"}),e.jsx(n,{...We,children:y})]},m()))})})})]})})})]},m())}),e.jsxs(l,{...U,onClick:q,children:[e.jsx(H,{...Ve,flexDir:"row",flexWrap:"wrap",children:e.jsx(C,{w:"3vw",h:"3vw",as:xe})}),e.jsx(h,{ml:"5%",children:e.jsx(n,{children:"New collection"})})]})]})})}return e.jsxs(A,{w:"100%",h:"100vh",flexDir:"column",children:[e.jsx(s.Suspense,{fallback:e.jsx(D,{size:"sm"}),children:e.jsx(Ot,{})}),e.jsx(l,{flexDir:"column",children:e.jsx(xt,{children:e.jsxs(L,{...Te,children:[e.jsxs(h,{...Ee,bg:"#F2F2F2",children:[e.jsx(ht,{size:"xl",mr:"2%",name:`${(oe=r==null?void 0:r.customer)==null?void 0:oe.name}`,src:(se=r==null?void 0:r.customer)==null?void 0:se.profilePicture}),e.jsxs(L,{children:[e.jsx(n,{..._e,textTransform:"uppercase",children:(ne=r==null?void 0:r.customer)==null?void 0:ne.name}),e.jsxs(n,{...Be,children:["Member since ",ut((ae=r==null?void 0:r.customer)==null?void 0:ae.createdAt).format("DD MMM YYYY")]})]}),e.jsx(O,{}),e.jsx(N,{variant:"outline",...Ye,onClick:()=>i(`${$}/settings`),children:e.jsx(n,{...Ae,children:"Edit Profile"})})]}),e.jsxs(pt,{isLazy:!0,defaultIndex:Se==="saved"?1:0,children:[e.jsxs(l,{flexDir:"row",w:"100%",children:[e.jsx(mt,{children:E==null?void 0:E.map(t=>e.jsx(ft,{...Ne,_selected:{color:"black",borderColor:"black"},color:"#999999",children:e.jsx(n,{fontWeight:"700",children:t.name})},m()))}),e.jsx(O,{}),e.jsxs(h,{children:[e.jsxs(h,{onClick:q,cursor:"pointer",children:[e.jsx(n,{fontWeight:"600",children:"New collection"}),e.jsx(C,{w:"30px",h:"30px",as:xe})]}),e.jsx(O,{}),e.jsx(O,{})]})]}),e.jsxs(jt,{children:[e.jsx(W,{px:0,children:e.jsxs(s.Suspense,{fallback:e.jsx(D,{size:"sm"}),children:[e.jsxs(h,{children:[e.jsx(n,{children:"Page:"}),e.jsxs(h,{color:"#999999",ml:"5px",children:[e.jsx(n,{noOfLines:1,children:Ie()}),e.jsx(l,{disabled:!a.prevPage,as:"button",ml:"5px",onClick:Oe,_hover:{color:"black"},children:e.jsx(C,{as:gt,size:15})}),e.jsx(l,{disabled:!a.nextPage,as:"button",onClick:Le,_hover:{color:"black"},children:e.jsx(C,{as:bt,size:15})})]}),e.jsx(h,{children:e.jsx(Ft,{value:f,onChange:t=>{Pe(Number(t.target.value)),ye(Number(t.target.value))},w:"auto",fontSize:"14px",borderRadius:"12px",border:"0.5px solid grey ",_focus:{border:"1px solid grey",outline:"none",boxShadow:"none"},color:"gray.600",children:ke.map(t=>e.jsxs("option",{value:t,children:[t," limit per page"]},t))})})]}),((re=x==null?void 0:x.orders)==null?void 0:re.length)>0?e.jsx(e.Fragment,{children:(ie=x==null?void 0:x.orders)==null?void 0:ie.map(t=>{var o,j,g,b,_,k,y,F;return e.jsx(he,{isLoaded:!V,mb:"2px",children:e.jsx(It,{name:(o=t==null?void 0:t.offer)==null?void 0:o.name,price:Number((j=t==null?void 0:t.offer)==null?void 0:j.originalPrice),token:`${(g=t==null?void 0:t.offer)==null?void 0:g.tokens} ${(_=(b=t==null?void 0:t.offer)==null?void 0:b.reward)==null?void 0:_.rewardSymbol}`,quantity:t==null?void 0:t.quantity,date:(k=t==null?void 0:t.offer)==null?void 0:k.updatedAt,expired:!1,image:(F=(y=t==null?void 0:t.offer)==null?void 0:y.offerImages[0])==null?void 0:F.url,rest:{...t}})},m())})}):e.jsxs(ue,{children:[e.jsx(l,{w:"500px",h:"500px",children:e.jsx(pe,{animationData:Ce,loop:!0,autoplay:!0,width:50,height:70})}),e.jsxs(n,{children:["You currently have no deals,"," ",e.jsx(n,{as:"button",onClick:()=>i(`${$}/dashboard/category`),...qe,children:"Explore your favorite deals to purchase"})]})]})]})}),e.jsx(W,{px:0,children:ot()}),e.jsx(W,{px:0,children:e.jsx(s.Suspense,{fallback:e.jsx(D,{size:"sm"}),children:((le=p==null?void 0:p.following)==null?void 0:le.length)>0?e.jsx(e.Fragment,{children:(ce=p==null?void 0:p.following)==null?void 0:ce.map(t=>e.jsx(he,{isLoaded:!De,mb:"2px",children:e.jsx(zt,{item:{...t}},m())}))}):e.jsxs(ue,{children:[e.jsx(l,{w:"400px",h:"400px",children:e.jsx(pe,{animationData:Ce,loop:!0,autoplay:!0,width:50,height:70})}),e.jsxs(n,{children:["You currently have followed brands,"," ",e.jsx(n,{as:"button",onClick:()=>i(`${$}/dashboard/shop`),children:"Explore your favorite brands"})]})]})})})]})]})]})})}),e.jsxs(me,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:ze,size:"xl",onClose:v,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(fe,{}),e.jsxs(je,{w:{base:"90vw",md:"30vw"},h:"15vw",borderRadius:0,p:"1%",children:[e.jsx(n,{children:"Create new collection"}),e.jsx(wt,{variant:"outline",...He,placeholder:"Collection name",value:S,onChange:({target:t})=>{ee(t.value)}}),e.jsx(N,{isLoading:Ke,...Z,onClick:et,disabled:!S,children:e.jsx(n,{children:"Create"})}),e.jsx(H,{...X,onClick:v,as:"button",children:e.jsx(n,{children:"Cancel"})})]})]}),e.jsxs(me,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:Me,size:"xl",onClose:M,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(fe,{}),e.jsxs(je,{w:{base:"90vw",md:"30vw"},h:"15vw",borderRadius:0,p:"1%",children:[e.jsxs(Ct,{mb:3,fontSize:"sm",children:["Delete collection"," "]}),e.jsx(n,{children:"Are you sure you want to delete this collection? This action cannot be undone."}),e.jsx(N,{isLoading:!!P&&R,...Z,bg:"red.600",onClick:()=>tt(P),isDisabled:!P,children:e.jsx(n,{children:"Delete"})}),e.jsx(H,{...X,onClick:M,as:"button",children:e.jsx(n,{children:"Cancel"})})]})]}),R&&e.jsx(vt,{})]})},Ht=Mt,Rt=()=>({root:{w:"100%",mt:"108px",pt:"3%",overflow:"hidden"},infoBox:{w:"100%",h:"150px",px:"2%",borderRadius:"16px"},root2:{w:"1440px",h:"248px",mt:"1px"},font1:{fontSize:"24px",color:"#000000"},font2:{fontSize:"16px",color:"#999999"},editProfileText:{fontSize:"14px"},button:{w:"150px",h:"47px",borderRadius:"0px",background:"#000000",fontSize:"18px",lineHeight:"22px",color:"#FFFFFF"},contain:{w:"100%",h:"64px",mt:"297px"},head:{fontSize:{base:"18px",md:"20px"}},smallerDesc:{fontSize:{base:"10px",md:"16px"}},container:{w:"100px",_hover:{background:"black",color:"white"}},search:{w:"240px",h:"40px",background:"#F6F6F6",borderRadius:"53px"},font:{fontSize:"16px",lineHeight:"19px",_hover:{color:"#FFFFFF"}},popfont:{fontSize:"12px",lineHeight:"14px",color:"#999999"},singleCol:{w:"44%",h:"200px",borderRadius:"16px",borderWidth:"1px",borderColor:"#9999992B",overflow:"hidden",mb:"2vw"},popContentStyle:{borderRadius:"0",width:"100%",background:"#FFFFFF",border:"0px"},colOptionText:{fontSize:"12px"},cancelButton:{bg:"light",color:"dark",h:"40px",borderWidth:1,mt:"6px"},nextButton:{mt:"20px",color:"white",h:"40px",borderRadius:0,_hover:{bg:"dark"},bg:"dark"},editProfileButton:{borderRadius:"30px",alignSelf:"flex-start",top:"20%",borderColor:"dark"},newCollectionInput:{mt:"10px",h:"40px",borderRadius:0,_placeholder:{color:"#cfcfcf"}},iconCenter:{bg:"#f2f2f2",w:"40%",cursor:"pointer",h:"100%"},editIconStack:{bg:"light",py:"5%",pr:"20%",w:"15vw",borderRadius:"4px",boxShadow:"1px 2px 9px #00000035",pl:"5%"},imageDisplay:{h:"100%",bg:"grey",cursor:"pointer",w:"40%"},fontUnderline:{decoration:"underline"},nameStack:{ml:"5%",w:"60%"}});export{Ht as default};
