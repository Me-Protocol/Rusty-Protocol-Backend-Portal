import{r,_ as ie,E as ae,b as ce,a as pe,d as H,aT as ue,g as y,j as e,h as l,i as d,al as b,T as n,M as he,S as N,N as de,o as h,m as xe,am as ge,v as B,a2 as M,B as me}from"./index-49b376e0.js";const fe=r.lazy(()=>ie(()=>import("./index-67f8e65d.js"),["assets/index-67f8e65d.js","assets/index-49b376e0.js","assets/index-ed5220eb.css","assets/countries-e12a8af3.js","assets/chunk-3RSXBRAN-0c5dbf32.js"])),je=()=>{var F,R,U,k,P,z,A;const{button:G,profileFont1:$,profileFont2:K,profileFont3:i,inputStyle:p}=W();ae();let S=ce();const w=pe(),{countrySelect:O}=W(),{user_data:t}=H(o=>o.userReducer),{token:u}=H(o=>o.authReducer),[C]=ue(),[Y,v]=r.useState("United States of America"),[Z,V]=r.useState(),[E,q]=r.useState(),[J,x]=r.useState(!1),[g,Q]=r.useState((F=t==null?void 0:t.customer)==null?void 0:F.height),[m,X]=r.useState((R=t==null?void 0:t.customer)==null?void 0:R.weight),[f,ee]=r.useState((U=t==null?void 0:t.customer)==null?void 0:U.bio),[j,oe]=r.useState((k=t==null?void 0:t.customer)==null?void 0:k.name);function te(o){console.log(o.target.files),V(URL.createObjectURL(o.target.files[0])),q(o.target.files[0])}r.useEffect(()=>{console.log("getGeoInfo is running"),se()},[]);const se=()=>{y.get("https://ipapi.co/json/").then(o=>{let a=o.data;v(a.country_name)}).catch(o=>{console.log(o)})};async function re(){const{signature:o,timestamp:a,cloudName:T,apiKey:le}=await y.get(`${me}/upload/image-signature`,{headers:{Authorization:`Bearer ${u}`}}).then(({data:s})=>{var I,L,D,_;return{apiKey:(I=s==null?void 0:s.data)==null?void 0:I.apiKey,cloudName:(L=s==null?void 0:s.data)==null?void 0:L.cloudName,signature:(D=s==null?void 0:s.data)==null?void 0:D.signature,timestamp:(_=s==null?void 0:s.data)==null?void 0:_.timestamp}}),c=new FormData;return c.append("file",E),c.append("cloud_name",T),c.append("api_key",le),c.append("timestamp",a),c.append("signature",o),y.post(`https://api.cloudinary.com/v1_1/${T}/upload`,c,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:s})=>(console.log(s,"pppp"),{secure_url:s==null?void 0:s.secure_url}))}async function ne(){if(x(!0),E){const{secure_url:o}=await re();await C({fullName:j,profilePicture:o,weight:m,height:g,bio:f}).then(({data:a})=>{u&&w(B({token:u})),M(S,"Profile updated successfully")}).catch(a=>{console.log(a,"UPDATeYUSERZRR")}).finally(()=>{x(!1)});return}await C({name:j,weight:m,height:g,bio:f}).then(({data:o})=>{u&&w(B({token:u})),M(S,"Profile updated successfully")}).catch(o=>{console.log(o,"UPDATeYUSERZRR")}).finally(()=>{x(!1)})}return e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsx(b,{children:e.jsx(n,{...$,children:"Edit Profile"})}),e.jsx(he,{}),e.jsx(b,{as:"button",...G,onClick:ne,children:e.jsx(n,{children:J?e.jsx(N,{size:"xs"}):"Save"})})]}),e.jsxs(d,{py:"2%",children:[e.jsx(de,{name:(P=t==null?void 0:t.customer)==null?void 0:P.name,src:Z||((z=t==null?void 0:t.customer)==null?void 0:z.profilePicture)}),e.jsxs(l,{children:[e.jsx(n,{...K,children:(A=t==null?void 0:t.customer)==null?void 0:A.name}),e.jsx(n,{...i,decoration:"underline",as:"button",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image_uploads",style:{cursor:"pointer"},children:"Change profile photo"}),e.jsx("input",{type:"file",id:"image_uploads",name:"image_uploads",accept:".jpg, .jpeg, .png",style:{opacity:"0"},onChange:te,placeholder:"Changle profile photo"})]})})]})]}),e.jsxs(l,{children:[e.jsxs(d,{w:"100%",children:[e.jsxs(l,{w:"25%",children:[e.jsx(n,{...i,ml:"0",children:"Full Name"}),e.jsx(h,{...p,placeholder:"Enter Full Name",value:j,onChange:({target:o})=>{oe(o.value)},border:"1px solid rgba(0, 0, 0, 0.08)",_focus:{borderColor:"dark",boxShadow:"none"}})]}),e.jsxs(l,{w:"50%",children:[e.jsx(n,{...i,ml:"0",children:"Email"}),e.jsx(h,{...p,placeholder:"Enter Email",isDisabled:!0,value:t==null?void 0:t.email,border:"1px solid rgba(0, 0, 0, 0.08)",_focus:{borderColor:"dark",boxShadow:"none"}})]})]}),e.jsxs(d,{py:"20px",children:[e.jsxs(l,{w:"50%",children:[e.jsx(n,{...i,ml:"0",children:"Location"}),e.jsx(r.Suspense,{fallback:e.jsx(N,{size:"sm"}),children:e.jsx(fe,{value:Y,onChange:o=>{v(o.target.value)},...O})})]}),e.jsxs(l,{w:"25%",children:[e.jsx(n,{...i,ml:"0",children:"Weight"}),e.jsxs(xe,{children:[e.jsx(h,{type:"number",...p,placeholder:"Enter Weight",value:m,onChange:({target:o})=>{X(o.value)},border:"1px solid rgba(0, 0, 0, 0.08)",_focus:{borderColor:"dark",boxShadow:"none"}}),e.jsx(ge,{mr:2,mt:1,fontSize:"6px",children:e.jsx(b,{children:e.jsx("span",{style:{fontSize:"12px"},children:"kg"})})})]})]}),e.jsxs(l,{w:"25%",children:[e.jsx(n,{...i,ml:"0",children:"Height"}),e.jsx(h,{...p,placeholder:"Enter Height",value:g,onChange:({target:o})=>{Q(o.value)},border:"1px solid rgba(0, 0, 0, 0.08)",_focus:{borderColor:"dark",boxShadow:"none"}})]})]}),e.jsxs(l,{children:[e.jsx(n,{...i,ml:"0",children:"Bio"}),e.jsx(h,{...p,as:"textarea",h:"100px",w:"100%",textAlign:"start",placeholder:" Write your review here. It must be at least 5 characters long.",noOfLines:5,_focus:{borderColor:"dark",boxShadow:"none"},value:f,onChange:({target:o})=>{ee(o.value)},border:"1px solid rgba(0, 0, 0, 0.08)"})]})]})]})},be=je,W=()=>({button:{display:"flex",alignItems:"center",justifyContent:"center",width:"71px",height:"42px",border:"1px solid #000000",borderRadius:"100px"},copyrightText:{color:"light",fontSize:["14px","16px","16px","14px","16px"]},countrySelect:{w:"100%",bg:"light",color:"dark",borderWidth:"1px",my:"30px",borderRadius:"0px",borderColor:"grey"},linksStyle:{color:"darkGrey"},profileFont1:{fontSize:"24px",lineHeight:"29px",color:"#000000"},profileFont2:{fontSize:"18px",lineHeight:"22px",color:"#000000"},profileFont3:{fontSize:"14px",lineHeight:"17px",color:"#000000",marginLeft:0,left:0},profileFont4:{fontSize:"14px",lineHeight:"20px",color:"#AFAFAF",marginLeft:0,left:0},inputStyle:{h:"48px",borderColor:"grey",variant:"outline",borderRadius:"0px"}});export{be as M};
