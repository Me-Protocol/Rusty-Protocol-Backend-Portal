import{b as qe,J as Be,c as eo,a as oo,u as so,r as c,d as ge,K as to,M as ao,N as ro,O as lo,Q as io,g as no,B as co,U as $,j as e,F as a,W as xo,m as ye,h as p,X as L,G as u,i as b,I as C,f as N,v as m,T as t,w as r,Y as S,A as h,Z as Ce,$ as Fe,a0 as ve,C as F,E as T,H as f,L as po,x as ho,y as Oe,n as ze,l as fo,S as jo,a1 as wo,a2 as uo,a3 as bo,a4 as mo,a5 as Le,a6 as So,t as ko}from"./index-805c2800.js";import go from"./index-2efe7ad7.js";import yo from"./index-688cafb3.js";import Co from"./index-52e0e219.js";import{S as Fo}from"./svg-f5c5deaa.js";import{D as Re}from"./index-c6b16770.js";import{S as De}from"./chunk-W7A7QDAK-fcad0f07.js";import"./index-11490bdc.js";import"./countries-020c4914.js";import"./chunk-3RSXBRAN-ac8942a7.js";import"./index.esm-288e8b13.js";import"./index-13c3fb6b.js";import"./index-7bf05605.js";import"./ResizeObserver.es-f4289e8a.js";const vo=()=>{var q,B,ee,oe,se,te,ae,re,le,ie,ne,ce,xe,de,pe,he,fe,je,we,ue,be,me;const{root:Ie,loadMore:Ee}=ko();let R=qe();const{id:x}=Be();eo(),oo();let D=so();const[zo,v]=c.useState(!1),[j,O]=c.useState(!1);c.useState("Last 30 days");const[I,A]=c.useState(1),[Me,Lo]=c.useState([]),[Pe,H]=c.useState(!1),[Ro,_]=c.useState(1),[W,U]=c.useState(!1),[n,G]=c.useState([]),[Q,$e]=c.useState(null),{token:E}=ge(s=>s.authReducer);ge(s=>s.productReducer);const[Ne]=to(),[Te]=ao(),{isOpen:Ae,onOpen:Do,onClose:M}=ro(),{data:o,isLoading:d,error:Io}=lo({id:x},{refetchOnFocus:!0,skip:!x}),{data:w,isLoading:Eo,refetch:z}=io({brand_id:x},{refetchOnMountOrArgChange:!0,skip:!E}),{mobileTop:He,topCardStack:_e,topCardHstack:We,imageSkel:X,tokenCenter:V,iconFlex:Y,sendFlex:Mo,centerButton:Po,textReceive:$o,graphFlex:J,overviewFlex:K,modalContentFollow:Ue,overflowFlex:Ge,circleImage:Qe,circleImage2:Xe,followCenter:Ve,cancelCenter:Ye}=Oo();c.useEffect(()=>{Je()},[I,x]);async function Je(){var s,i,k,g,y,Se,ke;if(x){U(!0),H(!1);try{const{data:l}=await no.get(`${co}/store/offer?page=${I}&limit=4&brandId=${x}`);((s=l==null?void 0:l.data)==null?void 0:s.offers.length)<1&&(H(!0),$(R,"No offer available",3e3,"top-right")),n.every(Ze=>Ze.brandId===x)?(G([...n,...(i=l==null?void 0:l.data)==null?void 0:i.offers]),_((g=(k=l==null?void 0:l.data)==null?void 0:k.pagination)==null?void 0:g.totalPage)):(A(1),G((y=l==null?void 0:l.data)==null?void 0:y.offers),_((ke=(Se=l==null?void 0:l.data)==null?void 0:Se.pagination)==null?void 0:ke.totalPage))}catch(l){console.log(l,"GET_BRANDS_OFFERS_ERR")}finally{U(!1)}}}console.log((q=o==null?void 0:o.data)==null?void 0:q.banners);async function P(){E||D(`${u}/login`),v(!0),await Ne({brand_id:x}).then(async s=>{var i;await z(),((i=s==null?void 0:s.data)==null?void 0:i.statusCode)===200&&(await z(),$(R,"Brand Followed"))}).catch(s=>{console.log(s,"FollowBrandErr")}).finally(()=>{v(!1)})}async function Z(){E||D(`${u}/login`),v(!0),await Te({brandId:x}).then(async s=>{var i;await z(),((i=s==null?void 0:s.data)==null?void 0:i.statusCode)===200&&(await z(),$(R,"Brand Unfollowed"))}).catch(s=>{console.log(s,"unFollowBrandERR")}).finally(()=>{v(!1)})}function Ke(s){return s?!s.startsWith("http://")&&!s.startsWith("https://")?"https://"+s:s:"#"}return e.jsxs(a,{flexDir:"column",children:[e.jsx(xo,{}),e.jsx(ye,{children:e.jsxs(p,{display:["none","block"],...Ie,children:[e.jsx(L,{children:e.jsx(go,{breadcrumbs:[{name:"Home",link:`${u}/dashboard`},{name:"Shop",link:`${u}/dashboard/shop`},{name:(ee=(B=o==null?void 0:o.data)==null?void 0:B.name)==null?void 0:ee.replaceAll("_"," "),link:`${u}/dashboard/shop/${x}`,isCurrentPage:!0}]})}),e.jsxs(p,{minH:j?"700px":"480px",..._e,display:["none","flex"],children:[e.jsxs(b,{...We,children:[e.jsxs(p,{w:"60%",h:"100%",p:"20px",children:[e.jsx(De,{isLoaded:!d,w:"70px",h:"70px",children:e.jsx(C,{src:(oe=o==null?void 0:o.data)==null?void 0:oe.logo,objectFit:"contain",...X,fallbackSrc:N.appLogoPlaceholder,fallbackStrategy:"onError"})}),e.jsx(m,{isLoaded:!d,children:e.jsx(t,{fontSize:"28px",w:"75%",noOfLines:2,children:(se=o==null?void 0:o.data)==null?void 0:se.slogan})}),e.jsx(r,{}),e.jsx(m,{isLoaded:!d,children:e.jsx(t,{fontSize:"16px",noOfLines:3,w:"95%",children:(te=o==null?void 0:o.data)==null?void 0:te.description})}),e.jsx(a,{children:w!=null&&w.data?e.jsxs(a,{className:"followFlex",children:[e.jsx(S,{name:"Following",icon:e.jsx(h,{w:"25px",h:"25px",as:Ce}),rest:{w:"146px",fontSize:"16px",bg:"white",borderWidth:1,borderColor:"dark",color:"dark",className:"following"}}),e.jsx(S,{name:"Unfollow",rest:{w:"146px",fontSize:"16px",bg:"red",borderWidth:1,borderColor:"light",color:"light",className:"unfollow"},onClick:Z})]}):e.jsx(S,{name:"Follow",icon:e.jsx(h,{w:"25px",h:"25px",as:Fe}),rest:{w:"100px",fontSize:"16px"},onClick:P})})]}),e.jsx(a,{w:"48%",h:"100%",children:e.jsx(m,{isLoaded:!d,children:e.jsx(Fo,{img:(ae=o==null?void 0:o.data)!=null&&ae.banners?(re=o==null?void 0:o.data)==null?void 0:re.banners[0]:"https://cdn.cdnparenting.com/articles/2018/05/150311462-H.webp"})})})]}),e.jsxs(a,{w:"100%",p:"20px",color:"white",children:[e.jsx(b,{w:"25%",h:"30px",justifyContent:"space-between",children:e.jsxs(b,{color:"white",children:[e.jsx(ve,{size:"sm",src:(le=o==null?void 0:o.data)==null?void 0:le.logo,mr:"2px"}),e.jsxs(a,{flexDir:"column",children:[e.jsx(t,{fontSize:"12px",children:(ie=o==null?void 0:o.data)==null?void 0:ie.name}),e.jsx(t,{fontSize:"10px",color:"#999999",textTransform:"capitalize",children:n&&n.length>0&&((ne=n[0].reward)==null?void 0:ne.rewardSymbol)||""})]})]})}),e.jsx(r,{}),e.jsxs(F,{...V,as:"button",onClick:()=>{O(!j)},children:[e.jsx(t,{fontSize:"12px",children:"Reward overview"}),e.jsx(h,{as:T,...Y})]})]}),e.jsxs(p,{display:j?"flex":"none",children:[e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(a,{...J}),e.jsxs(a,{flexDir:["column","row"],...K,children:[e.jsxs(a,{w:["100%","49%"],flexDir:"column",children:[e.jsx(f,{fontSize:"16px",children:"Overview"}),e.jsx(t,{fontSize:"12px",py:"5px",children:o==null?void 0:o.data.description})]}),e.jsx(r,{}),e.jsxs(a,{w:["100%","49%"],flexDir:"column",children:[e.jsx(f,{fontSize:"16px",children:"How it works"}),e.jsx(t,{fontSize:"12px",py:"5px",children:"Enjoy the ease of redeeming your rewards with desired offers. Our user-friendly interface ensures a hassle-free experience every time you claim your benefits."}),(o==null?void 0:o.data.website)&&e.jsx(f,{fontSize:"16px",children:"Resources"}),((ce=o==null?void 0:o.data)==null?void 0:ce.website)&&e.jsxs(t,{fontSize:"12px",py:"5px",children:["Official website:"," ",e.jsx(po,{target:"_blank",isExternal:!0,href:Ke(o==null?void 0:o.data.website),style:{textDecoration:"underline"},children:o==null?void 0:o.data.website})]})]})]})]})]}),e.jsx(ho,{display:["none","grid"],columns:[1,2,3,4,4],w:"100%",spacingX:"3.5%",children:n==null?void 0:n.map((s,i)=>{var k,g,y;return e.jsx(yo,{isLoaded:!0,productTitle:s.name,points:`${s==null?void 0:s.tokens}${(k=s.reward)==null?void 0:k.rewardSymbol}`,productSubtitle:(y=(g=s.product)==null?void 0:g.category)==null?void 0:y.name,price:s.originalPrice.toLocaleString(),isNew:Oe(Oe()).diff(s==null?void 0:s.createdAt,"days")<1,rest:{...s},i,bgImage:s.offerImages,onClick:()=>D(`${u}/product-details/${s.offerCode}`)},ze())})}),e.jsx(Re,{loadedOffers:Me,offersFetching:W})]})}),e.jsxs(p,{...He,minH:j?"700px":"480px",display:["flex","none"],gap:0,children:[e.jsxs(p,{gap:0,children:[e.jsx(m,{isLoaded:!d,children:e.jsxs(L,{position:"relative",children:[e.jsx(C,{h:"500px",objectFit:"cover",src:(xe=o==null?void 0:o.data)==null?void 0:xe.banners[0],fallbackSrc:"https://cdn.cdnparenting.com/articles/2018/05/150311462-H.webp"}),e.jsx(L,{h:"500px",w:"100%",position:"absolute",top:0,bg:"rgba(0,0,0,0.25)"}),e.jsxs(L,{position:"absolute",bottom:10,left:3,zIndex:"overlay",children:[e.jsx(De,{isLoaded:!d,w:"70px",h:"70px",children:e.jsx(C,{src:(de=o==null?void 0:o.data)==null?void 0:de.logo,objectFit:"contain",...X,fallbackSrc:N.appLogoPlaceholder,fallbackStrategy:"beforeLoadOrError"})}),e.jsx(m,{isLoaded:!d,children:e.jsx(t,{color:"white",fontSize:"28px",w:"75%",noOfLines:2,children:(pe=o==null?void 0:o.data)==null?void 0:pe.slogan})}),e.jsx(r,{}),e.jsx(m,{isLoaded:!d,children:e.jsx(t,{color:"white",fontSize:"16px",noOfLines:3,w:"95%",children:(he=o==null?void 0:o.data)==null?void 0:he.description})}),e.jsx(a,{mt:5,children:w!=null&&w.data?e.jsxs(a,{className:"followFlex",children:[e.jsx(S,{name:"Following",icon:e.jsx(h,{w:"25px",h:"25px",as:Ce}),rest:{w:"146px",fontSize:"16px",bg:"white",borderWidth:1,borderColor:"dark",color:"dark",className:"following"}}),e.jsx(S,{name:"Unfollow",rest:{w:"146px",fontSize:"16px",bg:"red",borderWidth:1,borderColor:"light",color:"light",className:"unfollow"},onClick:Z})]}):e.jsx(S,{name:"Follow",icon:e.jsx(h,{w:"25px",h:"25px",as:Fe}),rest:{w:"100px",fontSize:"16px"},onClick:P})})]})]})}),e.jsxs(a,{w:"100%",bg:"black",p:"20px",color:"white",children:[e.jsx(b,{w:"25%",h:"30px",justifyContent:"space-between",children:e.jsxs(b,{color:"white",children:[e.jsx(ve,{size:"sm",src:(fe=o==null?void 0:o.data)==null?void 0:fe.logo,mr:"2px"}),e.jsxs(a,{flexDir:"column",children:[e.jsx(t,{fontSize:"12px",children:(je=o==null?void 0:o.data)==null?void 0:je.name}),e.jsx(t,{fontSize:"10px",color:"#999999",textTransform:"capitalize",children:n&&n.length>0&&((we=n[0].reward)==null?void 0:we.rewardSymbol)||""})]})]})}),e.jsx(r,{}),e.jsxs(F,{...V,as:"button",onClick:()=>{O(!j)},children:[e.jsx(t,{fontSize:"12px",children:"Reward overview"}),e.jsx(h,{as:T,...Y})]})]})]}),e.jsxs(p,{bg:"black",display:j?"flex":"none",children:[e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(a,{...J}),e.jsxs(a,{flexDir:["column","row"],...K,children:[e.jsxs(a,{w:["100%","49%"],flexDir:"column",children:[e.jsx(f,{fontSize:"16px",children:"Overview"}),e.jsx(t,{fontSize:"12px",py:"5px",children:o==null?void 0:o.data.description})]}),e.jsx(r,{}),e.jsxs(a,{w:["100%","49%"],flexDir:"column",children:[e.jsx(f,{fontSize:"16px",children:"How it works"}),e.jsx(t,{fontSize:"12px",py:"5px",children:"Enjoy the ease of redeeming your rewards with desired offers. Our user-friendly interface ensures a hassle-free experience every time you claim your benefits."}),(o==null?void 0:o.data.website)&&e.jsx(f,{fontSize:"16px",children:"Resources"}),((ue=o==null?void 0:o.data)==null?void 0:ue.website)&&e.jsxs(t,{fontSize:"12px",py:"5px",children:["Official website:"," ",e.jsx(t,{as:"button",decoration:"underline",children:o==null?void 0:o.data.website})]})]})]})]}),e.jsx(ye,{children:e.jsx(Re,{loadedOffers:n,offersFetching:!1})})]}),!Pe&&e.jsx(F,{as:fo,...Ee,onClick:()=>{A(I+1)},children:W?e.jsx(jo,{size:"sm"}):e.jsxs(e.Fragment,{children:["Load more ",e.jsx(h,{as:T,ml:"5%"})]})}),e.jsxs(wo,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:Ae,size:"xl",onClose:M,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(uo,{}),e.jsxs(bo,{overflowY:"scroll",...Ue,children:[e.jsxs(f,{fontSize:"18px",children:["Follow ",(be=o==null?void 0:o.data)==null?void 0:be.name]}),e.jsx(mo,{mt:"10px",children:(me=Le)==null?void 0:me.map((s,i)=>e.jsxs(a,{w:Le.length-i===1?"100%":"48%",flexDir:"column",as:"button",borderColor:Q===i?"dark":"#0000001C",...Ge,onClick:()=>$e(i),children:[e.jsxs(b,{w:"100%",children:[e.jsx(So,{bg:"black",p:"5px",children:e.jsx(C,{src:s.icon,...Qe,objectFit:"contain"})}),e.jsx(r,{}),Q===i&&e.jsx(C,{...Xe,src:N.blackCheckMark})]}),e.jsx(t,{my:"5px",children:s.title}),e.jsx(t,{color:"#999999",textAlign:"left",children:s.desc})]},ze()))}),e.jsxs(a,{mt:"24px",flexDir:"column",children:[e.jsx(F,{as:"button",...Ve,onClick:()=>{P(),M()},children:e.jsx(t,{children:"Follow"})}),e.jsx(F,{as:"button",...Ye,onClick:M,children:e.jsx(t,{children:"Cancel"})})]})]})]}),e.jsx(Co,{})]})},Zo=vo,Oo=()=>({fontSmall:{},topCardStack:{bg:"dark",borderRadius:"16px",overflow:"hidden",transition:"all 0.5s",w:"100%"},topCardHstack:{bg:"grey",w:"100%",borderRadius:"16px",overflow:"hidden",h:"400px"},mobileTop:{pt:"50px"},imageSkel:{h:["55px","70px"],w:["55px","70px"],borderRadius:["10px","0px"]},tokenCenter:{bg:"white",px:"10px",py:"5px",borderRadius:"16px",transition:"all 0.3s ease-in-out",color:"dark"},iconFlex:{alignSelf:"center",justifySelf:"center"},sendFlex:{w:"20%",bg:"black",borderRadius:"100px",borderWidth:.5,borderColor:"white",color:"white",align:"center",h:"100%"},centerButton:{w:"50%",bg:"white",borderRadius:"100px",h:"100%"},textReceive:{fontSize:["16px","16px","16px","16px","16px"],color:"black"},graphFlex:{w:"96%",borderRadius:"16px",bg:"#262626",alignSelf:"center",px:"20px"},overviewFlex:{w:"100%",color:"white",px:"20px",py:"15px",pb:"20px"},modalContentFollow:{w:{base:"90vw",md:"50vw"},p:"2%",borderRadius:0},overflowFlex:{borderRadius:"5px",p:"15px",alignContent:"flex-start",borderWidth:"1px"},circleImage:{h:"25px",w:"25px"},circleImage2:{w:"20px",h:"20px"},followCenter:{bg:"black",h:"50px",color:"light"},cancelCenter:{bg:"light",h:"50px",mt:"8px",border:"1px solid black",color:"dark"}});export{Zo as default};
