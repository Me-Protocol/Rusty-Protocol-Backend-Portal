import{r as s,u as G,b as $,a as H,j as e,F as t,T as o,i as V,n as se,S as n,ah as W,bj as te,G as O,bk as oe,W as D,_ as j,bl as ae,O as ne,d as re,bm as ie,g as le,I as ce,f as de,bn as ue,V as xe,e as me,L as R,B as pe,al as N,H as he,l as fe,bo as je}from"./index-084f02dc.js";import{N as ge,a as be,u as ye}from"./Login-78cda8e8.js";import{F as Se}from"./formik.esm-438b3c43.js";import{I as we}from"./index.esm-e4c39c0c.js";import{P as Ce,a as _e}from"./chunk-I5V4ORUK-0bd1332c.js";import{C as Ee}from"./chunk-CWVAJCXJ-3c7b32a6.js";import"./chunk-7D6N5TE5-5690da61.js";const ve=({isOpen:i,onClose:d,token:g})=>{const[l,b]=s.useState(!1),[v,x]=s.useState(!1),[k,P]=s.useState(60),[y,m]=s.useState("");let L=G(),u=$();const S=H();async function w(r){try{x(!0);const{payload:c,error:C}=await S(te({code:r,token:g}));if(C)return m(C.message);if(c){d();const _="error-toast";u.isActive(_)||u({id:_,position:"top",title:"Account Created Successfully",description:"Your account was created using email and password, please enter your email and password to continue",status:"success",duration:9e3,isClosable:!1}),L(`${O}/login`)}}catch{}finally{x(!1)}}async function I(){try{x(!0);const{payload:r,error:c}=await S(oe({token:g}));if(c)return m(c.message);r&&D(u,"Code resent successfully",9e3,"bottom-left")}catch{}finally{x(!1)}}return e.jsx(ge,{isOpen:i,onClose:d,closeOnOverlayClick:!1,modalContentStyle:{borderRadius:"10px"},children:e.jsxs(t,{flexDir:"column",py:"5px",children:[e.jsx(t,{alignSelf:"flex-end",as:"button",onClick:d,mb:"20px",children:e.jsx(we,{size:20})}),e.jsx(o,{fontSize:"14px",mb:"10px",children:"Please provide the OTP sent to your Email"}),e.jsx(V,{w:"100%",h:"80px",children:e.jsx(Ce,{onComplete:r=>{m(""),w(r)},otp:!0,placeholder:"*",children:[1,2,3,4].map(()=>e.jsx(_e,{bg:"grey",borderRadius:10,borderWidth:0,w:"30%",h:"100%"},se()))})}),y&&e.jsx(o,{color:"red",children:y}),v&&e.jsx(n,{size:"sm",alignSelf:"flex-end",mt:"10px"}),e.jsxs(V,{fontSize:"14px",mt:"25px",children:[e.jsx(o,{children:"Did not receive OTP?"}),e.jsx(W,{opacity:l?1:.5,onClick:()=>{l&&(I(),P(60),b(!1))},children:e.jsx(be,{countFrom:k,onCountdownComplete:()=>{b(!0)}})})]})]})})},ke=s.lazy(()=>j(()=>import("./index-517be469.js"),["assets/index-517be469.js","assets/index-084f02dc.js","assets/index-ed5220eb.css"])),Pe=s.lazy(()=>j(()=>import("./index-084f02dc.js").then(i=>i.d0),["assets/index-084f02dc.js","assets/index-ed5220eb.css"])),f=s.lazy(()=>j(()=>import("./index-941a4f4d.js"),["assets/index-941a4f4d.js","assets/index-084f02dc.js","assets/index-ed5220eb.css","assets/formik.esm-438b3c43.js"])),Le=s.lazy(()=>j(()=>import("./index-090b617c.js"),["assets/index-090b617c.js","assets/index-084f02dc.js","assets/index-ed5220eb.css","assets/countries-020c4914.js","assets/chunk-3RSXBRAN-6f5fc54f.js"])),Ie=s.lazy(()=>j(()=>import("./index-de5a4d9f.js"),["assets/index-de5a4d9f.js","assets/index-084f02dc.js","assets/index-ed5220eb.css"])),ze=()=>{const i=H();let d=G();const g=ae(),[l,b]=s.useState(!1),[v,x]=s.useState(!1),{isOpen:k,onClose:P,onOpen:y}=ne(),[m,L]=s.useState(""),[u,S]=s.useState(""),w=$(),I=()=>b(!l),{token:r,registerLoading:c}=re(a=>a.authReducer),{root:C,boxLeft:_,boxRegister:J,leftImg:U,registerColumn:X,head:Y,desc:E,basedText:z,checkBoxRoot:q,countrySelect:K}=ye();s.useEffect(()=>{i(ie()),Q(),r&&d(`${O}/dashboard`)},[]);const[T,A]=s.useState("United States of America"),Q=()=>{le.get("https://ipapi.co/json/").then(a=>{let p=a.data;A(p.country_name)}).catch(a=>{console.log(a)})},Z=async({email:a,password:p,firstname:F,lastname:M,country:ee})=>{if(!g)return;if(!ee){D(w,"Please select a country");return}if(F.length<2||M.length<2){D(w,"Names must be at least 2 characters");return}const{payload:B,error:h}=await i(je({firstname:F,lastname:M,email:a,password:p}));if(h)return console.log(h),S(h==null?void 0:h.message);B&&(L(B),y())};return e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(n,{size:"sm"}),children:e.jsx(t,{pos:"absolute",children:e.jsx(Ie,{pos:"fixed"})})}),e.jsxs(t,{...C,children:[e.jsx(t,{..._,children:e.jsx(ce,{src:de.AuthImage,alt:"Me Protocol",...U})}),e.jsx(t,{...J,overflowX:"hidden",children:e.jsx(Se,{initialValues:{email:"",password:"",confirm:"",firstname:"",lastname:""},validationSchema:ue,onSubmit:a=>Z({...a,country:T}),children:a=>e.jsxs(xe,{as:"form",...X,onChange:()=>i(me()),onSubmit:a.handleSubmit,children:[e.jsx(o,{...Y,children:"Letâ€™s get started."}),e.jsx(t,{w:"100%",justify:"space-between",children:e.jsx(s.Suspense,{fallback:e.jsx(n,{size:"sm"}),children:e.jsx(R,{href:`${pe}/user/google`,w:"full",children:e.jsx(Pe,{isLoading:v,name:"Sign up with Google",rest:{w:"100%"}})})})}),e.jsxs(t,{align:"center",w:"100%",justify:"space-between",children:[e.jsx(N,{w:"45%",color:"#ECECEC"}),e.jsx(o,{color:"#999999",fontSize:{base:"12px",md:"20px"},children:"or"}),e.jsx(N,{w:"45%",color:"#ECECEC"})]}),e.jsx(o,{...E,children:"Enter a few details to join the ME community"}),e.jsxs(t,{flexDir:{base:"column",md:"row"},justifyContent:"space-between",w:"100%",children:[e.jsx(t,{w:{base:"100%",md:"49%"},children:e.jsx(s.Suspense,{fallback:e.jsx(n,{size:"sm"}),children:e.jsx(f,{name:"firstname",placeholder:"First Name"})})}),e.jsx(t,{w:{base:"100%",md:"49%"},children:e.jsx(s.Suspense,{fallback:e.jsx(n,{size:"sm"}),children:e.jsx(f,{name:"lastname",placeholder:"Last Name"})})})]}),e.jsxs(s.Suspense,{fallback:e.jsx(n,{size:"sm"}),children:[e.jsx(f,{name:"email",type:"email",placeholder:"your@email.com"}),u&&e.jsx(o,{fontSize:"12px",color:"red",children:u})]}),e.jsx(he,{...z,children:"Get yourself a password."}),e.jsx(o,{...E,children:"Passwords must include a symbol or number and have at least 8 characters."}),e.jsxs(s.Suspense,{fallback:e.jsx(n,{size:"sm"}),children:[e.jsx(f,{name:"password",type:l?"text":"password",placeholder:"Password"}),e.jsx(f,{name:"confirm",type:l?"text":"password",placeholder:"Confirm Password"})]}),e.jsx(o,{as:fe,onClick:I,alignSelf:"flex-end",...z,pt:"0px",bg:"transparent",_hover:{bg:"transparent"},children:l?"Hide":"Show"}),e.jsx(o,{...z,children:"Where are you based?"}),e.jsx(s.Suspense,{fallback:e.jsx(n,{size:"sm"}),children:e.jsx(Le,{value:T,onChange:p=>{A(p.target.value)},...K})}),e.jsx(t,{...q,children:e.jsx(Ee,{w:"100%",borderColor:"black",spacing:"1rem",children:"Get exclusive offers, trends and deals"})}),e.jsx(s.Suspense,{fallback:e.jsx(n,{size:"sm"}),children:e.jsx(ke,{isLoading:c,name:"Create Account"})}),e.jsxs(o,{...E,pt:"10px",children:["By signing up you accept to our"," ",e.jsxs(R,{href:"#",textDecoration:"underline",children:[" ","Terms and Services."]})]}),e.jsxs(o,{...E,pt:"10px",children:["Already have an account?",e.jsxs(R,{onClick:()=>{d(`${O}/login`,{replace:!0})},textDecoration:"underline",children:[" ","Login here."]})]}),e.jsx(W,{bg:"transparent",pt:"40px",w:"100%"})]})})})]}),e.jsx(ve,{isOpen:k,onClose:P,token:m})]})},Be=ze;export{Be as default};
