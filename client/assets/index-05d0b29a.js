import{b as Me,K as $e,c as Pe,a as _e,u as Ae,r as n,d as te,M as Ne,N as Te,O as He,Q as Ge,U as Ue,g as We,B as Qe,W as L,j as e,F as r,X as Xe,m as Ve,h as j,G as x,i as b,I as z,f as re,v as D,T as l,w as c,Y as E,E as S,Z as Ye,$ as Je,a0 as Ke,C as g,J as le,H as k,a1 as Ze,x as qe,y as ne,n as ie,l as Be,S as eo,a2 as oo,a3 as so,a4 as ao,a5 as to,a6 as ce,a7 as ro,t as lo}from"./index-4224d7bb.js";import no from"./index-fa481240.js";import io from"./index-ab27bb6a.js";import co from"./index-bfff2e3e.js";import{S as xo}from"./svg-371378a7.js";import{D as po}from"./index-a5654612.js";import{S as fo}from"./chunk-W7A7QDAK-c552393f.js";import"./index-b00e6359.js";import"./countries-020c4914.js";import"./chunk-3RSXBRAN-fcbdb00b.js";import"./index.esm-7b9b10e1.js";import"./index-ea27345d.js";import"./index-fae7ab66.js";import"./ResizeObserver.es-f4289e8a.js";const ho=()=>{var U,W,Q,X,V,Y,J,K,Z,q,B,ee,oe;const{root:de,loadMore:xe}=lo();let C=Me();const{id:i}=$e();Pe(),_e();let F=Ae();const[wo,u]=n.useState(!1),[y,M]=n.useState(!1);n.useState("Last 30 days");const[O,$]=n.useState(1),[pe,mo]=n.useState([]),[fe,P]=n.useState(!1),[jo,_]=n.useState(1),[A,N]=n.useState(!1),[d,T]=n.useState([]),[H,he]=n.useState(null),{token:v}=te(s=>s.authReducer);te(s=>s.productReducer);const[ue]=Ne(),[we]=Te(),{isOpen:me,onOpen:bo,onClose:R}=He(),{data:o,isLoading:w,error:So}=Ge({id:i},{refetchOnFocus:!0,skip:!i}),{data:I,isLoading:go,refetch:m}=Ue({brand_id:i},{refetchOnMountOrArgChange:!0,skip:!v}),{fontSmall:ko,topCardStack:je,topCardHstack:be,imageSkel:Se,tokenCenter:ge,iconFlex:ke,sendFlex:Co,centerButton:Fo,textReceive:yo,graphFlex:Ce,overviewFlex:Fe,modalContentFollow:ye,overflowFlex:Oe,circleImage:ve,circleImage2:Re,followCenter:Ie,cancelCenter:Le}=uo();n.useEffect(()=>{ze()},[O,i]);async function ze(){var s,t,p,f,h,se,ae;if(i){N(!0),P(!1);try{const{data:a}=await We.get(`${Qe}/store/offer?page=${O}&limit=4&brandId=${i}`);((s=a==null?void 0:a.data)==null?void 0:s.offers.length)<1&&(P(!0),L(C,"No offer available",3e3,"top-right")),d.every(Ee=>Ee.brandId===i)?(T([...d,...(t=a==null?void 0:a.data)==null?void 0:t.offers]),_((f=(p=a==null?void 0:a.data)==null?void 0:p.pagination)==null?void 0:f.totalPage)):($(1),T((h=a==null?void 0:a.data)==null?void 0:h.offers),_((ae=(se=a==null?void 0:a.data)==null?void 0:se.pagination)==null?void 0:ae.totalPage))}catch(a){console.log(a,"GET_BRANDS_OFFERS_ERR")}finally{N(!1)}}}async function G(){v||F(`${x}/login`),u(!0),await ue({brand_id:i}).then(async s=>{var t;await m(),((t=s==null?void 0:s.data)==null?void 0:t.statusCode)===200&&(await m(),L(C,"Brand Followed"))}).catch(s=>{console.log(s,"FollowBrandErr")}).finally(()=>{u(!1)})}async function De(){v||F(`${x}/login`),u(!0),await we({brandId:i}).then(async s=>{var t;await m(),((t=s==null?void 0:s.data)==null?void 0:t.statusCode)===200&&(await m(),L(C,"Brand Unfollowed"))}).catch(s=>{console.log(s,"unFollowBrandERR")}).finally(()=>{u(!1)})}return e.jsxs(r,{flexDir:"column",children:[e.jsx(Xe,{}),e.jsx(Ve,{children:e.jsxs(j,{...de,children:[e.jsx(no,{breadcrumbs:[{name:"Home",link:`${x}/dashboard`},{name:"Shop",link:`${x}/dashboard/shop`},{name:(W=(U=o==null?void 0:o.data)==null?void 0:U.name)==null?void 0:W.replaceAll("_"," "),link:`${x}/dashboard/shop/${i}`,isCurrentPage:!0}]}),e.jsxs(j,{minH:y?"700px":"480px",...je,children:[e.jsxs(b,{...be,children:[e.jsxs(j,{w:"60%",h:"100%",p:"20px",children:[e.jsx(fo,{isLoaded:!w,w:"70px",h:"70px",children:e.jsx(z,{src:(Q=o==null?void 0:o.data)==null?void 0:Q.logo,objectFit:"contain",...Se,fallbackSrc:re.appLogoPlaceholder,fallbackStrategy:"beforeLoadOrError"})}),e.jsx(D,{isLoaded:!w,children:e.jsx(l,{fontSize:"28px",w:"75%",noOfLines:2,children:(X=o==null?void 0:o.data)==null?void 0:X.slogan})}),e.jsx(c,{}),e.jsx(D,{isLoaded:!w,children:e.jsx(l,{fontSize:"16px",noOfLines:3,w:"95%",children:(V=o==null?void 0:o.data)==null?void 0:V.description})}),e.jsx(r,{children:I!=null&&I.data?e.jsxs(r,{className:"followFlex",children:[e.jsx(E,{name:"Following",icon:e.jsx(S,{w:"25px",h:"25px",as:Ye}),rest:{w:"146px",fontSize:"16px",bg:"white",borderWidth:1,borderColor:"dark",color:"dark",className:"following"}}),e.jsx(E,{name:"Unfollow",rest:{w:"146px",fontSize:"16px",bg:"red",borderWidth:1,borderColor:"light",color:"light",className:"unfollow"},onClick:De})]}):e.jsx(E,{name:"Follow",icon:e.jsx(S,{w:"25px",h:"25px",as:Je}),rest:{w:"100px",fontSize:"16px"},onClick:G})})]}),e.jsx(r,{w:"48%",h:"100%",children:e.jsx(D,{isLoaded:!w,children:e.jsx(xo,{img:(Y=o==null?void 0:o.data)!=null&&Y.banners?(J=o==null?void 0:o.data)==null?void 0:J.banners[0]:"https://cdn.cdnparenting.com/articles/2018/05/150311462-H.webp"})})})]}),e.jsxs(r,{w:"100%",p:"20px",color:"white",children:[e.jsx(b,{w:"25%",h:"30px",justifyContent:"space-between",children:e.jsxs(b,{color:"white",children:[e.jsx(Ke,{size:"sm",src:(K=o==null?void 0:o.data)==null?void 0:K.logo,mr:"2px"}),e.jsxs(r,{flexDir:"column",children:[e.jsx(l,{fontSize:"12px",children:(Z=o==null?void 0:o.data)==null?void 0:Z.name}),e.jsx(l,{fontSize:"10px",color:"#999999",textTransform:"capitalize",children:d&&d.length>0&&((q=d[0].reward)==null?void 0:q.rewardSymbol)||""})]})]})}),e.jsx(c,{}),e.jsxs(g,{...ge,as:"button",onClick:()=>{M(!y)},children:[e.jsx(l,{fontSize:"12px",children:"Reward overview"}),e.jsx(S,{as:le,...ke})]})]}),e.jsxs(j,{display:y?"flex":"none",children:[e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{}),e.jsx(r,{...Ce}),e.jsxs(r,{flexDir:["column","row"],...Fe,children:[e.jsxs(r,{w:["100%","49%"],flexDir:"column",children:[e.jsx(k,{fontSize:"16px",children:"Overview"}),e.jsx(l,{fontSize:"12px",py:"5px",children:o==null?void 0:o.data.description})]}),e.jsx(c,{}),e.jsxs(r,{w:["100%","49%"],flexDir:"column",children:[e.jsx(k,{fontSize:"16px",children:"How it works"}),e.jsx(l,{fontSize:"12px",py:"5px",children:"Enjoy the ease of redeeming your rewards with desired offers. Our user-friendly interface ensures a hassle-free experience every time you claim your benefits."}),(o==null?void 0:o.data.website)&&e.jsx(k,{fontSize:"16px",children:"Resources"}),((B=o==null?void 0:o.data)==null?void 0:B.website)&&e.jsxs(l,{fontSize:"12px",py:"5px",children:["Official website:"," ",e.jsx(Ze,{target:"_blank",to:o==null?void 0:o.data.website,style:{textDecoration:"underline"},children:o==null?void 0:o.data.website})]})]})]})]})]}),e.jsx(qe,{display:["none","grid"],columns:[1,2,3,4,4],w:"100%",spacingX:"3.5%",children:d==null?void 0:d.map((s,t)=>{var p,f,h;return e.jsx(io,{isLoaded:!0,productTitle:s.name,points:`${s==null?void 0:s.tokens}${(p=s.reward)==null?void 0:p.rewardSymbol}`,productSubtitle:(h=(f=s.product)==null?void 0:f.category)==null?void 0:h.name,price:s.originalPrice.toLocaleString(),isNew:ne(ne()).diff(s==null?void 0:s.createdAt,"days")<1,rest:{...s},i:t,bgImage:s.offerImages,onClick:()=>F(`${x}/product-details/${s.offerCode}`)},ie())})}),e.jsx(po,{loadedOffers:pe,offersFetching:A}),!fe&&e.jsx(g,{as:Be,...xe,onClick:()=>{$(O+1)},children:A?e.jsx(eo,{size:"sm"}):e.jsxs(e.Fragment,{children:["Load more ",e.jsx(S,{as:le,ml:"5%"})]})})]})}),e.jsxs(oo,{isCentered:!0,blockScrollOnMount:!0,scrollBehavior:"inside",isOpen:me,size:"xl",onClose:R,motionPreset:"slideInBottom",closeOnOverlayClick:!1,children:[e.jsx(so,{}),e.jsxs(ao,{overflowY:"scroll",...ye,children:[e.jsxs(k,{fontSize:"18px",children:["Follow ",(ee=o==null?void 0:o.data)==null?void 0:ee.name]}),e.jsx(to,{mt:"10px",children:(oe=ce)==null?void 0:oe.map((s,t)=>e.jsxs(r,{w:ce.length-t===1?"100%":"48%",flexDir:"column",as:"button",borderColor:H===t?"dark":"#0000001C",...Oe,onClick:()=>he(t),children:[e.jsxs(b,{w:"100%",children:[e.jsx(ro,{bg:"black",p:"5px",children:e.jsx(z,{src:s.icon,...ve,objectFit:"contain"})}),e.jsx(c,{}),H===t&&e.jsx(z,{...Re,src:re.blackCheckMark})]}),e.jsx(l,{my:"5px",children:s.title}),e.jsx(l,{color:"#999999",textAlign:"left",children:s.desc})]},ie()))}),e.jsxs(r,{mt:"24px",flexDir:"column",children:[e.jsx(g,{as:"button",...Ie,onClick:()=>{G(),R()},children:e.jsx(l,{children:"Follow"})}),e.jsx(g,{as:"button",...Le,onClick:R,children:e.jsx(l,{children:"Cancel"})})]})]})]}),e.jsx(co,{})]})},To=ho,uo=()=>({fontSmall:{},topCardStack:{bg:"dark",borderRadius:"16px",overflow:"hidden",transition:"all 0.5s",w:"100%"},topCardHstack:{bg:"grey",w:"100%",borderRadius:"16px",overflow:"hidden",h:"400px"},imageSkel:{h:"70px",w:"70px"},tokenCenter:{bg:"white",px:"10px",py:"5px",borderRadius:"16px",transition:"all 0.3s ease-in-out",color:"dark"},iconFlex:{alignSelf:"center",justifySelf:"center"},sendFlex:{w:"20%",bg:"black",borderRadius:"100px",borderWidth:.5,borderColor:"white",color:"white",align:"center",h:"100%"},centerButton:{w:"50%",bg:"white",borderRadius:"100px",h:"100%"},textReceive:{fontSize:["16px","16px","16px","16px","16px"],color:"black"},graphFlex:{w:"96%",borderRadius:"16px",bg:"#262626",alignSelf:"center",px:"20px"},overviewFlex:{w:"100%",color:"white",px:"20px",py:"15px",pb:"20px"},modalContentFollow:{w:{base:"90vw",md:"50vw"},p:"2%",borderRadius:0},overflowFlex:{borderRadius:"5px",p:"15px",alignContent:"flex-start",borderWidth:"1px"},circleImage:{h:"25px",w:"25px"},circleImage2:{w:"20px",h:"20px"},followCenter:{bg:"black",h:"50px",color:"light"},cancelCenter:{bg:"light",h:"50px",mt:"8px",border:"1px solid black",color:"dark"}});export{To as default};
