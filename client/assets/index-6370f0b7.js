import{u as F,a as L,b as v,r as o,j as s,F as i,I as B,f as E,h as c,R as T,e as _,H as m,T as n,S as p,l as M,g as A,B as D,G as H}from"./index-4302fa73.js";import O from"./index-64097767.js";import{u as $}from"./Login-c5c340c6.js";import x from"./index-c93abaf5.js";import{_ as z}from"./timer-a0456b3e.js";import{F as G}from"./formik.esm-5e033970.js";import N from"./index-036c94a7.js";const U=()=>{let h=F();const u=L(),w=v(),{root:g,boxLeft:f,boxLogin:j,leftImg:b,loginColumn:S,head:l,desc:t,basedText:k}=$();o.useState("566");const P=()=>{console.log("button clicked")},[a,y]=o.useState(!1),[R,d]=o.useState(!1),I=()=>y(!a),C=async({password:r},V)=>{d(!0);try{const{data:e}=await A.post(`${D}/users/password/reset-by-email`,{token:window.location.href.substring(window.location.href.indexOf("=")+1),newPassword:r});e!=null&&e.isReset&&(h(`${H}/login`),w({position:"top",title:"Password changed",description:"Password updated successfully, please login with your new password",status:"success",duration:9e3,isClosable:!0}))}catch(e){console.log(e,"ChangePwdErr")}finally{d(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(O,{}),s.jsxs(i,{...g,children:[s.jsx(i,{...f,children:s.jsx(B,{src:E.AuthImage,alt:"Me Protocol",...b})}),s.jsx(i,{...j,children:s.jsx(c,{...S,children:window.location.href.indexOf("token=")>-1?s.jsx(s.Fragment,{children:s.jsx(G,{initialValues:{password:"",confirm:""},validationSchema:T,onSubmit:C,children:r=>s.jsxs(c,{as:"form",onChange:()=>u(_()),onSubmit:r.handleSubmit,w:{base:"100%",md:"35vw"},children:[s.jsx(m,{...l,pb:2,children:"Create new password"}),s.jsx(n,{...t,children:"Please provide and confirm a new password"}),s.jsxs(o.Suspense,{fallback:s.jsx(p,{size:"sm"}),children:[s.jsx(x,{name:"password",type:a?"text":"password",placeholder:"Password"}),s.jsx(x,{name:"confirm",type:a?"text":"password",placeholder:"Confirm Password"})]}),s.jsx(n,{as:M,onClick:I,alignSelf:"flex-end",...k,pt:"0px",bg:"transparent",_hover:{bg:"transparent"},children:a?"Hide":"Show"}),s.jsx(o.Suspense,{fallback:s.jsx(p,{size:"sm"}),children:s.jsx(N,{isLoading:R,name:"Change password"})})]})})}):s.jsxs(s.Fragment,{children:[s.jsx(m,{...l,pb:2,children:"Reset password"}),s.jsx(n,{...t,children:"An email containing a password reset link has been sent to your email, please go to your email and click on the link change your password."}),s.jsxs(n,{flexDir:"row",...t,textDecoration:"underline",children:["My link didn't arrive? Resend link in"," ",s.jsx(z,{minutes:1,seconds:1,text:" ",ButtonText:"Resend",resend:P,background:"black"})]})]})})})]})]})},Z=U;export{Z as default};
