import{by as z,bz as L,r as u,bA as J,bB as Z,bC as v,bD as O,bE as Q,bF as W,bG as Y,j as R,bH as ee,bI as ne,bJ as te}from"./index-4224d7bb.js";var[se,Ie,oe,ae]=z(),[ue,ie]=L({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to all pin input fields within `<PinInput />`"}),$=o=>o==null?void 0:o.split("");function H(o,a){return(a==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(o)}function le(o={}){const{autoFocus:a,value:i,defaultValue:l,onChange:c,onComplete:r,placeholder:P="â—‹",manageFocus:m=!0,otp:_=!1,id:k,isDisabled:D,isInvalid:N,type:I="number",mask:j}=o,U=u.useId(),y=k??`pin-input-${U}`,t=oe(),[M,E]=u.useState(!0),[V,w]=u.useState(-1),[x,d]=J({defaultValue:$(l)||[],value:$(i),onChange:n=>c==null?void 0:c(n.join(""))});u.useEffect(()=>{if(a){const n=t.first();n&&requestAnimationFrame(()=>{n.node.focus()})}},[t]);const B=u.useCallback(n=>{if(!M||!m)return;const e=t.next(n,!1);e&&requestAnimationFrame(()=>{e.node.focus()})},[t,M,m]),C=u.useCallback((n,e,s=!0)=>{const p=[...x];p[e]=n,d(p),n!==""&&p.length===t.count()&&p.every(g=>g!=null&&g!=="")?r==null||r(p.join("")):s&&B(e)},[x,d,B,r,t]),X=u.useCallback(()=>{var n;const e=Array(t.count()).fill("");d(e);const s=t.first();(n=s==null?void 0:s.node)==null||n.focus()},[t,d]),G=u.useCallback((n,e)=>{let s=e;return(n==null?void 0:n.length)>0&&(n[0]===e.charAt(0)?s=e.charAt(1):n[0]===e.charAt(1)&&(s=e.charAt(0))),s},[]);return{getInputProps:u.useCallback(n=>{const{index:e,...s}=n,p=h=>{const f=h.target.value,b=x[e],A=G(b,f);if(A===""){C("",e);return}if(f.length>2){if(H(f,I)){const F=f.split("").filter((me,q)=>q<t.count());d(F),F.length===t.count()&&(r==null||r(F.join("")))}}else H(A,I)&&C(A,e),E(!0)},S=h=>{var f;if(h.key==="Backspace"&&m)if(h.target.value===""){const b=t.prev(e,!1);b&&(C("",e-1,!1),(f=b.node)==null||f.focus(),E(!0))}else E(!1)},g=()=>{w(e)},K=()=>{w(-1)},T=V===e;return{"aria-label":"Please enter your pin code",inputMode:I==="number"?"numeric":"text",type:j?"password":I==="number"?"tel":"text",...s,id:`${y}-${e}`,disabled:D,"aria-invalid":Z(N),onChange:v(s.onChange,p),onKeyDown:v(s.onKeyDown,S),onFocus:v(s.onFocus,g),onBlur:v(s.onBlur,K),value:x[e]||"",autoComplete:_?"one-time-code":"off",placeholder:T?"":P}},[t,V,G,y,D,j,N,m,r,_,P,C,d,I,x]),id:y,descendants:t,values:x,setValue:C,setValues:d,clear:X}}function re(o={},a=null){const{getInputProps:i}=ie(),{index:l,register:c}=ae();return i({...o,ref:O(c,a),index:l})}function ce(o){const a=Q("PinInput",o),{children:i,...l}=W(o),{descendants:c,...r}=le(l),P=Y(i).map(m=>u.cloneElement(m,{__css:a}));return R.jsx(se,{value:c,children:R.jsx(ue,{value:r,children:P})})}ce.displayName="PinInput";var de=ee(function(a,i){const l=re(a,i);return R.jsx(ne.input,{...l,className:te("chakra-pin-input",a.className)})});de.displayName="PinInputField";export{ce as P,de as a};
