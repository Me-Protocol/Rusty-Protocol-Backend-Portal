/*! For license information please see 319.67f8721b.chunk.js.LICENSE.txt */
(self.webpackChunkapp_web_frontend=self.webpackChunkapp_web_frontend||[]).push([[319],{50319:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r=n(74165),a=n(1413),o=n(15861),i=n(29439),l=n(28382),s=n(51022),u=n(92746),c=n(76582),d=n(81146),f=n(71118),p=n(10884),h=n(66484),v=n(9055),x=n(88675),b=n(70548),g=n(45987),y=n(37762),m=n(84931),k=n(75597),j=n(32481),w=n(62996),S=n(45113),Z=n(36992),C=n(80184),_=["className","rows"];var O=["h","minH","height","minHeight"],I=(0,k.G)((function(e,t){var n=(0,j.mq)("Textarea",e),r=(0,w.Lr)(e),o=r.className,i=r.rows,l=(0,g.Z)(r,_),s=(0,m.Y)(l),u=i?function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object.assign({},e),a=(0,y.Z)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;o in r&&delete r[o]}}catch(i){a.e(i)}finally{a.f()}return r}(n,O):n;return(0,C.jsx)(S.m.textarea,(0,a.Z)((0,a.Z)({ref:t,rows:i},s),{},{className:(0,Z.cx)("chakra-textarea",o),__css:u}))}));I.displayName="Textarea";var P=n(72791),A=n(35378),M=n(40587),D=n(11848),H=n(72426),R=n.n(H),E=n(57689),N=n(52780),T=n(43299),L=function(e){var t=e.name,n=(e.price,e.token),g=(e.quantity,e.date,e.expired),y=e.image,m=e.rest,k=F(),j=k.root,w=k.bodyText,S=k.headText,Z=(0,E.s0)(),_=(0,l.p)(),O=(0,s.q)(),H=O.isOpen,L=O.onOpen,q=O.onClose,z=(0,A.MS)(),Y=(0,i.Z)(z,1)[0],V=(0,P.useState)(null),W=(0,i.Z)(V,2),B=W[0],G=W[1],K=(0,P.useState)(!1),J=(0,i.Z)(K,2),Q=J[0],U=J[1],X=(0,P.useState)(""),$=(0,i.Z)(X,2),ee=$[0],te=$[1],ne=(0,P.useState)(""),re=(0,i.Z)(ne,2),ae=re[0],oe=re[1],ie=(0,A.ve)({offerId:null===m||void 0===m?void 0:m.offerId},{refetchOnMountOrArgChange:!0,skip:!n}),le=(ie.data,ie.refetch);function se(){return(se=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae){e.next=3;break}return(0,M.Z)(_,"Please input all fields",2e3),e.abrupt("return");case 3:if(!(ee.split(" ").length<5)){e.next=6;break}return(0,M.Z)(_,"At least five characters required",2e3),e.abrupt("return");case 6:if(B){e.next=9;break}return(0,M.Z)(_,"Please select a rating",2e3),e.abrupt("return");case 9:return U(!0),e.next=12,Y({title:ae,review:ee,offer_id:Number(null===m||void 0===m?void 0:m.offerId),rating:B}).then((function(e){var t;200===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.status)&&(le(),(0,M.Z)(_,"Review submitted",5e3,"bottom-right"),q(),G(null),te(""),oe(""))})).catch((function(e){console.log(e,"AddReviewToOfferErr")})).finally((function(){U(!1)}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,C.jsxs)(u.K,{children:[(0,C.jsxs)(c.k,(0,a.Z)((0,a.Z)({},j),{},{flexDir:"row",align:"center",children:[(0,C.jsxs)(c.k,{w:"30%",h:"70%",flexDir:"row",align:"center",justify:"space-between",children:[(0,C.jsx)(c.k,{w:"100px",h:"100px",flexDir:"column",children:(0,C.jsx)(d.E,{objectFit:"cover",src:y})}),(0,C.jsx)(f.L,{}),(0,C.jsxs)(c.k,{flexDir:"column",w:"70%",h:"100px",children:[(0,C.jsx)(p.x,(0,a.Z)((0,a.Z)({},S),{},{noOfLines:1,children:t})),(0,C.jsx)(f.L,{}),(0,C.jsx)(p.x,(0,a.Z)((0,a.Z)({},w),{},{children:n})),(0,C.jsxs)(p.x,(0,a.Z)((0,a.Z)({},w),{},{children:["Purchased: ",R()(null===m||void 0===m?void 0:m.updatedAt).fromNow()]}))]})]}),g&&(0,C.jsxs)(c.k,{w:"30%",h:"70%",flexDir:"column",align:"flex-end",children:[(0,C.jsx)(p.x,(0,a.Z)((0,a.Z)({},w),{},{color:"dark",children:"Expires"})),(0,C.jsx)(p.x,(0,a.Z)((0,a.Z)({},w),{},{children:R()(null===m||void 0===m?void 0:m.updatedAt).format("DD MMM YYYY")}))]}),(0,C.jsxs)(c.k,{w:"30%",h:"70%",align:"flex-end",flexDir:"column",children:[(0,C.jsx)(h.M,(0,a.Z)((0,a.Z)({},w),{},{as:v.z,_hover:{bg:"dark"},color:"light",w:"35%",h:"30%",isDisabled:!(null!==m&&void 0!==m&&m.coupon),bg:"dark",onClick:function(){Z("".concat(N.cn,"/dashboard_my_deals_details"),{state:(0,a.Z)({},m)})},children:"View details"})),(0,C.jsx)(p.x,(0,a.Z)((0,a.Z)({as:"button"},w),{},{opacity:null!==m&&void 0!==m&&m.couponId?1:.4,onClick:function(){m.couponId&&L()},children:g?"View voucher":"Leave Review"})),(0,C.jsx)(p.x,(0,a.Z)((0,a.Z)({as:null!==m&&void 0!==m&&m.isRedeemed?"text":"button"},w),{},{children:null!==m&&void 0!==m&&m.isRedeemed?"Redeemed":"Status: ".concat(m.status)})),(0,C.jsx)(p.x,(0,a.Z)((0,a.Z)({as:"button"},w),{},{children:"Buy it again"}))]})]})),(0,C.jsx)(x.i,{}),(0,C.jsxs)(D.default,{isOpen:H,onClose:q,closeOnOverlayClick:!0,children:[(0,C.jsx)(p.x,{mb:"24px",children:"Leave review"}),(0,C.jsx)(x.i,{}),(0,C.jsxs)(c.k,{mt:"16px",mb:"16px",flexDir:"column",justify:"center",alignItems:"center",children:[(0,C.jsx)(p.x,{children:"My overall rating"}),(0,C.jsx)(c.k,{children:(0,C.jsx)(T,{name:"rate2",starColor:"#000000",emptyStarColor:"#999999",starCount:5,value:B,onStarClick:function(e){G(e)}})})]}),(0,C.jsx)(x.i,{}),(0,C.jsxs)(c.k,{mt:"20px",flexDir:"column",children:[(0,C.jsx)(c.k,{w:"100%",children:(0,C.jsx)(b.I,{variant:"outline",borderRadius:"0px",value:ae,onChange:function(e){var t=e.target;return oe(t.value)},h:"46px",placeholder:"Review headline or summary",_placeholder:{opacity:1,color:"#AFAFAF"}})}),(0,C.jsx)(c.k,{mt:"16px",w:"100%",flexDir:"column",children:(0,C.jsx)(I,{variant:"outline",borderRadius:"0px",value:ee,onChange:function(e){var t=e.target;return te(t.value)},placeholder:"Write your review here. It must be at least 5 characters long.",_placeholder:{opacity:1,color:"#AFAFAF"},size:"sm"})})]}),(0,C.jsx)(c.k,{align:"center",mt:"24px",children:(0,C.jsx)(v.z,{isLoading:Q,w:"100%",h:"48px",bg:"black",_hover:{bg:"dark"},onClick:function(){return function(){return se.apply(this,arguments)}()},children:(0,C.jsx)(p.x,{color:"white",children:"Submit"})})}),(0,C.jsx)(c.k,{align:"center",mt:"10px",children:(0,C.jsx)(h.M,{as:"button",w:"100%",h:"48px",border:"1px solid black",onClick:function(){G(null),te(""),oe(""),q()},children:(0,C.jsx)(p.x,{color:"black",children:"Cancel"})})})]})]})},F=function(){return{root:{w:"100%",h:"150px",justify:"space-between"},headText:{fontSize:"16px"},bodyText:{fontSize:"12px",color:"#999999"}}}},81694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=a.apply(null,n);i&&e.push(i)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)r.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},43299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(72791),o=s(a),i=s(n(52007)),l=s(n(81694));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={value:e.value},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;null!=t&&t!==this.state.value&&this.setState({value:t})}},{key:"onChange",value:function(e){var t=this.props,n=t.editing,r=t.value;n&&null==r&&this.setState({value:e})}},{key:"onStarClick",value:function(e,t,n,r){r.stopPropagation();var a=this.props,o=a.onStarClick;a.editing&&o&&o(e,t,n,r)}},{key:"onStarHover",value:function(e,t,n,r){r.stopPropagation();var a=this.props,o=a.onStarHover;a.editing&&o&&o(e,t,n,r)}},{key:"onStarHoverOut",value:function(e,t,n,r){r.stopPropagation();var a=this.props,o=a.onStarHoverOut;a.editing&&o&&o(e,t,n,r)}},{key:"renderStars",value:function(){for(var e=this,t=this.props,n=t.name,r=t.starCount,a=t.starColor,i=t.emptyStarColor,l=t.editing,s=this.state.value,u=function(e,t){return{float:"right",cursor:l?"pointer":"default",color:t>=e?a:i}},c={display:"none",position:"absolute",marginLeft:-9999},d=[],f=function(t){var r=n+"_"+t,a=o.default.createElement("input",{key:"input_"+r,style:c,className:"dv-star-rating-input",type:"radio",name:n,id:r,value:t,checked:s===t,onChange:e.onChange.bind(e,t,n)}),i=o.default.createElement("label",{key:"label_"+r,style:u(t,s),className:"dv-star-rating-star "+(s>=t?"dv-star-rating-full-star":"dv-star-rating-empty-star"),htmlFor:r,onClick:function(r){return e.onStarClick(t,s,n,r)},onMouseOver:function(r){return e.onStarHover(t,s,n,r)},onMouseLeave:function(r){return e.onStarHoverOut(t,s,n,r)}},e.renderIcon(t,s,n,r));d.push(a),d.push(i)},p=r;p>0;p--)f(p);return d.length?d:null}},{key:"renderIcon",value:function(e,t,n,r){var a=this.props,i=a.renderStarIcon,l=a.renderStarIconHalf;return"function"===typeof l&&Math.ceil(t)===e&&t%1!==0?l(e,t,n,r):"function"===typeof i?i(e,t,n,r):o.default.createElement("i",{key:"icon_"+r,style:{fontStyle:"normal"}},"\u2605")}},{key:"render",value:function(){var e=this.props,t=e.editing,n=e.className,r=(0,l.default)("dv-star-rating",{"dv-star-rating-non-editable":!t},n);return o.default.createElement("div",{style:{display:"inline-block",position:"relative"},className:r},this.renderStars())}}]),t}(a.Component);u.propTypes={name:i.default.string.isRequired,value:i.default.number,editing:i.default.bool,starCount:i.default.number,starColor:i.default.string,onStarClick:i.default.func,onStarHover:i.default.func,onStarHoverOut:i.default.func,renderStarIcon:i.default.func,renderStarIconHalf:i.default.func},u.defaultProps={starCount:5,editing:!0,starColor:"#ffb400",emptyStarColor:"#333"},t.default=u,e.exports=t.default}}]);
//# sourceMappingURL=319.67f8721b.chunk.js.map